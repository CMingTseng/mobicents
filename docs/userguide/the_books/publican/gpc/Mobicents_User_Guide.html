<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Mobicents</title>
    <link rel="stylesheet" href="./Common_Content/css/default.css" type="text/css" />
    <meta name="description" content="Mobicents is a highly scalable event-driven application server with a robust component model. Mobicents is the first and only Open Source Platform certified for JSLEE 1.0 compliance. It complements J2EE to enable the convergence of voice, video and data in next-generation intelligent applications. Web and SIP can be combined together to achieve more sophisticated and natural user experience." />
  </head>
  <body>
    <div class="book" lang="en-US" xml:lang="en-US">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="id219140"></a>Mobicents</h1>
          </div>
          <div>
            <h2 class="subtitle">User Guide</h2>
          </div>
          <div>
            <div class="authorgroup">
              <h3 class="corpauthor">
		Red Hat Documentation Group
	</h3>
              <div class="author">
                <h3 class="author"><span class="firstname">Douglas</span> <span class="surname">Silas</span></h3>
                <div class="affiliation"><span class="orgname">Red Hat, Inc.<br /></span> <span class="orgdiv">Content Services<br /></span></div>
                <code class="email">&lt;<a href="mailto:dhensley@redhat.com">dhensley@redhat.com</a>&gt;</code>
              </div>
            </div>
          </div>
          <div>
            <p class="copyright">Copyright Â© 2008 Red Hat, Inc</p>
          </div>
          <div>
            <div class="abstract">
              <h6>Abstract</h6>
              <p>Mobicents is a highly scalable event-driven application server with
a robust component model. Mobicents is the first and only Open
Source Platform certified for JSLEE 1.0 compliance. It complements
J2EE to enable the convergence of voice, video and data in
next-generation intelligent applications. Web and SIP can be
combined together to achieve more sophisticated and natural user
experience.</p>
            </div>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <dl>
          <dt>
            <span class="preface">
              <a href="#Mobicents_User_Guide-Preface">Preface</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#Document_Conventions">1. Document Conventions</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#We_Need_Feedback">2. We Need Feedback!</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#chapter-Introduction">1. Introduction</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#section-Introduction_to_the_Mobicents_Converged_Application_Server">1.1. Introduction to the Mobicents Converged Application Server</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Service_Building_Blocks_and_Next-Generation_Intelligent_Networks">1.2. Service Building Blocks and Next-Generation Intelligent Networks</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Mobicents_Use_Cases">1.3. Mobicents Use Cases</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#chapter-Installation">2. Installation</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#section-Installing_the_Mobicents_Binary_Distribution">2.1. Installing the Mobicents Binary Distribution</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Building_the_Mobicents_1.2.x_Series">2.2. Building the Mobicents 1.2.x Series</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Installing_EclipSLEE">2.3. Installing EclipSLEE: The JAIN SLEE Eclipse Plugin</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#chapter-Running_Mobicents">3. Running Mobicents</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#Running_the_Mobicents_Application_Server">3.1. Running the Mobicents Application Server</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#chapter-Working_with_the_Mobicents_Management_Console">4. Working with the Mobicents Management Console</a>
            </span>
          </dt>
          <dt>
            <span class="chapter">
              <a href="#chapter-Resource_Adapters">5. Resource Adapters</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#section-Deploying_and_Undeploying_Resource_Adapters">5.1. Deploying and Undeploying Resource Adapters</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files">5.1.1. Before You Begin: Resource Adapters and Deployable Unit Files</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Deploying_Resource_Adapters">5.1.2. Deploying Resource Adapters</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Undeploying_Resource_Adapters">5.1.3. Undeploying Resource Adapters</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-SIP_Resource_Adapter">5.2. SIP Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_JAIN_SIP_Resource_Adapter">5.2.1. Installing the JAIN SIP Resource Adapter</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Configuration_of_the_JAIN_SIP_Resource_Adapter">5.2.2. Configuration of the JAIN SIP Resource Adapter</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-End-to-End_SIP_Example">5.2.3. Example: End-to-End SIP</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Wake-Up_Call_Example">5.2.4. Example: Wake-Up Call</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Third-Party_Call_Control_Example">5.2.5. Example: Third-Party Call Control</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Back-to-Back_User_Agent_Example">5.2.6. Example: Back-to-Back User Agent</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-The_XMPP_and_Google_Talk_Resource_Adapter">5.3. The XMPP and Google Talk Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Google_Talk_Bot_Example">5.3.1. Example: Google Talk Bot</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-Asterisk_Resource_Adapter">5.4. Asterisk Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_Asterisk_Resource_Adapter">5.4.1. Installing the Asterisk Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-J2EE_and_CA_Resource_Adapter">5.5. J2EE and CA Resource Adapter</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Diameter_Resource_Adapter">5.6. Diameter Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_Diameter_Resource_Adapter">5.6.1. Installing the Diameter Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-Media_Resource_Adapter">5.7. Media Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_Media_Resource_Adapter">5.7.1. Installing the Media Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-SMPP_Resource_Adapter">5.8. SMPP Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_SMPP_Resource_Adapter">5.8.1. Installing the SMPP Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-Media_Gateway_Resource_Adapter">5.9. Media Gateway Resource Adapter</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-JCC_INAP_Resource_Adapter">5.10. JCC INAP Resource Adapter</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-HTTP_Servlet_Resource_Adapter">5.11. HTTP_Server Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_HTTP_Server_Resource_Adapter">5.11.1. Installing the HTTP Servlet Resource Adapter</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Understanding_the_HTTP_Servlet_Resource_Adapter">5.11.2. Understanding the HTTP Servlet Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-HTTP_Client_Resource_Adapter">5.12. The HTTP Client Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_HTTP_Client_Resource_Adapter">5.12.1. Installing the HTTP Client Resource Adapter</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Understanding_the_HTTP_Client_Resource_Adapter">5.12.2. Understanding the HTTP Client Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-Persistence_Resource_Adapter">5.13. Persistence Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_Persistence_Resource_Adapter">5.13.1. Installing the Persistence Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-XCAP_Client_Resource_Adapter">5.14. XCAP Client Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_XCAP_Client_Resource_Adapter">5.14.1. Installing the XCAP Client Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-Rules_Resource_Adapter">5.15. Rules Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_Rules_Resource_Adapter">5.15.1. Installing the Rules Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-TTS_Resource_Adapter">5.16. TTS Resource Adapter</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Installing_the_TTS_Resource_Adapter">5.16.1. Installing the TTS Resource Adapter</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-SAP_Resource_Adapter">5.17. SAP Resource Adapter</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Third-Party_Resource_Adapters">5.18. Third-Party Resource Adapters</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#chapter-Other_Examples">6. Other Examples</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#section-SLEE_Graph_Viewer_Example">6.1. Example: SLEE Graph Viewer</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Call_Blocking_and_Call_Forwarding_and_Voice_Mail_Example">6.2. Example: Call-Blocking, Call-Forwarding and Voice Mail</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Multi-Service_Example">6.3. Example: Multiple Services</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Parent-Child_Interaction_Example">6.4. Example: Parent-Child Interaction</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-LDAP-Enabled_JSLEE_Example">6.5. Example: LDAP-Enabled JSLEE</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#chapter-Mobicents_Servers_and_Services">7. Mobicents Servers and Services</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#section-Mobicents_SIP_Servlets">7.1. Mobicents SIP Servlets</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#section-Mobicents_Media_Server">7.2. Mobicents Media Server</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#section-Overview_of_the_Mobicents_Media_Server">7.2.1. Overview of the Mobicents Media Server</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Media_Server_Architecture">7.2.2. Media Server Architecture</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#section-Mobicents_SIP_Presence_Service">7.3. Mobicents SIP Presence Service</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#id401554">7.3.1. SIP Presence Server Architecture</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Mobicents_XML_Document_Management_Server">7.3.2. Mobicents XML Document Management Server</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Mobicents_Presence_Server">7.3.3. Mobicents Presence Server</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#section-Mobicents_Resource_List_Server">7.3.4. Mobicents Resource List Server</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="appendix">
              <a href="#Mobicents_User_Guide-Revision_History">A. Revision History</a>
            </span>
          </dt>
        </dl>
      </div>
      <div class="preface" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="Mobicents_User_Guide-Preface"></a>Preface</h2>
            </div>
          </div>
        </div>
        <p>
	</p>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="Document_Conventions"></a>1.Â Document Conventions</h2>
              </div>
            </div>
          </div>
          <p>
		Certain words in this manual are represented in different fonts, styles, and weights. This highlighting indicates that the word is part of a specific category. The categories include the following:
	</p>
          <div class="variablelist">
            <dl>
              <dt>
                <span class="term">
                  <code class="literal">Courier font</code>
                </span>
              </dt>
              <dd>
                <p>
					Courier font represents <code class="command">commands</code>, <code class="filename">file names and paths</code>, and <code class="prompt">prompts</code> .
				</p>
                <p>
					When shown as below, it indicates computer output: 
</p>
                <pre class="screen">
Desktop       about.html       logs      paulwesterberg.png
Mail          backupfiles      mail      reports
</pre>
                <p>
				</p>
              </dd>
              <dt>
                <span class="term">
                  <strong class="userinput">
                    <code>bold Courier font</code>
                  </strong>
                </span>
              </dt>
              <dd>
                <p>
					Bold Courier font represents text that you are to type, such as: <strong class="userinput"><code>service jonas start</code></strong>
				</p>
                <p>
					If you have to run a command as root, the root prompt (<code class="literal">#</code>) precedes the command:
				</p>
                <pre class="screen">
# <strong class="userinput"><code>gconftool-2 </code></strong>
</pre>
              </dd>
              <dt>
                <span class="term">
                  <em class="replaceable">
                    <code>italic Courier font</code>
                  </em>
                </span>
              </dt>
              <dd>
                <p>
					Italic Courier font represents a variable, such as an installation directory: <code class="filename"><em class="replaceable"><code>install_dir</code></em>/bin/</code>
				</p>
              </dd>
              <dt>
                <span class="term">
                  <span>
                    <strong class="application">bold font</strong>
                  </span>
                </span>
              </dt>
              <dd>
                <p>
					Bold font represents <span><strong class="application">application programs</strong></span> and <span><strong class="guilabel">text found on a graphical interface</strong></span>.
				</p>
                <p>
					When shown like this: <span><strong class="guibutton"> OK </strong></span>, it indicates a button on a graphical application interface.
				</p>
              </dd>
            </dl>
          </div>
          <p>
		Additionally, the manual uses different strategies to draw your attention to pieces of information. In order of how critical the information is to you, these items are marked as follows:
	</p>
          <div class="note">
            <h2>Note</h2>
            <p>
			A note is typically information that you need to understand the behavior of the system.
		</p>
          </div>
          <div class="tip">
            <h2>Tip</h2>
            <p>
			A tip is typically an alternative way of performing a task.
		</p>
          </div>
          <div class="important">
            <h2>Important</h2>
            <p>
			Important information is necessary, but possibly unexpected, such as a configuration change that will not persist after a reboot.
		</p>
          </div>
          <div class="caution">
            <h2>Caution</h2>
            <p>
			A caution indicates an act that would violate your support agreement, such as recompiling the kernel.
		</p>
          </div>
          <div class="warning">
            <h2>Warning</h2>
            <p>
			A warning indicates potential data loss, as may happen when tuning hardware for maximum performance.
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="We_Need_Feedback"></a>2.Â We Need Feedback!</h2>
              </div>
            </div>
          </div>
          <a id="id344233" class="indexterm"></a>
          <p>
		You should over ride this by creating your own local Feedback.xml file.
	</p>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="chapter-Introduction"></a>ChapterÂ 1.Â Introduction</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#section-Introduction_to_the_Mobicents_Converged_Application_Server">1.1. Introduction to the Mobicents Converged Application Server</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Service_Building_Blocks_and_Next-Generation_Intelligent_Networks">1.2. Service Building Blocks and Next-Generation Intelligent Networks</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Mobicents_Use_Cases">1.3. Mobicents Use Cases</a>
              </span>
            </dt>
          </dl>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Introduction_to_the_Mobicents_Converged_Application_Server"></a>1.1.Â Introduction to the Mobicents Converged Application Server</h2>
              </div>
            </div>
          </div>
          <p>
			The Mobicents Communication Platform is the best architecture for creating, deploying and managing services and applications integrating voice, video and data across a range of IP and communications networks. The Mobicents Communication Platform drives convergence by leveraging the following four core capabilities.
		</p>
          <div class="mediaobject" align="center">
            <a id="mediaobj-orig-mobicents-high-level-diagram.gif"></a>
            <img src="images/orig-mobicents-high-level-diagram.gif" align="middle" />
          </div>
          <div class="variablelist">
            <a id="varlist-Core_Capabilities_of_the_Mobicents_Converged_Application_Server"></a>
            <h6>Core Capabilities of the Mobicents Converged Application Server</h6>
            <dl>
              <dt>
                <span class="term">Mobicents JAIN-SLEE</span>
              </dt>
              <dd>
                <p>
						Mobicents JAIN-SLEE provides a highly-scalable event-driven application server with a robust component model and a fault-tolerant execution environment. Mobicents JAIN-SLEE is the first and only Open Source Platform certified for JSLEE 1.0 compliance. It complements J2EE to enable the convergence of voice, video and data in next-generation intelligent applications. Web and SIP can be combined together to achieve more sophisticated and natural user experience.
					</p>
              </dd>
              <dt>
                <span class="term">Mobicents Media Server</span>
              </dt>
              <dd>
                <p>
						The Mobicents Media Server is an open sourced server based on the Java Media Framework implementation, and aimed to:
					</p>
                <div class="itemizedlist">
                  <a id="itemlist-MMS_aims"></a>
                  <h6>Aims of the Mobicents Media Server</h6>
                  <ul>
                    <li>
                      <p>
								Deliver a competitive, complete, best-of-breed media gateway functionality of the highest quality.
							</p>
                    </li>
                    <li>
                      <p>
								Meet the demands of converged wireless, wireline, cable broadband access and fixed-mobile converged VoIP networks from a single media gateway platform.
							</p>
                    </li>
                    <li>
                      <p>
								Increase flexibility with a media gateway that supports a wide variety of call control protocols, and which scales down to meet the demands of enterprises and small carrier providers.
							</p>
                    </li>
                    <li>
                      <p>
								React quickly to dynamic market requirements.
							</p>
                    </li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term">Mobicents Presence (XDM) Server</span>
              </dt>
              <dd>
                <p>
						The first free and open source implementation of an XML Document Management (XDM) server, as defined in the Open Mobile Alliance (OMA) specifications. This functional element of next-generation IP communication networks is responsible for handling the management of users' XML documents stored on the network side, such as presence authorization rules, contact and group lists (also known as resource lists), static presence information, and much more.
					</p>
              </dd>
              <dt>
                <span class="term">The JBoss Microcontainer</span>
              </dt>
              <dd>
                <p>
						The JBoss Microcontainer is the state-of-the-art hosting environment in which higher-level containers reside. It provides service registration, configuration and dependency management, classloading isolation control, package versioning, deployment, thread pooling and many other fundamental building blocks necessary for highly-scalable, fault-tolerant middleware servers.
					</p>
              </dd>
            </dl>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Service_Building_Blocks_and_Next-Generation_Intelligent_Networks"></a>1.2.Â Service Building Blocks and Next-Generation Intelligent Networks</h2>
              </div>
            </div>
          </div>
          <p>
			In the scope of telecommunications' Next Generation Intelligent Networks (<acronym class="acronym">NGIN</acronym>s), Mobicents fits in as a high-performance core engine for Service Delivery Platforms (<acronym class="acronym">SDP</acronym>s) and IP Multimedia Subsystems (<acronym class="acronym">IMS</acronym>es).
		</p>
          <p>
			Mobicents enables the composition of Service Building Blocks (<acronym class="acronym">SBB</acronym>s) such as call control, billing, user-provisioning, administration, and presence-sensing features. The <acronym class="acronym">JAIN SLEE</acronym><sup>[<a id="def-jain" href="#ftn.def-jain">1</a>]</sup> specification allows popular protocol stacks such as <acronym class="acronym">SIP</acronym> to be plugged in as resource adapters. The <acronym class="acronym">SLEE</acronym> Service Building Blocks have many similarities to Enterprise Java Beans (<acronym class="acronym">EJB</acronym>s), and naturally accommodate integration with enterprise applications, the Web, Customer Relationship Management (<acronym class="acronym">CRM</acronym>) and Service-Oriented Architecture (<acronym class="acronym">SOA</acronym>) end points.
		</p>
          <p>
			Out-of-the-box monitoring and management of Mobicents components is achieved via <acronym class="acronym">SLEE</acronym> standard-based Java Management Extensions (<acronym class="acronym">JMXes</acronym>) and Simple Network Management Profile (<acronym class="acronym">SNMP</acronym>) interfaces.
		</p>
          <p>
			Beyond telecommunications, Mobicents is applicable to a wider variety of problems demanding high-volume, low-latency signaling. Examples include financial trading, online gaming, RFID sensor network integration, and distributed control.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Mobicents_Use_Cases"></a>1.3.Â Mobicents Use Cases</h2>
              </div>
            </div>
          </div>
          <p>
			The Mobicents Converged Application Server has a wide variety of use cases, including all of the following domains:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<a href="#VoIP_Call_Control_Services">VoIP Call Control Services</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#Instant_Messaging_Services">Instant Messaging Services</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#Online_Multi-Player_Games">Online Multi-Player Games</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#Financial_Day_Trading">Financial Day Trading</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#First_Responder_Communication_Networks">First Responder Communication Networks</a>
				</p>
              </li>
              <li>
                <p>
					<a href="#Sensor_network_integration_and_RFID">Sensor Network Integration and RFID</a>
				</p>
              </li>
            </ul>
          </div>
          <h5 class="formalpara"><a id="VoIP_Call_Control_Services"></a>VoIP Call Control Services</h5>
          <p class="formalpara">
				Voice-over-Internet Protocol (<acronym class="acronym">VoIP</acronym>) services are some of the primary use cases for Mobicents. Examples of VoIP services include call routing, forwarding, termination, voice mailbox, conferencing and user provisioning.
			</p>
          <h5 class="formalpara"><a id="Instant_Messaging_Services"></a>Instant Messaging Services</h5>
          <p class="formalpara">
			</p>
          <h5 class="formalpara"><a id="Online_Multi-Player_Games"></a>Online Multi-Player Games</h5>
          <p class="formalpara">
				SLEE is a great platform for Massively Multi-Player (<acronym class="acronym">MMP</acronym> games. The following are some of the principle requirements for <acronym class="acronym">MMP</acronym> servers, provided by the leader of <a href="https://games.dev.java.net/nonav/index.html">Java.net Games community</a>:
			</p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
					<span class="emphasis"><em>Worst-case</em></span> latencies from end-to-end in the back-end system, including all database operations, of no more than 100 ms.
				</p>
              </li>
              <li>
                <p>
					A programming model that allows the game programmer to program simple persistent objects, with no more work than any other standard Java object, and have them execute on data events coming into the system. These objects must be "real objects" in the simulation sense of the term.
				</p>
              </li>
              <li>
                <p>
					A programming model that is optimistically parallel while <span class="emphasis"><em>appearing</em></span> to the programmer as a single-threaded event-driven model. Each event has to be <acronym class="acronym">ACID-transactional</acronym> (Atomicity, Consistency, Isolation, Durability), and atomic unto itself. The programmer cannot be required to be aware in any way of multiple threads, database access, or locking. It must be inherently and transparently race-condition-proof and deadlock-proof.
				</p>
              </li>
              <li>
                <p>
					It must scale to massive numbers of simultaneous users (5-to-6 figures) online simultaneously accessing the same database of objects.
				</p>
              </li>
              <li>
                <p>
					It needs to provide failover, fault-tolerance and efficient load-balancing. The last is critical. Game applications are cost-sensitive. Without the ability to load-balance the potentially heavy loads of multiple apps over banks of low-cost computers used to maximal efficiency, the economic model falls apart.
				</p>
              </li>
            </ol>
          </div>
          <p>
			If you are familiar with SLEE, then you have already noticed that these requirements closely track the fundamental SLEE design principles.
		</p>
          <p>
			Here are some pointers to books, blogs and papers on the subject of Massive Multi-Player games:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					<a href="http://liquidnarrative.csc.ncsu.edu/pubs/phic.pdf">Internet-Based Games by R. Young</a>
				</p>
              </li>
              <li>
                <p>
					<a href="http://www.amazon.com/exec/obidos/tg/detail/-/1584502436/002-3357427-0961607?v=glance">Massively Multiplayer Game Development</a> by Thor Alexander
				</p>
              </li>
              <li>
                <p>
					<a href="http://hardcodedgames.com/mmpgamedev/">MMP Blog</a>
				</p>
              </li>
              <li>
                <p>
					<a href="http://www.ibr.cs.tu-bs.de/users/wellnitz/papers/misc/ims-netgames2004.pdf">A Mobile Gaming Platform for the IMS</a>
				</p>
              </li>
              <li>
                <p>
					<a href="http://forum.nokia.com.cn/doc/SIPpresentation(24workshopHK)-new.pdf">SIP based Game Server </a>
				</p>
              </li>
            </ul>
          </div>
          <h5 class="formalpara"><a id="Financial_Day_Trading"></a>Financial Day Trading</h5>
          <p class="formalpara">
				Financial trading is a well-understood problem domain demanding highly-available, fast-response technology to serve billions of trading calls per day. Each trading call is a concise message identifying the trader, ticker and price. Day trading applications fit nicely on top of event-driven containers.
			</p>
          <h5 class="formalpara"><a id="First_Responder_Communication_Networks"></a>First Responder Communication Networks</h5>
          <p class="formalpara">
				We live in an unsafe world. Project P25 is focused on public safety communications digital radio interoperability. It is spurred on by growing concern which has driven many countries' governmentsâincluding the US Federal Governmentâto reorganize in order to create focused positions to address homeland security. The National Institute of Standards and Technology (<acronym class="acronym">NIST</acronym>) is building a test system for Radio-Frequency subsystem interoperability Standard, which is based on these three protocols: the Session Initiation Protocol (<acronym class="acronym">SIP</acronym>), the Service Discovery Protocol (<acronym class="acronym">SDP</acronym>), and the Real-time Transport Protocol (<acronym class="acronym">RTP</acronym>). The reference implementation and test system will be built as SLEE services.
			</p>
          <h5 class="formalpara"><a id="Sensor_network_integration_and_RFID"></a>Sensor Network Integration and RFID</h5>
          <p class="formalpara">
				Gartner predicts that sensor technologies will be part of our everyday life by the year 2015. Sensors will be everywhere: as RFID tags on consumer products, devices monitoring tire pressure, location-tracking tags carried by workers in sensitive or hazardous environments, <abbr class="abbrev">etc.</abbr> In addition, all enterprise activities will be monitored using enterprise tools connected to the network; by 2010 these, as embedded Internet devices, will represent 95% of all Internet-connected systems.
			</p>
          <p>
			Pervasive sensor technologies will transform the objective of IT from providing support for fundamentally manual processes to automating the execution of tasks in response to a continuously-changing environment monitored by sensors. This requires a new kind of architecture capable of delivering <span class="emphasis"><em>extreme</em></span> transaction processing.
		</p>
        </div>
        <div class="footnotes">
          <br />
          <hr width="100" align="left" />
          <div class="footnote">
            <p><sup>[<a id="ftn.def-jain" href="#def-jain">1</a>] </sup>
				<acronym class="acronym">JAIN SLEE</acronym> stands for Java <acronym class="acronym">API</acronym> for Intelligent Network Service Logic and Execution Environment architecture. <acronym class="acronym">JSLEE</acronym> (Java Service Logic Execution Environment) is a short synonym for <acronym class="acronym">JAIN SLEE</acronym>.
			</p>
          </div>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="chapter-Installation"></a>ChapterÂ 2.Â Installation</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#section-Installing_the_Mobicents_Binary_Distribution">2.1. Installing the Mobicents Binary Distribution</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Building_the_Mobicents_1.2.x_Series">2.2. Building the Mobicents 1.2.x Series</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Installing_EclipSLEE">2.3. Installing EclipSLEE: The JAIN SLEE Eclipse Plugin</a>
              </span>
            </dt>
          </dl>
        </div>
        <p>
	</p>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Installing_the_Mobicents_Binary_Distribution"></a>2.1.Â Installing the Mobicents Binary Distribution</h2>
              </div>
            </div>
          </div>
          <p>
			The Mobicents Converged Application Server runs on top of the JBoss Application Server. The Mobicents 1.20 binary distribution comes bundled with the JBoss Application Server version 4.2.2 GA.
		</p>
          <p class="formalpara">
            <a id="fpara-Hardware_Requirements_for_the_Binary_Distribution"></a>
          </p>
          <h5 class="formalpara">Hardware Requirements for the Binary Distribution</h5>
          <p class="formalpara">
				Both the Mobicents Converged Application Server and the JBoss Application Server are 100% Java. Mobicents will run on the same hardware that the JBoss Application Server runs on.
			</p>
          <p class="formalpara">
            <a id="fpara-Pre-Install_Requirements_for_the_Binary_Distribution"></a>
          </p>
          <h5 class="formalpara">Pre-Install Requirements for the Binary Distribution</h5>
          <p class="formalpara">
				You should ensure a couple of things before downloading and installing the Mobicents binary release:
			</p>
          <div class="itemizedlist">
            <a id="itemlist-Binary_Distribution_Installation_Requirements"></a>
            <ul>
              <li>
                <p>
					You must have sufficient disk space in order to install the Mobicents binary release. Once unzipped, version 1.20 of the Mobicents binary release requires about 230 MB of free disk space. Keep in mind that disk space requirements may change from release to release.
				</p>
              </li>
              <li>
                <p>
					A working installation of Java 1.5 or higher is required in order to run Mobicents and the JBoss Application Server.
				</p>
              </li>
            </ul>
          </div>
          <h5 class="formalpara">Installing the Mobicents Binary</h5>
          <p class="formalpara">
				Once the preconditions and requirements have been met, you are ready to install the Mobicents binary distribution.
			</p>
          <div class="procedure">
            <a id="procedure-Downloading_and_Verifying_the_Mobicents_Distribution"></a>
            <ol class="1">
              <li>
                <p>
					First, Download the latest version of the Mobicents binary distribution. The latest version can be found by going to the <a href="https://sourceforge.net/projects/mobicents/">Mobicents project page on SourceForge.net</a>, clicking on <span class="emphasis"><em>Download Mobicents</em></span>, and then looking for <span class="emphasis"><em>Mobicents Server</em></span> and <span class="emphasis"><em>Latest Version</em></span>.
				</p>
              </li>
              <li>
                <p>
					Then verify the integrity of the zip file. Along with the zip file there is a sha1 file<sup>[<a id="id322037" href="#ftn.id322037">2</a>]</sup> which contains a checksum that can be used to verify the integrity of the zip file, and can alert you if the file has been changed since it was uploaded, or if it was corrupted upon download.
				</p>
                <p>
					On a Linux system you can use the <code class="command">sha1sum</code> command to verify the integrity of the binary distribution zip file.
				</p>
                <p>
					On a Windows system you will need to download a sha1sum-generating program such as the <code class="command">sha1sum.exe</code> program. This will generate a checksum that you can compare with the sum in the sha1 file.
				</p>
                <p>
					Note that if the two checksums are not identical, it means that the downloaded zip file was corrupted upon download, or has been changed since it was last uploaded to the server.
				</p>
              </li>
              <li>
                <p>
					Finally, install the Mobicents Converged Application Server. Unzip the Mobicents binary distribution zip file to the location where you want it, thus completing the install.
				</p>
              </li>
            </ol>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Building_the_Mobicents_1.2.x_Series"></a>2.2.Â Building the Mobicents 1.2.x Series</h2>
              </div>
            </div>
          </div>
          <p>
			Besides simply installing the latest binary Mobicents release, you can also build the Mobicents Converged Application Server from source. There are several reasons for building Mobicents from source, including getting access to new features such as the latest resource adapters, bundled servers and examples, getting full support for debugging, and accessing extra documentation.
		</p>
          <p>
			Note that building Mobicents from source requires a working installation of JBoss 4.2. This section on building Mobicents from source also includes the steps necessary for installing the JBoss 4.2.2 binary distribution.
		</p>
          <p class="formalpara">
            <a id="fpara-Hardware_Requirements_for_the_Source_Distribution"></a>
          </p>
          <h5 class="formalpara">Hardware Requirements for the Source Distribution</h5>
          <p class="formalpara">
				Both the Mobicents Converged Application Server and the JBoss Application Server are 100% Java. Mobicents will run on the same hardware that the JBoss Application Server runs on.
			</p>
          <p class="formalpara">
            <a id="fpara-Pre-Install_Requirements_for_the_Source_Distribution"></a>
          </p>
          <h5 class="formalpara">Pre-Install Requirements for the Source Distribution</h5>
          <p class="formalpara">
				You should ensure a few things before downloading and installing the JBoss binary distribution and the Mobicents source:
			</p>
          <div class="itemizedlist">
            <a id="itemlist-Source_Distribution_Installation_Requirements"></a>
            <ul>
              <li>
                <p>
					You must have sufficient disk space in order to install the Mobicents source as well as the JBoss binary distribution. The Mobicents source, once fetched from the development Subversion repository, will consume about 230 MB of disk space. In addition to this, the JBoss Application Server binary distribution requires approximately 140 MB, meaning that you should probably have <span class="emphasis"><em>at least</em></span> 400 MB of free disk space available. Keep in mind also that disk space requirements may change with subsequent updates to the development repository.
				</p>
              </li>
              <li>
                <p>
					A working installation of Java 1.5 or higher is required in order to run Mobicents and the JBoss Application Server.
				</p>
              </li>
              <li>
                <p>
					A way to download files. We will use the wget utility in the subsequent sections, but any common web browser will do.
				</p>
              </li>
              <li>
                <p>
					The Subversion version control system.
				</p>
              </li>
              <li>
                <p>
					The Apache Ant build tool. Mobicents includes this in its distribution, but we will need Ant in order to then build the Ant that comes bundled with the distribution.
				</p>
              </li>
            </ul>
          </div>
          <p class="formalpara">
            <a id="fpara-Downloading_and_Installing_the_Jboss_Binary_Distribution"></a>
          </p>
          <h5 class="formalpara">Downloading and Installing the Jboss Binary Distribution</h5>
          <p class="formalpara">
				Once the pre-install requirements have been met, you are ready to start. We will split the entire procedure, which isn't long but may take a while depending on the speed of your Internet connection, into two parts: in the first we will install JBoss; in the second, we will download and build Mobicents.
			</p>
          <div class="procedure">
            <a id="procedure-Downloading_and_Installing_JBoss"></a>
            <h6>ProcedureÂ 2.1.Â Downloading and Installing JBoss</h6>
            <ol class="1">
              <li>
                <p>
					First, move to the directory that you want to install JBoss into, and download the JBoss 4.2.2 General Availability (<acronym class="acronym">GA</acronym>) binary distribution <sup>[<a id="jboss_sourceforge_link" href="#ftn.jboss_sourceforge_link">3</a>]</sup>:
				</p>
                <pre class="screen">cd &lt;directory_to_install_jboss_into&gt;
wget http://surfnet.dl.sourceforge.net/sourceforge/jboss/jboss-4.2.2.GA.zip
</pre>
              </li>
              <li>
                <p>
					Next, assuming you want to install JBoss in the same directory you downloaded the zip file distribution to, unzip it:
				</p>
                <pre class="screen">unzip jboss-4.2.2.GA.zip
</pre>
              </li>
              <li>
                <p>
					Finally, we must set the <code class="envar">JBOSS_HOME</code> environment variable. The quick-and-easy way to set it for the current session, but which will not last beyond the next reboot, is to <code class="command">export</code> the variable on the command line, and then to <code class="command">echo</code> the variable to make sure that it contains the right directory. For example:
				</p>
                <pre class="screen">export JBOSS_HOME="${PWD}/jboss-4.2.2.GA"
echo $JBOSS_HOME
/home/my_name/jboss/jboss-4.2.2.GA
</pre>
                <p>
					If the <code class="command">echo</code> command doesn't produce any output, make sure that you are in the directory that you unzipped the JBoss binary distribution zip file to, and that the name of that directory is correct in the <code class="command">export</code> command (i.e., that the file name hasn't changed in some subtle way).
				</p>
                <p>
					Alternatively, you can set the <code class="envar">JBOSS_HOME</code> environment variable permanently in the startup file for your shell. If you are using the Bash shell, this would mean inserting the following line into your <code class="filename">~/.bashrc</code> file (and making sure that the pathname is absolute): 
</p>
                <pre class="screen">export JBOSS_HOME="&lt;unzip_directory&gt;/jboss-4.2.2.GA"
</pre>
                <p>
				</p>
              </li>
            </ol>
          </div>
          <p>
			Now that the JBoss Application Server has been successfully installed, we will download the source to the Mobicents Converged Application Server with Subversion, and build it.
		</p>
          <p class="formalpara">
            <a id="fpara-Downloading_the_Source_and_Building_Mobicents"></a>
          </p>
          <h5 class="formalpara">Downloading the Source and Building Mobicents</h5>
          <p class="formalpara">
			</p>
          <div class="procedure">
            <a id="procedure-Downloading_the_Source_and_Building_Mobicents"></a>
            <ol class="1">
              <li>
                <p>
					First, move to the directory that you want to install Mobicents into, create a directory named <code class="filename">mobicents</code> into which you'll install everything, and then use Subversion to get the latest sources:
				</p>
                <pre class="screen">cd &lt;directory_to_install_mobicents_source_into&gt;
mkdir mobicents
svn co http://mobicents.googlecode.com/svn/trunk mobicents
</pre>
              </li>
              <li>
                <p>
					Once Subversion has finished acquiring the latest revision of the sources, which may take a while, then we will then proceed to build Mobicents:
				</p>
                <pre class="screen">ant -f mobicents/core/build.xml
BUILD SUCCESSFUL
Total time: 6 seconds
</pre>
              </li>
            </ol>
          </div>
          <p>
			TBD: Close with a sentence and direct the reader with a ulink to the Running Mobicents (which was installed from source) chapter. Issues that need to be addressed in this chapter include: installing GWT 1.3, which only comes in source for x86 (not version 1.4) and then building the management console.This chapter will have to be expanded with those instructions.
		</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Installing_EclipSLEE"></a>2.3.Â Installing EclipSLEE: The JAIN SLEE Eclipse Plugin</h2>
              </div>
            </div>
          </div>
          <p>
			The Mobicents project's EclipSLEE Plugin for the Eclipse <acronym class="acronym">IDE</acronym> enables and facilitates working with Mobicents and JAIN SLEE. In particular, EclipSLEE is designed to help in the creation of the following <acronym class="acronym">JAIN SLEE</acronym> components:
		</p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
					Profile Specifications
				</p>
              </li>
              <li>
                <p>
					Events
				</p>
              </li>
              <li>
                <p>
					Service Building Blocks (<acronym class="acronym">SBB</acronym>s)
				</p>
              </li>
              <li>
                <p>
					Service XML Descriptors
				</p>
              </li>
              <li>
                <p>
					Deployable Units
				</p>
              </li>
            </ul>
          </div>
          <p>
			With the EclipSLEE plugin, developers can construct complete services quickly and easily. The plug-in takes care of ensuring that the XML descriptors are correct, as well as creating skeleton Java classes to which developers can add service logic.
		</p>
          <h5 class="formalpara">How to Install EclipSLEE Eclipse Plugin</h5>
          <p class="formalpara">
				EclipSLEE can be installed simply by adding the URL of the Update site. In Eclipse, click on <span><strong class="guimenu">Help</strong></span> â <span><strong class="guimenuitem">Software Updates</strong></span> â <span><strong class="guimenuitem">Find and Install...</strong></span>. The <code class="literal">Install/Update</code> dialog box will pop up. Choose the second option, <span><strong class="guimenuitem">Search for new features to install</strong></span>, and click next to be presented with the <code class="literal">Install</code> dialog. On the right-hand side, click the <span><strong class="guibutton">New Remote Site...</strong></span> button to be presented with the <code class="literal">New Update Site</code> dialog. For the Name field, enter <strong class="userinput"><code>EclipSLEE</code></strong>, and in the <code class="literal">URL</code> field, enter the URL of the remote site: <strong class="userinput"><code>http://people.redhat.com/vralev/eclipslee/update/</code></strong>. Press <span><strong class="guibutton">OK</strong></span> to return to the <code class="literal">Install</code> dialog. Check the just-added <code class="literal">EclipSLEE</code> site and click the <span><strong class="guibutton">Finish</strong></span> button. Eclipse will then prompt you to read and accept the license agreement, and will also ask you whether you want to install all components. After following the instructions of Eclipse's plugin install wizard, the EclipSLEE plugin will be downloaded and installed (usually to the shared Eclipse plugins directory, unless you have directed Eclipse to install to another location). Restarting Eclipse is required in order to initialize the EclipSLEE plugin so that it can be used.
			</p>
        </div>
        <div class="footnotes">
          <br />
          <hr width="100" align="left" />
          <div class="footnote">
            <p><sup>[<a id="ftn.id322037" href="#id322037">2</a>] </sup>
						For the Mobicents 1.20 binary release, the relevant file names are <code class="filename">mobicents-all-1_2_0_BETA1.zip</code> and <code class="filename">mobicents-all-1_2_0_BETA1.zip.sha1.asc</code>.
					</p>
          </div>
          <div class="footnote">
            <p><sup>[<a id="ftn.jboss_sourceforge_link" href="#jboss_sourceforge_link">3</a>] </sup>
						If the given direct link to JBoss 4.2.2 <acronym class="acronym">GA</acronym> doesn't work for you, try instead to find the binary JBoss distribution here, <a href="http://surfnet.dl.sourceforge.net/sourceforge/jboss/">http://surfnet.dl.sourceforge.net/sourceforge/jboss/</a>, or by searching for the project on <a href="http://sourceforge.net">Sourceforge.net</a>
					</p>
          </div>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="chapter-Running_Mobicents"></a>ChapterÂ 3.Â Running Mobicents</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#Running_the_Mobicents_Application_Server">3.1. Running the Mobicents Application Server</a>
              </span>
            </dt>
          </dl>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="Running_the_Mobicents_Application_Server"></a>3.1.Â Running the Mobicents Application Server</h2>
              </div>
            </div>
          </div>
          <p>
			Once installed, running Mobicents simply consists in changing to the <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/server/bin</code> directory and invoking <code class="command">run.sh</code> (Linux) or <code class="command">run.bat</code> (Windows) The precise instructions depend on which platform you are running Mobicents on.
		</p>
          <div class="variablelist">
            <h6>Platform Mobicents is Running On</h6>
            <dl>
              <dt>
                <span class="term">Linux</span>
              </dt>
              <dd>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
								Change your working directory to the <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/server/bin</code> directory:
							</p>
                      <pre class="screen">cd &lt;topmost_mobicents_directory&gt;/server/bin
</pre>
                    </li>
                    <li>
                      <p>
								Ensure that the <code class="filename">run.sh</code> file is executable. If it isn't, modify its permissions so that it is:
							</p>
                      <pre class="screen">chmod +x run.sh
</pre>
                    </li>
                    <li>
                      <p>
								Finally, start the Mobicents Application Server:.
							</p>
                      <pre class="screen">./run.sh
</pre>
                      <div class="note">
                        <h2>Note</h2>
                        <p>
									The above command is a shortened version of this equivalent command:
								</p>
                        <pre class="screen">./run.sh -c all -b 127.0.0.1
</pre>
                      </div>
                    </li>
                  </ol>
                </div>
              </dd>
              <dt>
                <span class="term">Windows</span>
              </dt>
              <dd>
                <div class="orderedlist">
                  <ol>
                    <li>
                      <p>
								Change your working directory to the <code class="filename"><em class="replaceable"><code>&lt;mobicents_folder&gt;</code></em>\server\bin</code> folder.
							</p>
                    </li>
                    <li>
                      <p>
								Start the Mobicents Application Server:
							</p>
                      <pre class="screen">run.bat
</pre>
                      <div class="note">
                        <h2>Note</h2>
                        <p>
									The above command is a shortened version of this equivalent command:
								</p>
                        <pre class="screen">run.bat -c all -b 127.0.0.1
</pre>
                      </div>
                    </li>
                  </ol>
                </div>
              </dd>
            </dl>
          </div>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="chapter-Working_with_the_Mobicents_Management_Console"></a>ChapterÂ 4.Â Working with the Mobicents Management Console</h2>
            </div>
          </div>
        </div>
        <p>
		Once Mobicents is running, you can access the management console by pointing your browser to <code class="systemitem"><a href="http://localhost:8080/management-console/">http://localhost:8080/management-console/</a></code>. If you are working with a remote machine, replace <strong class="userinput"><code>localhost</code></strong> with the name of the remote machine's host, and <strong class="userinput"><code>8080</code></strong> with the correct port.
	</p>
        <p>
		The management console screen has the following components:
	</p>
        <div class="itemizedlist">
          <ul>
            <li>
              <p>
				The <code class="literal">Main Menu</code>, on the left.
			</p>
            </li>
            <li>
              <p>
				The <code class="literal">Current View</code>, on the right.
			</p>
            </li>
            <li>
              <p>
				The <code class="literal">Log Console</code>, on the bottom.
			</p>
            </li>
          </ul>
        </div>
        <div class="figure">
          <a id="ss-mmc-initial_view.png"></a>
          <div class="figure-contents">
            <div class="mediaobject" align="center">
              <img src="images/ss-mmc-initial_view.png" align="middle" alt="The Mobicents Management Console, initial view" />
            </div>
          </div>
          <h6>FigureÂ 4.1.Â The Mobicents Management Console, initial view</h6>
        </div>
        <br class="figure-break" />
        <p>
		New views my be selected by clicking on the <code class="literal">Main Menu</code> items. The <code class="literal">Log Console</code> displays important and relevant notifications when operations are executed, such as error and status messages.
	</p>
        <p>
		The initial management console view, which can also be accessed by clicking on <code class="literal">SLEE</code> at the top of the <code class="literal">Main Menu</code>, displays a status message indicating whether Mobicents is currently running or not, and provides controls to start, stop, and shut down the Mobicents Converged Application Server.
	</p>
        <h5 class="formalpara">
          <code class="literal">Deployable Units</code>
        </h5>
        <p class="formalpara">
			This view can be selected by clicking on <code class="literal">Deployable Units</code> from the Main Menu, and shows a list of all deployable units that can be deployed with the Mobicents Converged Application Server.
		</p>
        <div class="figure">
          <a id="figure-ss-mmc-deployable_units.png"></a>
          <div class="figure-contents">
            <div class="mediaobject" align="center">
              <img src="images/ss-mmc-deployable_units.png" align="middle" alt="The Deployable Units view" />
            </div>
          </div>
          <h6>FigureÂ 4.2.Â The <code class="literal">Deployable Units</code> view</h6>
        </div>
        <br class="figure-break" />
        <p>
		A tab bar at the top of the view allows one to browse, search for, and install deployable units.
	</p>
        <h5 class="formalpara">
          <code class="literal">Components</code>
        </h5>
        <p class="formalpara">
			The next view on the Main Menu is the <code class="literal">Components</code> view, which displays a list of component types, such as services, <acronym class="acronym">SBB</acronym>s, resource adapters, <abbr class="abbrev">etc.</abbr>, and their current count. Clicking on a component type will cause the management console to show a list of components for that type. From there, you can click on the different components to see their details.
		</p>
        <div class="figure">
          <a id="figure-ss-mmc-components.png"></a>
          <div class="figure-contents">
            <div class="mediaobject" align="center">
              <img src="images/ss-mmc-components.png" align="middle" alt="The Compenents view" />
            </div>
          </div>
          <h6>FigureÂ 4.3.Â The <code class="literal">Compenents</code> view</h6>
        </div>
        <br class="figure-break" />
        <h5 class="formalpara">
          <code class="literal">Services</code>
        </h5>
        <p class="formalpara">
			The <code class="literal">Services</code> view naturally shows the list of available services, their state, whether <code class="literal">ACTIVE</code> or <code class="literal">INACTIVE</code>, and all currently possible actions for that resource adapter, such as <code class="literal">activate</code>, <code class="literal">deactivate</code> or <code class="literal">remove</code>.
		</p>
        <div class="figure">
          <a id="figure-ss-mmc-services.png"></a>
          <div class="figure-contents">
            <div class="mediaobject" align="center">
              <img src="images/ss-mmc-services.png" align="middle" alt="The Services view" />
            </div>
          </div>
          <h6>FigureÂ 4.4.Â The <code class="literal">Services</code> view</h6>
        </div>
        <br class="figure-break" />
        <p>
		The tab bar at the top of the <code class="literal">Services</code> view also allows you to control the usage parameters of services.
	</p>
        <h5 class="formalpara">
          <code class="literal">Resource Adapters</code>
        </h5>
        <p class="formalpara">
			Choosing <code class="literal">Resources</code> from the <code class="literal">Main Menu</code> will put the currently-deployed resource adapters in view. There, you can see their name, type, vendor and version. Clicking on one of the resource adapters will provide further information such as the name of the deployable unit, its state, whether <code class="literal">ACTIVE</code> or <code class="literal">INACTIVE</code>, and the currenty possible actions for specific services, such as activating, deactivating, or removing them.
		</p>
        <div class="figure">
          <a id="figure-ss-mmc-resources.png"></a>
          <div class="figure-contents">
            <div class="mediaobject" align="center">
              <img src="images/ss-mmc-resources.png" align="middle" alt="The Resources view" />
            </div>
          </div>
          <h6>FigureÂ 4.5.Â The <code class="literal">Resources</code> view</h6>
        </div>
        <br class="figure-break" />
        <h5 class="formalpara">
          <code class="literal">Activity Contexts</code>
        </h5>
        <p class="formalpara">
			The Activity Contexts view can be displayed by clicking on <code class="literal">Activities</code> from the <code class="literal">Main Menu</code>, and shows the current activity contexts. The <code class="literal">TTL</code> field shows how much time the activity can remain idle before being marked for garbage collection.
		</p>
        <div class="figure">
          <a id="figure-ss-mmc-activities.png"></a>
          <div class="figure-contents">
            <div class="mediaobject" align="center">
              <img src="images/ss-mmc-activities.png" align="middle" alt="The Activities view" />
            </div>
          </div>
          <h6>FigureÂ 4.6.Â The <code class="literal">Activities</code> view</h6>
        </div>
        <br class="figure-break" />
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="chapter-Resource_Adapters"></a>ChapterÂ 5.Â Resource Adapters</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#section-Deploying_and_Undeploying_Resource_Adapters">5.1. Deploying and Undeploying Resource Adapters</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files">5.1.1. Before You Begin: Resource Adapters and Deployable Unit Files</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Deploying_Resource_Adapters">5.1.2. Deploying Resource Adapters</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Undeploying_Resource_Adapters">5.1.3. Undeploying Resource Adapters</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-SIP_Resource_Adapter">5.2. SIP Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_JAIN_SIP_Resource_Adapter">5.2.1. Installing the JAIN SIP Resource Adapter</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Configuration_of_the_JAIN_SIP_Resource_Adapter">5.2.2. Configuration of the JAIN SIP Resource Adapter</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-End-to-End_SIP_Example">5.2.3. Example: End-to-End SIP</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Wake-Up_Call_Example">5.2.4. Example: Wake-Up Call</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Third-Party_Call_Control_Example">5.2.5. Example: Third-Party Call Control</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Back-to-Back_User_Agent_Example">5.2.6. Example: Back-to-Back User Agent</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-The_XMPP_and_Google_Talk_Resource_Adapter">5.3. The XMPP and Google Talk Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Google_Talk_Bot_Example">5.3.1. Example: Google Talk Bot</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-Asterisk_Resource_Adapter">5.4. Asterisk Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_Asterisk_Resource_Adapter">5.4.1. Installing the Asterisk Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-J2EE_and_CA_Resource_Adapter">5.5. J2EE and CA Resource Adapter</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Diameter_Resource_Adapter">5.6. Diameter Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_Diameter_Resource_Adapter">5.6.1. Installing the Diameter Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-Media_Resource_Adapter">5.7. Media Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_Media_Resource_Adapter">5.7.1. Installing the Media Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-SMPP_Resource_Adapter">5.8. SMPP Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_SMPP_Resource_Adapter">5.8.1. Installing the SMPP Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-Media_Gateway_Resource_Adapter">5.9. Media Gateway Resource Adapter</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-JCC_INAP_Resource_Adapter">5.10. JCC INAP Resource Adapter</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-HTTP_Servlet_Resource_Adapter">5.11. HTTP_Server Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_HTTP_Server_Resource_Adapter">5.11.1. Installing the HTTP Servlet Resource Adapter</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Understanding_the_HTTP_Servlet_Resource_Adapter">5.11.2. Understanding the HTTP Servlet Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-HTTP_Client_Resource_Adapter">5.12. The HTTP Client Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_HTTP_Client_Resource_Adapter">5.12.1. Installing the HTTP Client Resource Adapter</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Understanding_the_HTTP_Client_Resource_Adapter">5.12.2. Understanding the HTTP Client Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-Persistence_Resource_Adapter">5.13. Persistence Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_Persistence_Resource_Adapter">5.13.1. Installing the Persistence Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-XCAP_Client_Resource_Adapter">5.14. XCAP Client Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_XCAP_Client_Resource_Adapter">5.14.1. Installing the XCAP Client Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-Rules_Resource_Adapter">5.15. Rules Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_Rules_Resource_Adapter">5.15.1. Installing the Rules Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-TTS_Resource_Adapter">5.16. TTS Resource Adapter</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Installing_the_TTS_Resource_Adapter">5.16.1. Installing the TTS Resource Adapter</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-SAP_Resource_Adapter">5.17. SAP Resource Adapter</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Third-Party_Resource_Adapters">5.18. Third-Party Resource Adapters</a>
              </span>
            </dt>
          </dl>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Deploying_and_Undeploying_Resource_Adapters"></a>5.1.Â Deploying and Undeploying Resource Adapters</h2>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files"></a>5.1.1.Â Before You Begin: Resource Adapters and Deployable Unit Files</h3>
                </div>
              </div>
            </div>
            <p>
			Resource adapters are JAIN SLEE components that can be deployed (i.e. â<span class="quote">loaded</span>â or â<span class="quote">installed</span>â) into the Mobicents Converged Application Server, and undeployed (â<span class="quote">uninstalled</span>â) from it. At the file level, resource adapters consist of specially-named files called deployable unit files. Two of these deployable unit files must be loaded/installed before the Mobicents Converged Application Server will deploy the resource adapter. The next few sections will teach you how to locate where resource adapters and their files live, and how to deploy them and undeploy them through several different, though equivalent ways: via the command line; by copying the correct files to a special directory, or removing them from it; or with the Mobicents Management Console.
		</p>
            <p>
			Which of these various ways of accomplishing the same task is easier depends on you. If you are comfortable with the command line, or like to script behavior, then deploying via the command line will probably be the preferred way for you. If you would prefer to simply copy or delete some files with the file manager, you can do it that way. And for those who prefer graphical user interfaces (<acronym class="acronym">GUI</acronym>s), the Management Console provides an interface to the Mobicents Converged Application Server, and can easily be used to accomplish such tasks both locally and remotely. Note that if you are running Mobicents on the Windows platform, then you will want to deploy resource adapters by either copying files or using the Management Console. However, no matter which method you eventually choose, it will be necessary to read the following explanatory paragraphs, on where to find the directories corresponding to the resource adapters you want to install, and on how to recognize deployable unit files, and on the correct order in which to install the deployable unit files, before reading any or all of the method sections.
		</p>
            <p class="formalpara">
              <a id="fpara-Where_to_Find_Resource_Adapters_in_the_Mobicents_Installation"></a>
            </p>
            <h5 class="formalpara">Where to Find Resource Adapters in the Mobicents Installation</h5>
            <p class="formalpara">
				The files belonging to resource adapters, and which you will need to access in order to deploy and undeploy them, are located in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code>. It is trivial to figure out which directory in <code class="filename">resources</code> corresponds to the resource adapter that you wish to deploy or undeploy. For example, the <code class="filename">sipra</code> directory holds the files necessary for running the <acronym class="acronym">SIP</acronym> resource adapter, and the <code class="filename">xmppra</code> directory holds the <acronym class="acronym">XMPP</acronym> and Google Talk resource adapter.
			</p>
            <p class="formalpara">
              <a id="fpara-How_to_Recognize_Deployable_Unit_Files"></a>
            </p>
            <h5 class="formalpara">How to Recognize Deployable Unit Files</h5>
            <p class="formalpara">
				Deployable unit files are <acronym class="acronym">JAR</acronym> (Java ARchive) files. There are two deployable unit files in each resource adapter's directory. The following two patterns describe the file names:
			</p>
            <div class="variablelist">
              <a id="varlist-Deployable_Unit_File_Name_Conventions"></a>
              <h6>Deployable Unit File Name Conventions</h6>
              <dl>
                <dt>
                  <span class="term">
                    <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ra-DU.jar</code>
                  </span>
                </dt>
                <dd>
                  <p>
						...where <span class="emphasis"><em>ra</em></span> stands for â<span class="quote">resource adapter</span>â, and <span class="emphasis"><em>DU</em></span> stands for "Deployable Unit (file). For example, if we want to deploy the <acronym class="acronym">SIP</acronym> resource adapter, and we are located in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources/sipra</code>, then this deployable unit file will be named <code class="filename">sip-ra-DU.jar</code>.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ratype-DU.jar</code>
                  </span>
                </dt>
                <dd>
                  <p>
						...where <span class="emphasis"><em>ratype</em></span> stands intuitively for â<span class="quote">resource adapter type</span>â, and <span class="emphasis"><em>DU</em></span> again for â<span class="quote">Deployable Unit (file)</span>â. The file name for the â<span class="quote">ratype</span>â deployable unit file for the <acronym class="acronym">SIP</acronym> resource adapter is therefore <code class="filename">sip-ratype-DU.jar</code>.
					</p>
                </dd>
              </dl>
            </div>
            <p class="formalpara">
              <a id="fpara-How_to_Determine_the_Correct_Order_for_Installing_Deployable_Unit_Files"></a>
            </p>
            <h5 class="formalpara">How to Determine the Correct Order for Installing Deployable Unit Files</h5>
            <p class="formalpara">
				Deployable unit files must be installed in a certain order, starting with the <span class="emphasis"><em>ratype</em></span> deployable unit file, whose file name has the form: <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ratype-DU.jar</code>.
			</p>
            <p>
			The second (and last) deployable unit file you must install is the <span class="emphasis"><em>ra</em></span> file: <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ra-DU.jar</code>.
		</p>
            <p>
			For example, if you wanted to deploy the SIP resource adapter, then you would want to first install the deployable unit file named <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ratype-DU.jar</code>, followed by the <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ra-DU.jar</code> file.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Deploying_Resource_Adapters"></a>5.1.2.Â Deploying Resource Adapters</h3>
                </div>
              </div>
            </div>
            <div class="note">
              <h2>Note</h2>
              <p>
				The introductory section titled <a href="#section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files" title="5.1.1.Â Before You Begin: Resource Adapters and Deployable Unit Files">SectionÂ 5.1.1, âBefore You Begin: Resource Adapters and Deployable Unit Filesâ</a> should be read before proceeding to one of the following sections.
			</p>
            </div>
            <p>
			<a href="#section-Deploying_Resource_Adapters_Via_the_Command_Line" title="5.1.2.1.Â Deploying Resource Adapters Via the Command Line">SectionÂ 5.1.2.1, âDeploying Resource Adapters Via the Command Lineâ</a>
		</p>
            <p>
			<a href="#section-Deploying_Resource_Adapters_By_Copying_Deployable_Unit_Files" title="5.1.2.2.Â Deploying Resource Adapters By Copying Deployable Unit Files">SectionÂ 5.1.2.2, âDeploying Resource Adapters By Copying Deployable Unit Filesâ</a>
		</p>
            <p>
			<a href="#section-Deploying_Resource_Adapters_With_the_Management_Console" title="5.1.2.3.Â Deploying Resource Adapters With the Management Console">SectionÂ 5.1.2.3, âDeploying Resource Adapters With the Management Consoleâ</a>
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Deploying_Resource_Adapters_Via_the_Command_Line"></a>5.1.2.1.Â Deploying Resource Adapters Via the Command Line</h4>
                  </div>
                </div>
              </div>
              <p>
				Resource adapters can be deployed by simply issuing an ant task command from the topmost Mobicents directory. Make sure that the Mobicents Converged Application Server has been started, and then change to the topmost directory:
			</p>
              <pre class="screen">cd &lt;topmost_mobicents_directory&gt;
</pre>
              <p>
				Run the ant build-and-deploy script, remembering to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the correct directory name (refer to <a href="#fpara-Where_to_Find_Resource_Adapters_in_the_Mobicents_Installation" title="Where to Find Resource Adapters in the Mobicents Installation">Where to Find Resource Adapters in the Mobicents Installation</a> if you are unsure):
			</p>
              <pre class="screen">tools/ant/bin/ant -f resources/&lt;resource_adapter&gt;/build.xml ra-deploy
</pre>
              <p>
				For example, the directory name in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the JAIN SIP resource adapter is (currently) named <code class="filename">sipra</code> ("SIP Resource Adapter"). To deploy the SIP resource adapter, therefore, you would issue the following command:
			</p>
              <pre class="screen">tools/ant/bin/ant -f resources/sipra/build.xml ra-deploy
</pre>
              <p>
				If the resource adapter builds successfully, then a message similar to the following will be written to standard output:
			</p>
              <pre class="screen">ra-activate:

ra-deploy:

BUILD SUCCESSFUL
Total time: 5 seconds
</pre>
              <p>
				To undeploy a resource adapter via the command line, refer to <a href="#section-Undeploying_Resource_Adapters_Via_the_Command_Line" title="5.1.3.1.Â Undeploying Resource Adapters Via the Command Line">SectionÂ 5.1.3.1, âUndeploying Resource Adapters Via the Command Lineâ</a>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Deploying_Resource_Adapters_By_Copying_Deployable_Unit_Files"></a>5.1.2.2.Â Deploying Resource Adapters By Copying Deployable Unit Files</h4>
                  </div>
                </div>
              </div>
              <p>
				It is essential to have read the previous sections on locating resource adapter directories, recognizing deployable unit files, and determining the correct order for installing the files, before continuing. See <a href="#section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files" title="5.1.1.Â Before You Begin: Resource Adapters and Deployable Unit Files">SectionÂ 5.1.1, âBefore You Begin: Resource Adapters and Deployable Unit Filesâ</a>.
			</p>
              <p>
				You can deploy resource adapters by simply copying deployable unit files to a special directory with your file manager, or by doing the same via the command line. These instructions assume that you are using the file manager. You can also copy the two necessary files simultaneously, or one-after-the-other in the correct order, which is the way we will do it.
			</p>
              <div class="warning">
                <h2>Warning</h2>
                <p>
					Make sure that you <span class="emphasis"><em>copy</em></span> the deployable unit files, instead of <span class="emphasis"><em>moving</em></span> them. If you accidentally move them, then make sure you copy them back to the correct resource adapter directory where they came from. If you accidentally move them and then delete them, you will probably have to reinstall Mobicents, so be careful to copy instead of move!
				</p>
              </div>
              <p>
				Open your file manager and move to the directory corresponding to the resource adapter you want to deploy. Find the <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ratype-DU.jar</code> file and copy it.
			</p>
              <div class="figure">
                <a id="figure-ss-deployable_units-selecting_the_ratype_dependency.png"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <img src="images/ss-deployable_units-selecting_the_ratype_dependency.png" align="middle" alt="Locating and Copying the First Deployable Unit File" />
                    <div class="caption">
                      <p>
						Copying the first deployable unit file, the ratype file, in order to deploy the SIP resource adatper.
					</p>
                    </div>
                  </div>
                </div>
                <h6>FigureÂ 5.1.Â Locating and Copying the First Deployable Unit File</h6>
              </div>
              <br class="figure-break" />
              <div class="mediaobject" align="center">
                <a id="mediaobj-ss-deployable_units-selecting_the_ratype_dependency.png"></a>
                <img src="images/ss-deployable_units-selecting_the_ratype_dependency.png" align="middle" />
                <div class="caption">
                  <p>
					Copying the first deployable unit file, the ratype file, in order to deploy the SIP resource adatper.
				</p>
                </div>
              </div>
              <p>
				Where you will paste it to depends on whether you installed the Mobicents binary release, or built Mobicents from source. If you installed the binary version, then the correct directory to copy the files into is <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/server/server/default/deploy</code> (remembering that the bundled JBoss installation that comes with the binary Mobicents release is located in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/server/server/default</code>; you are actually copying the file into JBoss's <code class="filename">deploy</code> directory). If, on the other hand, you installed Mobicents and JBoss separately and set the <code class="envar">JBOSS_HOME</code> environment variable, then the correct directory to copy the file to is <code class="filename"><code class="envar">$JBOSS_HOME</code>/deploy</code>.
			</p>
              <p>
				After copying the <span class="emphasis"><em>ratype</em></span> deployable unit file, Mobicents will send a message like the following to standard output, indicating that the file was successfully installed.
			</p>
              <pre class="screen">19:59:03,651 INFO  [RaTypeDeployer] Added RA Type with id ResourceAdaptorTypeID[JAIN SIP#javax.sip#1.2]
19:59:03,683 INFO  [STDOUT] 19:59:03,682 INFO  [DeploymentMBeanImpl] Deployable unit with URL file:/home/silas/Desktop/temp/apps/mobicents/mobicents-all-1_2_0_BETA2/server/server/default/deploy/sip-ratype-DU.jar deployed as DeployableUnitID[0]
</pre>
              <p>
				After successfully copying the <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ratype-DU.jar</code> file, proceed to copy the <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ra-DU.jar</code> file to the same directory. Copying the <span class="emphasis"><em>ra</em></span> file (after the <span class="emphasis"><em>ratype</em></span> file, of course) will lead to successful installation of the resource adapter, and the Mobicents Converged Application Server will output information similar to the following to standard output:
			</p>
              <pre class="screen">19:59:59,940 INFO  [STDOUT] 19:59:59,940 INFO  [ResourceManagementMBeanImpl] Activated RA Entity SipRA
20:00:00,191 INFO  [STDOUT] 20:00:00,190 INFO  [ResourceManagementMBeanImpl] Created Link between RA Entity SipRA and Name SipRA
</pre>
              <p>
				The easier way is simply to select and copy both deployable unit files and paste them simultaneously into <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/server/server/default/deploy</code> (or <code class="filename"><code class="envar">$JBOSS_HOME</code>/deploy</code> if you installed JBoss separately). When you do it that way, Mobicents can figure out in which order it should install the files.
			</p>
              <p>
				To undeploy a resource adapter by removing or deleting deployable unit files, refer to <a href="#section-Undeploying_Resource_Adapters_By_Removing_Files" title="5.1.3.2.Â Undeploying Resource Adapters By Removing Files">SectionÂ 5.1.3.2, âUndeploying Resource Adapters By Removing Filesâ</a>.
			</p>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Deploying_Resource_Adapters_With_the_Management_Console"></a>5.1.2.3.Â Deploying Resource Adapters With the Management Console</h4>
                  </div>
                </div>
              </div>
              <p>
				The Mobicents Management Console provides a graphical way to deploy and undeploy resource adapters. This section requires that you are familiar with the Management Console; for an introduction to the Console, refer first to <a href="#chapter-Working_with_the_Mobicents_Management_Console" title="ChapterÂ 4.Â Working with the Mobicents Management Console">ChapterÂ 4, <i>Working with the Mobicents Management Console</i></a>.
			</p>
              <div class="important">
                <h2>Important</h2>
                <p>
					The following instructions also assume that you have already read introductory sections on locating resource adapter directories, recognizing deployable unit files, and determining their correct order for installation. It is essential to read those sections before attempting to deploy a resource adapter with the Management Console. See <a href="#section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files" title="5.1.1.Â Before You Begin: Resource Adapters and Deployable Unit Files">SectionÂ 5.1.1, âBefore You Begin: Resource Adapters and Deployable Unit Filesâ</a>
				</p>
              </div>
              <p>
				Once the Mobicents Converged Application Server is running, point your browser to <code class="systemitem"><a href="http://localhost:8080/management-console/">http://localhost:8080/management-console/</a></code> to open the Management Console. Click on <span><strong class="guimenuitem">Deployable Units</strong></span> in the Main Menu; this will open the <span><strong class="guilabel">Deployable Units</strong></span> main view, where you will see a list of currently-deployed units under the <span><strong class="guimenuitem">Browse</strong></span> tab, which will read <code class="literal">No deployable unit found</code> at first. Two other tabs provide the possibility of searching for and installing deployable units. Click on the <span><strong class="guimenuitem">Install</strong></span> tab, and you will see a <span><strong class="guilabel">Package file:</strong></span> prompt and a text-entry field in which the name of the deployable unit file you want to install will be listed. 
			</p>
              <div class="figure">
                <a id="figure-ss-deployable_units-install.png"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <img src="images/ss-deployable_units-install.png" align="middle" alt="The Install tab of the Deployable Units view in the Management Console" />
                  </div>
                </div>
                <h6>FigureÂ 5.2.Â The Install tab of the Deployable Units view in the Management Console</h6>
              </div>
              <br class="figure-break" />
              <p>
				Before continuing, make sure that you know which deployable unit file to install first by reading the section titled <a href="#fpara-How_to_Determine_the_Correct_Order_for_Installing_Deployable_Unit_Files" title="How to Determine the Correct Order for Installing Deployable Unit Files">How to Determine the Correct Order for Installing Deployable Unit Files</a>.
			</p>
              <p>
				Once armed with this knowledge, click the <span><strong class="guibutton">Browse</strong></span> button to find and install the first deployable unit file, whose file name will appear in the text entry field, and then click the <span><strong class="guibutton">Install</strong></span> button. Then install the second deployable unit file. If you install the files in the incorrect order, a message similar to the following will appear in the <span><strong class="guilabel">Log Console</strong></span> at the bottom of the Management Console main view:
			</p>
              <pre class="screen">[ERROR] javax.slee.management.DeploymentException: Could not deploy: No DeployableUniDeploymentDescriptor descriptor (META-INF/deployable-unit.xml) was found in deployable...
</pre>
              <p>
				If you receive this error message, try installing the other deployable unit file first. Installing the right files in the correct order will lead to <code class="computeroutput">[INFO] Deployable unit installed</code> messages in the <span><strong class="guilabel">Log Console</strong></span>.
			</p>
              <p>
				If you see the name of the resource adapter you wanted to install listed in the <span><strong class="guimenuitem">Resources</strong></span> view of the Management Console, then that resource adapter has been successfully deployed.
			</p>
              <div class="figure">
                <a id="figure-ss-deployable_units-installation_success.png"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <img src="images/ss-deployable_units-installation_success.png" align="middle" alt="Successful Deployment of the SIP Resource Adapter with the Mobicents Management Console" />
                  </div>
                </div>
                <h6>FigureÂ 5.3.Â Successful Deployment of the SIP Resource Adapter with the Mobicents Management Console</h6>
              </div>
              <br class="figure-break" />
              <p>
				To undeploy a resource adapter with the Management Console, refer to <a href="#section-Undeploying_Resource_Adapters_With_the_Management_Console" title="5.1.3.3.Â Undeploying Resource Adapters With the Management Console">SectionÂ 5.1.3.3, âUndeploying Resource Adapters With the Management Consoleâ</a>.
			</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Undeploying_Resource_Adapters"></a>5.1.3.Â Undeploying Resource Adapters</h3>
                </div>
              </div>
            </div>
            <div class="note">
              <h2>Note</h2>
              <p>
				The introductory section titled <a href="#section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files" title="5.1.1.Â Before You Begin: Resource Adapters and Deployable Unit Files">SectionÂ 5.1.1, âBefore You Begin: Resource Adapters and Deployable Unit Filesâ</a> should be read before proceeding to one of the following sections.
			</p>
            </div>
            <p>
			<a href="#section-Undeploying_Resource_Adapters_Via_the_Command_Line" title="5.1.3.1.Â Undeploying Resource Adapters Via the Command Line">SectionÂ 5.1.3.1, âUndeploying Resource Adapters Via the Command Lineâ</a>
		</p>
            <p>
			<a href="#section-Undeploying_Resource_Adapters_By_Removing_Files" title="5.1.3.2.Â Undeploying Resource Adapters By Removing Files">SectionÂ 5.1.3.2, âUndeploying Resource Adapters By Removing Filesâ</a>
		</p>
            <p>
			<a href="#section-Undeploying_Resource_Adapters_With_the_Management_Console" title="5.1.3.3.Â Undeploying Resource Adapters With the Management Console">SectionÂ 5.1.3.3, âUndeploying Resource Adapters With the Management Consoleâ</a>
		</p>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Undeploying_Resource_Adapters_Via_the_Command_Line"></a>5.1.3.1.Â Undeploying Resource Adapters Via the Command Line</h4>
                  </div>
                </div>
              </div>
              <p>
				It is as easy to undeploy resource adapters via the command line as it is to deploy them that way: by simply issuing an ant task command from the topmost Mobicents directory, after the Mobicents Converged Application Server has been started, of course.
			</p>
              <pre class="screen">cd &lt;topmost_mobicents_directory&gt;
</pre>
              <p>
				You will run the same ant script that you ran to build and deploy the resource adapter, but note that the last argument has changed from <code class="option">ra-deploy</code> to <code class="option">ra-undeploy</code>:
			</p>
              <pre class="screen">tools/ant/bin/ant -f resources/&lt;resource_adapter&gt;/build.xml ra-undeploy
</pre>
              <p>
				For example, to undeploy the SIP resource adapter you would issue the following command:
			</p>
              <pre class="screen">tools/ant/bin/ant -f resources/sipra/build.xml ra-undeploy
</pre>
              <p>
				Upon success, a message similar to the following will be written to standard output:
			</p>
              <pre class="screen">ra-uninstall:
     [echo] Uninstalling SipRA.
[slee-management] Apr 8, 2008 8:49:12 PM org.mobicents.ant.tasks.UninstallTask run
[slee-management] INFO: No response
[slee-management] Apr 8, 2008 8:49:12 PM org.mobicents.ant.tasks.UninstallTask run
[slee-management] INFO: No response

ra-undeploy:

BUILD SUCCESSFUL
Total time: 2 seconds
</pre>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Undeploying_Resource_Adapters_By_Removing_Files"></a>5.1.3.2.Â Undeploying Resource Adapters By Removing Files</h4>
                  </div>
                </div>
              </div>
              <p>
				If you deployed a resource adapter by copying the deployable unit files from the resource adapter's directory to the <code class="filename"><em class="replaceable"><code>&lt;topmost_jboss_directory&gt;</code></em>/deploy</code> directory<sup>[<a id="id378304" href="#ftn.id378304">4</a>]</sup>, then you can undeploy that same resource adapter merely by removing the two deployable unit files from the <code class="filename">deploy</code> directory. In the file manager or on the command line, simply go to <code class="filename"><em class="replaceable"><code>&lt;topmost_jboss_directory&gt;</code></em>/deploy</code> and either move the correct two deployable unit files out of it, or delete both of them from it.
			</p>
              <div class="warning">
                <a id="warning-Dont_Delete_if_You_Didnt_Copy"></a>
                <h2>Don't Delete if You Didn't Copy!</h2>
                <p>
					If you choose to delete the two deployable unit files, <span class="emphasis"><em>make sure</em></span> that you indeed <span class="emphasis"><em>copied</em></span> them into the <code class="filename">deploy</code> directory, and that they both still exist in the directory of the resource adapter you want to undeploy!
				</p>
              </div>
              <p>
				Successfully removing or deleting both files from the <code class="filename">deploy</code> directory will result in a long string of messages sent to standard output, and ending with a line similar to: <code class="computeroutput">17:48:10,705 INFO [STDOUT] 17:48:10,705 INFO [DeploymentMBeanImpl] Uninstalled DU with id DeployableUnitID[6]</code>. It is also possible to simply remove or delete only the <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ra-DU.jar</code> file and have Mobicents undeploy the resource adapter, but it is recommended to always remove or delete both files.
			</p>
              <div class="note">
                <a id="note-Leaving_Resource_Adapters_Deployed"></a>
                <h2>Leaving Resource Adapters Deployed</h2>
                <p>
					One convenient way to have the Mobicents Converged Application Server deploy the correct resource adapters every time you start the server is to leave the deployable unit files in the <code class="filename"><em class="replaceable"><code>&lt;topmost_jboss_directory&gt;</code></em>/deploy</code> directory. Upon startup, Mobicents will notice that the two files are still there, and will automatically deploy the resource adapter.
				</p>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Undeploying_Resource_Adapters_With_the_Management_Console"></a>5.1.3.3.Â Undeploying Resource Adapters With the Management Console</h4>
                  </div>
                </div>
              </div>
              <p>
				If you are looking to undeploy a resource adapter with the Management Console, then it is assumed that you have first read <a href="#section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files" title="5.1.1.Â Before You Begin: Resource Adapters and Deployable Unit Files">SectionÂ 5.1.1, âBefore You Begin: Resource Adapters and Deployable Unit Filesâ</a> and <a href="#section-Deploying_Resource_Adapters_With_the_Management_Console" title="5.1.2.3.Â Deploying Resource Adapters With the Management Console">SectionÂ 5.1.2.3, âDeploying Resource Adapters With the Management Consoleâ</a>.
			</p>
              <p>
				You can undeploy resource adapters from the <span><strong class="guilabel">Deployable Units</strong></span> view in the Management Console by uninstalling the two deployable unit files. Click on <span><strong class="guimenuitem">Deployable Units</strong></span> from the Main Menu, and then make sure that the <span><strong class="guimenuitem">Browse</strong></span> tab is selected at the top of the view. You will see a list of deployable unit files for the currently-installed resource adapters.
			</p>
              <div class="figure">
                <a id="figure-Uninstalling_Deployable_Unit_Files_with_the_Management_Console"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <img src="images/ss-deployable_units-uninstalling.png" align="middle" alt="Uninstalling Deployable Unit Files with the Management Console" />
                    <div class="caption">
                      <p>
						The Browse tab of the Deployable Units view shows all deployable unit files for all resource adapters that are currently deployed
					</p>
                    </div>
                  </div>
                </div>
                <h6>FigureÂ 5.4.Â Uninstalling Deployable Unit Files with the Management Console</h6>
              </div>
              <br class="figure-break" />
              <p>
				Find the deployable unit file that corresponds to the <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ra-DU.jar</code> pattern, and click on the <span><strong class="guilabel">Uninstall</strong></span> link in the <span><strong class="guilabel">Actions</strong></span> column. This will uninstall the file, and a message similar to <code class="computeroutput">[INFO] Deployable unit sip-ra-DU uninstalled</code> will appear in the <span><strong class="guilabel">Console Log</strong></span> below. After uninstalling the <span class="emphasis"><em>ra</em></span> file, then uninstall the <code class="filename"><em class="replaceable"><code>&lt;resource_adapter_abbreviation&gt;</code></em>-ratype-DU.jar</code> file, which will print a success message like the previous one to the <span><strong class="guilabel">Console Log</strong></span>.
			</p>
              <p>
				If you try to uninstall the <span class="emphasis"><em>ratype</em></span> deployable unit file before the <span class="emphasis"><em>ra</em></span> file, then you will receive a message similar to the following one, alerting you to the mistake: <code class="computeroutput">[ERROR] javax.slee.management.ManagementException: Exception removing deployable Unit</code>.
			</p>
            </div>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-SIP_Resource_Adapter"></a>5.2.Â SIP Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p class="formalpara">
            <a id="fpara-Introduction_to_the_SIP_Resource_Adapter"></a>
          </p>
          <h5 class="formalpara">Introduction to the SIP Resource Adapter</h5>
          <p class="formalpara">
			The Mobicents <acronym class="acronym">SIP</acronym> resource adapter is a Mobicents sub-project that aims to create a high-performance <acronym class="acronym">SLEE </acronym> extenson for the Session Iniation Protocol (<acronym class="acronym">SIP</acronym>).
		</p>
          <p>
		The most recent version of the <acronym class="acronym">SIP</acronym> resource adapter includes several enhancements which allow for more convenient development of <acronym class="acronym">SIP</acronym> resources for a wide range of applications. The type name of this latest version is <code class="literal">JSIP v1.2</code>, the type vendor is <code class="literal">net.java.slee.sip</code>, and the type version is <code class="literal">1.2</code>.
	</p>
          <p class="formalpara">
            <a id="fpara-The_JAIN_SIP_Resource_Adapter_Version_1.1"></a>
          </p>
          <h5 class="formalpara">The JAIN SIP Resource Adapter Version 1.1</h5>
          <p class="formalpara">
			In Java Specification Request 22 (JSR-22), this resource adapter type name is denoted as <code class="literal">JAIN SIP</code>, and the type vendor as <code class="literal">javax.sip</code>. This resource adapter type version is 1.1. Mobicents provides a fully-compliant implementation of this specification.
		</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_JAIN_SIP_Resource_Adapter"></a>5.2.1.Â Installing the JAIN SIP Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			To install the JAIN SIP Resource Adapter, you must first acquire the latest version. Navigate to the <a href="https://sourceforge.net/projects/mobicents">Mobicents Sourceforge project page</a> and click on the <span class="emphasis"><em>Download Mobicents</em></span> link. On the next page, click on the <span class="emphasis"><em>SLEE SIP RA</em></span> link so that it expands to reveal the necessary <acronym class="acronym">JAR</acronym> file, which you can click to download<sup>[<a id="sip_ra_filename" href="#ftn.sip_ra_filename">5</a>]</sup> As of the time of this writing, the latest version was <span class="emphasis"><em>1.2 RC1 - core rc2</em></span>.
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Configuration_of_the_JAIN_SIP_Resource_Adapter"></a>5.2.2.Â Configuration of the JAIN SIP Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			Currently, the <acronym class="acronym">JAIN</acronym><acronym class="acronym">SIP</acronym> resource adapter can be configured in three different ways.
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					<a href="#fpara-Configuring_the_SIP_RA_Via_the_Provisioning_Mechanism" title="Configuring the SIP RA Via the Provisioning Mechanism">Via the provisioning mechanism</a>, by altering the <code class="filename">resource-adaptor.xml</code> configuration file.
				</p>
                </li>
                <li>
                  <p>
					â<span class="quote">Via properites file jared with classes ( atleast to configure port and ip, it still is place to put gov.nist properties to configure other stack props)</span>â
				</p>
                  <p>
					Baranowb: is this deprecated? You wrote: â<span class="quote">Properties also can be present in properties file present in ra/src/org/mobicents/slee/resources/sip/ diretory. It will be packed to jar with all classes, and wil be used to configure RA and stack(however its deprecated!!!).</span>â
				</p>
                </li>
                <li>
                  <p>
					<a href="#fpara-Configuring_the_SIP_RA_Via_Passing_Properties_to_an_MBean" title="Configuring the SIP RA Via Passing Properties to an MBean">Via properties passed to the MBean which created the Resource Adapter Entity</a>
				</p>
                </li>
              </ul>
            </div>
            <p class="formalpara">
              <a id="fpara-Configuring_the_SIP_RA_Via_the_Provisioning_Mechanism"></a>
            </p>
            <h5 class="formalpara">Configuring the SIP RA Via the Provisioning Mechanism</h5>
            <p class="formalpara">
			</p>
            <p>
			You can set provisioned properties in the <code class="filename">resource-adaptor.xml</code> file, which is located in <code class="filename">resources/sipra/ra/xml/</code> [TBD: this directory does not exist in the binary installation: exactly which files should we be modifying?].
		</p>
            <p>
			Provided here are explanations of the various property values which you can set. All of the following configuration entries, which are <code class="literal">&lt;config-property&gt;</code> elements in the XML file, should be unordered children of their parent <code class="literal">&lt;resource-adapter&gt;</code> element <sup>[<a id="footnote-resource-adaptor.xml" href="#ftn.footnote-resource-adaptor.xml">6</a>]</sup>
		</p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">dialogIdleTimeTimeout</span>
                </dt>
                <dd>
                  <p>
						This configuration property sets the timeout on dialogs, in milliseconds. After this amount of time, if the dialog hasn't received any requests or responses, and didn't send any, it is considered to be a â<span class="quote">dead end</span>â and is terminated.
					</p>
                  <a id="proglist-dialogIdleTimeTimeout"></a>
                  <pre class="XML">
&lt;config-property&gt;
	&lt;description&gt;uS after which dialog if it has not received/send any message is considered to be dead and is expunged&lt;/description&gt;
	&lt;config-property-name&gt;dialogIdleTimeTimeout&lt;/config-property-name&gt;
	&lt;config-property-type&gt;java.lang.Long&lt;/config-property-type&gt;
	&lt;config-property-value&gt;360000&lt;/config-property-value&gt;
&lt;/config-property&gt;
</pre>
                </dd>
                <dt>
                  <span class="term">cancelWait</span>
                </dt>
                <dd>
                  <p>
						This configuration property sets the amount of time, in milleseconds, between receiving a <code class="literal">CANCEL</code> and triggering logic to handle it.
					</p>
                  <a id="proglist-cancelWait"></a>
                  <pre class="XML">
&lt;config-property&gt;
	&lt;description&gt;uS after CANCEL event is going to be fired into SLEE. This atleast gives Sbbs chance to see INVITE and respond, rather than receiving INVITE in on Tx that is in terminated state.&lt;/description&gt;
	&lt;config-property-name&gt;cancelWait&lt;/config-property-name&gt;
	&lt;config-property-type&gt;java.lang.Long&lt;/config-property-type&gt;
	&lt;config-property-value&gt;1000&lt;/config-property-value&gt;
&lt;/config-property&gt;
</pre>
                </dd>
                <dt>
                  <span class="term">port</span>
                </dt>
                <dd>
                  <p>
						This configuration property sets the port number on which the underlying <acronym class="acronym">SIP</acronym> stack will listen.
					</p>
                  <a id="proglist-port"></a>
                  <pre class="XML">
&lt;config-property&gt;
	&lt;config-property-name&gt;port&lt;/config-property-name&gt;
	&lt;config-property-type&gt;java.lang.Integer&lt;/config-property-type&gt;
	&lt;config-property-value&gt;5060&lt;/config-property-value&gt;
&lt;/config-property&gt;
</pre>
                </dd>
                <dt>
                  <span class="term">ip</span>
                </dt>
                <dd>
                  <p>
						This configuration property sets the <acronym class="acronym">IP</acronym> address of the underlying stack. If it is set to <code class="varname">null</code>, then the <acronym class="acronym">SIP</acronym> resource adapter will use the binding address of the container as its <acronym class="acronym">IP</acronym> address.
					</p>
                  <a id="proglist-ip"></a>
                  <pre class="XML">
&lt;config-property&gt;
	&lt;description&gt;IP to which SIP RAs stack should attach - if "null" it will cause RA to pick up Container bind address address&lt;/description&gt;
	&lt;config-property-name&gt;ip&lt;/config-property-name&gt;
	&lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
	&lt;config-property-value&gt;null&lt;/config-property-value&gt;
&lt;/config-property&gt;
</pre>
                </dd>
                <dt>
                  <span class="term">transports</span>
                </dt>
                <dd>
                  <p>
						This configuration property sets the transports to be used by the stack. It is a string.
					</p>
                  <a id="proglist-transports"></a>
                  <pre class="XML">
&lt;config-property&gt;
	&lt;description&gt;List of transports, separated with ","&lt;/description&gt;
	&lt;config-property-name&gt;transports&lt;/config-property-name&gt;
	&lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
	&lt;config-property-value&gt;UDP&lt;/config-property-value&gt;
&lt;/config-property&gt;
</pre>
                </dd>
              </dl>
            </div>
            <p class="formalpara">
              <a id="fpara-Configuring_the_SIP_RA_Via_Passing_Properties_to_an_MBean"></a>
            </p>
            <h5 class="formalpara">Configuring the SIP RA Via Passing Properties to an MBean</h5>
            <p class="formalpara">
			</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-End-to-End_SIP_Example"></a>5.2.3.Â Example: End-to-End SIP</h3>
                </div>
              </div>
            </div>
            <p>
	</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Wake-Up_Call_Example"></a>5.2.4.Â Example: Wake-Up Call</h3>
                </div>
              </div>
            </div>
            <p>
	</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Third-Party_Call_Control_Example"></a>5.2.5.Â Example: Third-Party Call Control</h3>
                </div>
              </div>
            </div>
            <p>
	</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Back-to-Back_User_Agent_Example"></a>5.2.6.Â Example: Back-to-Back User Agent</h3>
                </div>
              </div>
            </div>
            <p>
	</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-The_XMPP_and_Google_Talk_Resource_Adapter"></a>5.3.Â The XMPP and Google Talk Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Google_Talk_Bot_Example"></a>5.3.1.Â Example: Google Talk Bot</h3>
                </div>
              </div>
            </div>
            <p>
	</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Asterisk_Resource_Adapter"></a>5.4.Â Asterisk Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_Asterisk_Resource_Adapter"></a>5.4.1.Â Installing the Asterisk Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The Asterisk resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the Asterisk resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>asteriskra</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-J2EE_and_CA_Resource_Adapter"></a>5.5.Â J2EE and CA Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Diameter_Resource_Adapter"></a>5.6.Â Diameter Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_Diameter_Resource_Adapter"></a>5.6.1.Â Installing the Diameter Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The Diameter resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the Diameter resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>diameterra</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Media_Resource_Adapter"></a>5.7.Â Media Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_Media_Resource_Adapter"></a>5.7.1.Â Installing the Media Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The Media resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the Media resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>media-ra</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-SMPP_Resource_Adapter"></a>5.8.Â SMPP Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_SMPP_Resource_Adapter"></a>5.8.1.Â Installing the SMPP Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The SMPP resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the SMPP resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>smppra</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Media_Gateway_Resource_Adapter"></a>5.9.Â Media Gateway Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-JCC_INAP_Resource_Adapter"></a>5.10.Â JCC INAP Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-HTTP_Servlet_Resource_Adapter"></a>5.11.Â HTTP_Server Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_HTTP_Server_Resource_Adapter"></a>5.11.1.Â Installing the HTTP Servlet Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The HTTP Servlet resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the HTTP Servlet resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>http-servlet-ra</code></em></code>, but this could change in the future).
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Understanding_the_HTTP_Servlet_Resource_Adapter"></a>5.11.2.Â Understanding the HTTP Servlet Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			A servlet is used to extend the capabilities of servers which host accesses to applications via a request-response programming model. Although servlets can respond to any type of request, they are commonly used to extend the applications hosted by web servers. The aim of the HTTP Servlet resource adapter is to provide the ease of same request-response programming model in the Service Logic Execution Environment (SLEE). The HTTP resource adapter is not a replacement for a servlet but is supposed to work in close proximity with servlets to smooth the integration between web applications hosted in the web server and applications developed using Service Building Blocks (SBBs) hosted in the SLEE Server.
		</p>
            <div class="figure">
              <a id="figure-orig-http-servlet-ratype.png"></a>
              <div class="figure-contents">
                <div class="mediaobject" align="center">
                  <a id="mediaobj-orig-http-servlet-ratype.png"></a>
                  <img src="images/orig-http-servlet-ratype.png" align="middle" alt="The Class Diagram for the HTTP Servlet Resource Adapter" />
                  <div class="caption">
                    <p>
					HttpSessionActivity is the only activity involved in the HTTP Servlet resource adapter
				</p>
                  </div>
                </div>
              </div>
              <h6>FigureÂ 5.5.Â The Class Diagram for the HTTP Servlet Resource Adapter</h6>
            </div>
            <br class="figure-break" />
            <p>
			<code class="literal">HttpSessionActivity</code> represents the <code class="literal">HttpSession</code> created from the incoming <code class="literal">javax.servlet.http.HttpServletRequest</code> received by <code class="literal">HttpServletRaServlet</code>, which in turn passes it on to HttpServletResourceEntryPoint.
		</p>
            <p>
			<code class="literal">HttpServletResourceEntryPoint</code> is the link between the servlet and HttpServletResourceAdaptor. <code class="literal">HttpServletResourceAdaptor</code> fires the appropriate event like <code class="literal">GET</code>, <code class="literal">POST</code>, <code class="literal">PUT</code>, <code class="literal">DELETE</code>, etc., depending on the method of <code class="literal">HttpServletRequest</code>, and the service interested in these events will receive it as initial event. The service will use the HttpServletRequestEvent passed as an argument to an <code class="varname">on<em class="replaceable"><code>something</code></em></code> event method to get an <code class="literal">HttpServletResponse</code> object. A service can add content to the response, modify headers etc. Calling the <code class="function">flushBuffer()</code> function on an <code class="literal">HttpServletResponse</code> will flush the buffer and the response will be committed.
		</p>
            <p>
			The service can explicitly end the <code class="literal">HttpSessionActivity</code> by calling the <code class="function">invalidate()</code> function on HttpSession. Calling <code class="function">invalidate()</code> will invoke the <code class="function">sessionDestroyed()</code> method of <code class="literal">HttpServletRaSessionListener</code> by the web container. Within the <code class="function">sessionDestroyed()</code> method, the resource adapter's <code class="function">endHttpSessionActivity()</code> is called to end the activity. If <code class="literal">HttpSession</code> times out, then it is the responsibility of the container to invoke the <code class="function">sessionDestroyed()</code> function and the above steps in order to end activity.
		</p>
            <p>
			<code class="literal">HttpServletResourceAdaptor</code> uses the <code class="function">request.getPathInfo()</code> function to form the web address used to fire the Event:
		</p>
            <pre class="programlisting">//PathInfo can be an empty string and the creation of Address will throw exception
//for empty String hence hardcoding prefix /mobicents
String pathInfo = "/mobicents" + request.getPathInfo();

Address address = new Address(AddressPlan.URI, pathInfo);
sleeEndpoint.fireEvent(ah, event, eventID, address);
</pre>
            <p>
			SBBs which are interested in events emmitted by <code class="literal">HttpServletResourceAdaptor</code> should use 
</p>
            <pre class="programlisting">&lt;initial-event-select variable="Address" /&gt;
</pre>
            <p>
			 for calculating the convergence name, this way we can make sure that URL's submitted to HttpServletResourceAdaptor are mapped to convergence names
		</p>
            <p>
			For example:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					The URL <code class="literal">URL http://localhost:8080/mobicents/x/y</code> maps to the convergence name <code class="literal">/mobicents/x/y</code>.
				</p>
                </li>
                <li>
                  <p>
					URL <code class="literal">http://localhost:8080/mobicents/sum/dum</code> maps to the convergence name <code class="literal">/mobicents/sum/dum</code>.
				</p>
                </li>
              </ul>
            </div>
            <h5 class="formalpara">A Service Building Block Example</h5>
            <p class="formalpara">
				An SBB can be inetersted in any of the HTTP Methods <code class="literal">OPTIONS</code>, <code class="literal">GET</code>, <code class="literal">HEAD</code>, <code class="literal">POST</code>, <code class="literal">PUT</code>, <code class="literal">DELETE</code>, <code class="literal">TRACE</code>, and for each <code class="literal">HttpMethod</code>, the resource adapter fires a corresponding event.
			</p>
            <p>
			The following code is an example of Service Building Block code:
		</p>
            <pre class="programlisting">public void onPost(HttpServletRequestEvent event,
            ActivityContextInterface aci) {
        try {

            HttpServletResponse response = event.getResponse();
            PrintWriter w = response.getWriter();
            w.print("onPost OK! Served by SBB = " + getSbbId());
            w.flush();
            response.flushBuffer();
            log
                    .info("HttpServletRAExampleSbb: POST Request received and OK! response sent.");
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    public void onGet(HttpServletRequestEvent event,
            ActivityContextInterface aci) {
        .....
        .....

    }

    public void onHead(HttpServletRequestEvent event,
            ActivityContextInterface aci) {
        // The HEAD method is identical to GET except that the server MUST NOT
        // return a message-body in the response.
        log.info("HttpServletRAExampleSbb: HEAD Request received.");

    }

    public void onPut(HttpServletRequestEvent event,
            ActivityContextInterface aci) {
        ...........

    }

    public void onDelete(HttpServletRequestEvent event,
            ActivityContextInterface aci) {
           .............

    }

    public void onOptions(HttpServletRequestEvent event,
            ActivityContextInterface aci) {
               .............
    }

    public void onTrace(HttpServletRequestEvent event,
            ActivityContextInterface aci) {
               ..............
    }
</pre>
            <div class="example">
              <a id="example-sbb-jar.xml"></a>
              <div class="example-contents">
                <a id="proglist-sbb-jar.xml"></a>
                <pre class="XML">sbb-jar.xml

&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;sbb-jar&gt;
    &lt;sbb&gt;
        &lt;description/&gt;
        &lt;sbb-name&gt;HttpServletRAExampleSBB&lt;/sbb-name&gt;
        &lt;sbb-vendor&gt;org.mobicents&lt;/sbb-vendor&gt;
        &lt;sbb-version&gt;1.0&lt;/sbb-version&gt;        
        &lt;sbb-classes&gt;
            &lt;sbb-abstract-class&gt;
                &lt;sbb-abstract-class-name&gt;org.mobicents.slee.service.httpservletra.example.HttpServletRAExampleSbb&lt;/sbb-abstract-class-name&gt;       
                &lt;/sbb-abstract-class&gt;
        &lt;/sbb-classes&gt;
       
        &lt;event initial-event="True" event-direction="Receive"&gt;
            &lt;event-name&gt;Post&lt;/event-name&gt;
            &lt;event-type-ref&gt;
                &lt;event-type-name&gt;net.java.slee.resource.http.events.incoming.POST&lt;/event-type-name&gt;
                &lt;event-type-vendor&gt;net.java.slee&lt;/event-type-vendor&gt;
                &lt;event-type-version&gt;1.0&lt;/event-type-version&gt;
            &lt;/event-type-ref&gt;
            &lt;initial-event-select variable="Address" /&gt;
        &lt;/event&gt;
        
        
        &lt;event initial-event="True" event-direction="Receive"&gt;
            &lt;event-name&gt;Get&lt;/event-name&gt;
            ..................
        &lt;/event&gt;

    .....
       ....
     &lt;event-name&gt;Head&lt;/event-name&gt;
    ...
    &lt;event-name&gt;Put&lt;/event-name&gt;
    .....
     ....
 
        &lt;resource-adaptor-type-binding&gt;
            &lt;resource-adaptor-type-ref&gt;
                &lt;resource-adaptor-type-name&gt;HttpServletResourceAdaptorType&lt;/resource-adaptor-type-name&gt;
                &lt;resource-adaptor-type-vendor&gt;org.mobicents&lt;/resource-adaptor-type-vendor&gt;
                &lt;resource-adaptor-type-version&gt;1.0&lt;/resource-adaptor-type-version&gt;
            &lt;/resource-adaptor-type-ref&gt;
            &lt;activity-context-interface-factory-name&gt;
                slee/resources/http-servlet-ra/http-servlet-ra-acif
            &lt;/activity-context-interface-factory-name&gt;
            &lt;resource-adaptor-entity-binding&gt;
                &lt;resource-adaptor-object-name&gt;slee/resources/http-servlet-ra/org.mobicents/1.0.00/http-servlet-ra/factoryprovider&lt;/resource-adaptor-object-name&gt;
                &lt;resource-adaptor-entity-link&gt;HttpServletRA&lt;/resource-adaptor-entity-link&gt;
            &lt;/resource-adaptor-entity-binding&gt;
        &lt;/resource-adaptor-type-binding&gt;
              
    &lt;/sbb&gt;
&lt;/sbb-jar&gt;
</pre>
              </div>
              <h6>ExampleÂ 5.1.Â A sample sbb-jar.xml configuration file</h6>
            </div>
            <br class="example-break" />
            <p>
			In order to deploy the HTTP Servlet resource adapter, execute 'ant build-and-deploy-ra' from mobicents/ra/http-servlet-ra folder. Make sure to set the MOBICENTS_HOME and JBOSS_HOME.
		</p>
            <p>
			TBD: is this correct? Format and ensure the correctness of these last 2-3 paragraphs
		</p>
            <p>
			To execute the test-case, follow the steps in mobicents/ra/http-servlet-ra/tests/build.xml
		</p>
            <p>
			There is a working example httpservletra-example to demonstarte the usage of http-servlet-ra. Follow the link to download example https://mobicents-examples.dev.java.net/source/browse/mobicents-examples/httpservletra-example/ and read instructions README.txt to deploy the example
		</p>
            <p>
			Note: Http Servlet RA is only for processing incoming HttpServletRequest and sending back the HttpServletResponse. If there is a need to create the Request from within the service make use of Http Client RA.
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-HTTP_Client_Resource_Adapter"></a>5.12.Â The HTTP Client Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_HTTP_Client_Resource_Adapter"></a>5.12.1.Â Installing the HTTP Client Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The HTTP Client resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the HTTP Client resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>http-client-ra</code></em></code>, but this could change in the future).
		</p>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Understanding_the_HTTP_Client_Resource_Adapter"></a>5.12.2.Â Understanding the HTTP Client Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The Hypertext Transfer Protocol (HTTP) is probably the most significant protocol used on the Internet today. Web services, network-enabled appliances and the growth of network computing continue to expand the role of the HTTP protocol beyond user-driven web browsers, while increasing the number of applications that require HTTP support. Applications developed using the Service Logic Execution Environment fall into this category. The Jakarta Commons <code class="literal">HttpClient</code> component provides an efficient, up-to-date, and feature-rich package implementing the client side of the most recent HTTP standards and recommendations. The HTTP Client resource adapter provides the client-side HTTP standard within the SLEE execution environment using the popular Apache Commons HTTP Client library.
		</p>
            <p>
			A Service Building Block (SBB) can use the HTTP Client resource adapter to make a request and get the response either synchronously or asynchronously.
		</p>
            <div class="figure">
              <a id="id417748"></a>
              <div class="figure-contents">
                <div class="mediaobject" align="center">
                  <a id="mediaobj-orig-http-client-ra.png"></a>
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                    <tr>
                      <td align="center">
                        <img src="images/orig-http-client-ra.png" align="middle" width="700" alt="The Class Diagram for the HTTP Client Resource Adapter" />
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
              <h6>FigureÂ 5.6.Â The Class Diagram for the HTTP Client Resource Adapter</h6>
            </div>
            <br class="figure-break" />
            <div class="variablelist">
              <a id="varlist-HTTP_Client_Resource_Adapter_Methods"></a>
              <h6>HTTP Client Resource Adapter Methods</h6>
              <dl>
                <dt>
                  <span class="term">HttpClientResourceAdaptorSbbInterface</span>
                </dt>
                <dd>
                  <p>
						Provides the SBB with the interface to interact with the HTTP Client resource adapter. <code class="function">HttpClientResourceAdaptorSbbInterface</code> is a wrapper over <code class="literal">org.apache.commons.httpclient.HttpClient</code> and exposes the most commonly-used methods of <code class="literal">HttpClient</code>.
					</p>
                  <h5 class="formalpara">
                    <code class="function">createHttpMethod(String method, String uri)</code>
                  </h5>
                  <p class="formalpara">
							<code class="literal">HttpClientResourceAdaptorSbbInterface</code> is used by the SBB to generate the GET, POST, HEAD (etc.) requests (HttpMethod) by calling this method. The URI can be any external URI.
						</p>
                  <h5 class="formalpara">
                    <code class="function">public void executeMethod(HttpMethod method)</code>
                  </h5>
                  <p class="formalpara">
							Calling this method will send the request synchronously and the calling application can then process the <code class="function">HttpMethod</code> to get the response.
						</p>
                  <h5 class="formalpara">
                    <code class="function">public HttpClientActivity createHttpClientActivity()</code>
                  </h5>
                  <p class="formalpara">
							Creates an instance of <code class="literal">HttpClientActivity</code> for a service that wants to send the request asynchronously. By default the value for <code class="literal">endOnReceivingResponse</code> is set to false, and the service has to explicitly end activity.
						</p>
                  <h5 class="formalpara">
                    <code class="function">public HttpClientActivity createHttpClientActivity(boolean endOn&gt;&gt;&gt;ReceivingResponse)</code>
                  </h5>
                  <p class="formalpara">
							Same method as above, with the only difference being that the service can pass <code class="literal">endOnReceivingResponse</code> as true, which means the activity ends as soon as the resource adapter executes the method and emits a <code class="literal">ResponseEvent</code>.
						</p>
                </dd>
                <dt>
                  <span class="term">Methods Inherited from <code class="literal">HttpClient</code></span>
                </dt>
                <dd>
                  <h5 class="formalpara">public HttpClientParams getParams()</h5>
                  <p class="formalpara">
							The HTTP protocol parameters associated with this <code class="literal"> HttpClient</code>.
						</p>
                  <h5 class="formalpara">public HttpClientParams getState()</h5>
                  <p class="formalpara">
							The HTTP state associated with the <code class="literal">HttpClient</code>.
						</p>
                  <h5 class="formalpara">public void setParams(HttpClientParams params)</h5>
                  <p class="formalpara">
							The HTTP protocol parameters for this <code class="literal">HttpClient</code>.
						</p>
                  <h5 class="formalpara">public void setState(HttpState state)</h5>
                  <p class="formalpara">
							Assigns the HTTP state for the <code class="literal">HttpClient</code>.
						</p>
                  <h5 class="formalpara">HttpClientActivity</h5>
                  <p class="formalpara">
							The HTTP Client resource adapter can be used in a synchronous or asynchronous way. <code class="literal">HttpClientActivity</code> is useful only when the HTTP Client resource adapter is used to send the Request asynchronously.
						</p>
                  <h5 class="formalpara">public String getSessionId()</h5>
                  <p class="formalpara">
							Gets the unique Session ID.
						</p>
                  <h5 class="formalpara">public void endActivity();</h5>
                  <p class="formalpara">
							To end the <code class="literal">HttpClientActivity</code>. If <code class="literal">endOnReceivingResponse</code> is set to true and if the SBB tries to forcefully end activity by calling <code class="function">endActivity()</code>, it should throw an exception. <code class="function">endActivity()</code> should only be allowed when <code class="literal">endOnReceivingResponse</code> is set to false.
						</p>
                  <h5 class="formalpara">public boolean getEndOnReceivingResponse()</h5>
                  <p class="formalpara">
							Returns true or false depending on the value passed when the request is sent asynchronously.
						</p>
                  <h5 class="formalpara">public void executeMethod(HttpMethod httpMethod)</h5>
                  <p class="formalpara">
							The service that wants to send the request asynchronously first has to create an instance of <code class="literal">HttpMethod</code> by calling <code class="function">createHttpMethod()</code> of <code class="literal">HttpClientResourceAdaptorSbbInterface</code> The service also creates an activity, attaches itself to this activity, and then calls <code class="function">executeMethod</code>, passing the instance of <code class="literal">HttpMethod</code>.
						</p>
                  <h5 class="formalpara">ResponseEvent</h5>
                  <p class="formalpara">
							<code class="literal">ResponseEvent</code> is fired by the HTTP Client resource adapter as soon as <code class="function">HttpClient.executeMethod()</code> returns. The response can be a proper response or an exception depending on the environment and application logic.
						</p>
                  <h5 class="formalpara">public Response getResponse()</h5>
                  <p class="formalpara">
							The interested SBB receives this event and can act on a response.
						</p>
                  <h5 class="formalpara">public Exception getException()</h5>
                  <p class="formalpara">
							There may be exception due to a network failure or application logic. Interested SBBs can get the exact Exception using this method.
						</p>
                  <h5 class="formalpara">Response</h5>
                  <p class="formalpara">
							This is the wrapper over the response part of <code class="function">org.apache.commons.httpclient.HttpMethod</code>.
						</p>
                  <h5 class="formalpara">public byte[] getResponseBody()</h5>
                  <p class="formalpara">
							Returns the response body of the HTTP method, if any, as an array of bytes.
						</p>
                  <h5 class="formalpara">public String getResponseBodyAsString()</h5>
                  <p class="formalpara">
							The response body of the HTTP method, if any, as a String.
						</p>
                  <h5 class="formalpara">public int getStatusCode()</h5>
                  <p class="formalpara">
							The status code associated with the latest response.
						</p>
                  <h5 class="formalpara">public Header[] getResponseHeaders()</h5>
                  <p class="formalpara">
							The response headers from the most recent execution of this request.
						</p>
                </dd>
                <dt>
                  <span class="term">Example</span>
                </dt>
                <dd>
                  <p>
						This is simple example of the code. To look at fully-working example, look at the httpclientra-example at <a href="https://mobicents-examples.dev.java.net/source/browse/mobicents-examples/httpclientra-example/">https://mobicents-examples.dev.java.net/source/browse/mobicents-examples/httpclientra-example/</a>.
					</p>
                </dd>
                <dt>
                  <span class="term">The Synchronous Way to Send a Request</span>
                </dt>
                <dd>
                  <p>
</p>
                  <pre class="programlisting">//get the resource adapter Sbb Interface
HttpClientResourceAdaptorSbbInterface raSbbInterface = ;

//create HttpMethod by passing the link
HttpMethod httpMethod = raSbbInterface.createHttpMethod("GET", "http://www.mobicents.org-a.googlepages.com/index.html"));

//send the request and get a response
Response response = raSbbInterface.executeMethod(httpMethod);

//get ResponseBody
String responseBody = response.getResponseBodyAsString();
</pre>
                  <p>
					</p>
                </dd>
                <dt>
                  <span class="term">The Asynchronous Way to Send a Request</span>
                </dt>
                <dd>
                  <p>
</p>
                  <pre class="programlisting">//get the resource adapter sbb Interface and aci factory
HttpClientResourceAdaptorSbbInterface raSbbInterface = ;
HttpClientActivityContextInterfaceFactory httpClientAci = ;


//create HttpMethod by passing the link
HttpMethod httpMethod = raSbbInterface.createHttpMethod("GET", "http://www.mobicents.org-a.googlepages.com/index.html"));

//create HttpClientActivity
HttpClientActivity clientActivity = raSbbInterface.createHttpClientActivity(true);

// get the aci for the activity and attach an sbb local object
ActivityContextInterface clientAci = httpClientAci.getActivityContextInterface(clientActivity);
clientAci.attach(sbbContext.getSbbLocalObject());


//send a request by calling executeMethod
clientActivity.executeMethod(httpMethod);
</pre>
                  <p>
					</p>
                  <p>
						The response arrives asynchronously
					</p>
                  <pre class="programlisting">public void onResponseEvent(ResponseEvent event, ActivityContextInterface aci) {

//Get the Response from Event
Response response = event.getResponse();

//get ResponseBody
String responseBody = response.getResponseBodyAsString();
</pre>
                </dd>
              </dl>
            </div>
            <p>
			The HTTP Servlet resource adapter and HTTP Client resource adapter compliment each other in creating a complete SLEE Application capable of receiving requests as well as initiating them.
		</p>
            <p>
			TBD: eventually remove this: If you have any suggestions/feedback or find a bug please discuss at http://forums.java.net/jive/thread.jspa?messageID=228634&amp;#228634
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Persistence_Resource_Adapter"></a>5.13.Â Persistence Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_Persistence_Resource_Adapter"></a>5.13.1.Â Installing the Persistence Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The Persistence resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the Persistence resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>persistencera</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-XCAP_Client_Resource_Adapter"></a>5.14.Â XCAP Client Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_XCAP_Client_Resource_Adapter"></a>5.14.1.Â Installing the XCAP Client Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The XCAP Client resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the XCAP Client resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>xcapclientra</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Rules_Resource_Adapter"></a>5.15.Â Rules Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_Rules_Resource_Adapter"></a>5.15.1.Â Installing the Rules Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The Rules resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the Rules resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>rulesra</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-TTS_Resource_Adapter"></a>5.16.Â TTS Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Installing_the_TTS_Resource_Adapter"></a>5.16.1.Â Installing the TTS Resource Adapter</h3>
                </div>
              </div>
            </div>
            <p>
			The TTS resource adapter can be installed by referring to <a href="#section-Deploying_and_Undeploying_Resource_Adapters" title="5.1.Â Deploying and Undeploying Resource Adapters">SectionÂ 5.1, âDeploying and Undeploying Resource Adaptersâ</a>.
		</p>
            <p>
			Remember to replace <code class="filename"><em class="replaceable"><code>&lt;resource_adapter&gt;</code></em></code> with the name of the directory in <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/resources</code> corresponding to the TTS resource adapter (currently this directory is named <code class="filename"><em class="replaceable"><code>ttsra</code></em></code>, but this could change in the future).
		</p>
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-SAP_Resource_Adapter"></a>5.17.Â SAP Resource Adapter</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Third-Party_Resource_Adapters"></a>5.18.Â Third-Party Resource Adapters</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="footnotes">
          <br />
          <hr width="100" align="left" />
          <div class="footnote">
            <p><sup>[<a id="ftn.id378304" href="#id378304">4</a>] </sup>
					The location of the <code class="filename"><em class="replaceable"><code>&lt;topmost_jboss_directory&gt;</code></em>/deploy</code> directory depends on whether you installed the binary distribution of Mobicents, in which case it is <code class="filename"><em class="replaceable"><code>&lt;topmost_mobicents_directory&gt;</code></em>/server/server/default/deploy</code>, or downloaded and installed JBoss yourself, in which case it is <code class="filename"><code class="envar">$JBOSS_HOME</code>/deploy</code>.
				</p>
          </div>
          <div class="footnote">
            <p><sup>[<a id="ftn.sip_ra_filename" href="#sip_ra_filename">5</a>] </sup>
				As of the time this was written, the <acronym class="acronym">JAR</acronym> file was named <code class="filename">jsipv1.2ra-package-10-02-2007.jar</code>.
			</p>
          </div>
          <div class="footnote">
            <p><sup>[<a id="ftn.footnote-resource-adaptor.xml" href="#footnote-resource-adaptor.xml">6</a>] </sup>
				Here is an example of the complete <code class="filename">resource-adaptor.xml</code> configuration file.
			</p>
            <pre class="XML">
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE resource-adaptor-jar PUBLIC "-//Sun Microsystems, Inc.//DTD JAIN SLEE Resource Adaptor 1.0//EN" "http://java.sun.com/dtd/slee-resource-adaptor-jar_1_0.dtd"&gt;
&lt;resource-adaptor-jar&gt;
	&lt;resource-adaptor
		id="jain-sip_1.1_RA"&gt;
		&lt;description&gt;JAIN SIP Resource Adaptor&lt;/description&gt;
		&lt;resource-adaptor-name&gt;JainSipResourceAdaptor&lt;/resource-adaptor-name&gt;
		&lt;resource-adaptor-vendor&gt;net.java.slee.sip&lt;/resource-adaptor-vendor&gt;
		&lt;resource-adaptor-version&gt;1.2&lt;/resource-adaptor-version&gt;
					
		&lt;resource-adaptor-type-ref&gt;
			&lt;resource-adaptor-type-name&gt;JAIN SIP&lt;/resource-adaptor-type-name&gt;
			&lt;resource-adaptor-type-vendor&gt;javax.sip&lt;/resource-adaptor-type-vendor&gt;
			&lt;resource-adaptor-type-version&gt;1.2&lt;/resource-adaptor-type-version&gt;
		&lt;/resource-adaptor-type-ref&gt;

	&lt;!--added oc-resource-adaptor.xml lines here altogether--&gt;
		&lt;resource-adaptor-classes&gt;
			&lt;resource-adaptor-class&gt;
				&lt;resource-adaptor-class-name&gt;
                    org.mobicents.slee.resource.sip.SipResourceAdaptor
                &lt;/resource-adaptor-class-name&gt;
			&lt;/resource-adaptor-class&gt;
		&lt;/resource-adaptor-classes&gt;
					
		&lt;config-property&gt;
			&lt;description&gt;uS after which dialog if it has not received/send any message is considered to be dead and is expunged&lt;/description&gt;
			&lt;config-property-name&gt;dialogIdleTimeTimeout&lt;/config-property-name&gt;
			&lt;config-property-type&gt;java.lang.Long&lt;/config-property-type&gt;
			&lt;config-property-value&gt;360000&lt;/config-property-value&gt;
		&lt;/config-property&gt;
					
		&lt;config-property&gt;
			&lt;description&gt;uS after CANCEL event is going to be fired into SLEE. This atleast gives Sbbs chance to see INVITE and respond, rather than receiving INVITE in on Tx that is in terminated state.&lt;/description&gt;
			&lt;config-property-name&gt;cancelWait&lt;/config-property-name&gt;
			&lt;config-property-type&gt;java.lang.Long&lt;/config-property-type&gt;
			&lt;config-property-value&gt;1000&lt;/config-property-value&gt;
		&lt;/config-property&gt;
					
		&lt;config-property&gt;
			&lt;config-property-name&gt;port&lt;/config-property-name&gt;
			&lt;config-property-type&gt;java.lang.Integer&lt;/config-property-type&gt;
			&lt;config-property-value&gt;5060&lt;/config-property-value&gt;
		&lt;/config-property&gt;
					
		&lt;config-property&gt;
			&lt;description&gt;IP to which SIP RAs stack should attach - if "null" it will cause RA to pick up Container bind address address&lt;/description&gt;
			&lt;config-property-name&gt;ip&lt;/config-property-name&gt;
			&lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
			&lt;config-property-value&gt;null&lt;/config-property-value&gt;
		&lt;/config-property&gt;
					
		&lt;config-property&gt;
			&lt;description&gt;List of transports, separated with ","&lt;/description&gt;
			&lt;config-property-name&gt;transports&lt;/config-property-name&gt;
			&lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
			&lt;config-property-value&gt;UDP&lt;/config-property-value&gt;
		&lt;/config-property&gt;
	&lt;/resource-adaptor&gt;
&lt;/resource-adaptor-jar&gt;
</pre>
          </div>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="chapter-Other_Examples"></a>ChapterÂ 6.Â Other Examples</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#section-SLEE_Graph_Viewer_Example">6.1. Example: SLEE Graph Viewer</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Call_Blocking_and_Call_Forwarding_and_Voice_Mail_Example">6.2. Example: Call-Blocking, Call-Forwarding and Voice Mail</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Multi-Service_Example">6.3. Example: Multiple Services</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Parent-Child_Interaction_Example">6.4. Example: Parent-Child Interaction</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-LDAP-Enabled_JSLEE_Example">6.5. Example: LDAP-Enabled JSLEE</a>
              </span>
            </dt>
          </dl>
        </div>
        <p>
	</p>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-SLEE_Graph_Viewer_Example"></a>6.1.Â Example: SLEE Graph Viewer</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Call_Blocking_and_Call_Forwarding_and_Voice_Mail_Example"></a>6.2.Â Example: Call-Blocking, Call-Forwarding and Voice Mail</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Multi-Service_Example"></a>6.3.Â Example: Multiple Services</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Parent-Child_Interaction_Example"></a>6.4.Â Example: Parent-Child Interaction</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-LDAP-Enabled_JSLEE_Example"></a>6.5.Â Example: LDAP-Enabled JSLEE</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
      </div>
      <div class="chapter" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="chapter-Mobicents_Servers_and_Services"></a>ChapterÂ 7.Â Mobicents Servers and Services</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <dl>
            <dt>
              <span class="section">
                <a href="#section-Mobicents_SIP_Servlets">7.1. Mobicents SIP Servlets</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#section-Mobicents_Media_Server">7.2. Mobicents Media Server</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#section-Overview_of_the_Mobicents_Media_Server">7.2.1. Overview of the Mobicents Media Server</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Media_Server_Architecture">7.2.2. Media Server Architecture</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#section-Mobicents_SIP_Presence_Service">7.3. Mobicents SIP Presence Service</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#id401554">7.3.1. SIP Presence Server Architecture</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Mobicents_XML_Document_Management_Server">7.3.2. Mobicents XML Document Management Server</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Mobicents_Presence_Server">7.3.3. Mobicents Presence Server</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#section-Mobicents_Resource_List_Server">7.3.4. Mobicents Resource List Server</a>
                  </span>
                </dt>
              </dl>
            </dd>
          </dl>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Mobicents_SIP_Servlets"></a>7.1.Â Mobicents SIP Servlets</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Mobicents_Media_Server"></a>7.2.Â Mobicents Media Server</h2>
              </div>
            </div>
          </div>
          <p>
	</p>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Overview_of_the_Mobicents_Media_Server"></a>7.2.1.Â Overview of the Mobicents Media Server</h3>
                </div>
              </div>
            </div>
            <h5 class="formalpara">The Reasoning and Need for Media Servers</h5>
            <p class="formalpara">
				With the continued progress of globalization, more corporations than ever before have workgroups spread across countries and continents across the world. To support and increase the productivity of remote and telecommuting workgroups, communications companies are considering more cost effective network solutions that combine voice, wireless, data and video functionality. Businesses like these expect that the services they select and eventually implement will have call quality comparable to conventional telephone service, and they expect those services to boost productivity and reduce overall communications costs. Acquiring these desired network services requires connections from the Internet and wireless and wireline networks to Public Switched Telephone Networks (<acronym class="acronym">PSTN</acronym>s) using a flexible, robust, scalable and cost-effective media gateway. The ability of such gateways to reduce overall communications costs for dispersed workgroups forms the foundation for media services and servers.
			</p>
            <h5 class="formalpara">Media Gateways Bridge Multiple Technologies</h5>
            <p class="formalpara">
				Today, all communications can be routed through computers. Widespread access to broadband Internet and the ubiquity of Internet Protocol (<acronym class="acronym">IP</acronym>) enable the convergence of voice, data and video. Media gateways provide the ability to switch voice media between a network and its access point. Using Digital Subscriber Line (<acronym class="acronym">DSL</acronym>) and fast-Internet cable technology, a media gateway converts, compresses and packetizes voice data for transmission back-and-forth across the Internet backbone for wireline and wireless phones. Media gateways sit at the intersection of the PSTNs and wireless or IP-based networks.
			</p>
            <h5 class="formalpara">The Justification for Media Gateways for VoIP</h5>
            <p class="formalpara">
				Multiple market demands are pushing companies to converge all of their media services using media gateways with VoIP capabilities. Companies expect such a convergent architecture to:
			</p>
            <div class="variablelist">
              <h6>Company Expectations of a Convergent Architecture</h6>
              <dl>
                <dt>
                  <span class="term">Lower Initial Costs</span>
                </dt>
                <dd>
                  <p>
						Capital investment is decreased because low-cost commodity hardware can be used for multiple functions.
					</p>
                </dd>
                <dt>
                  <span class="term">Lower Development Costs</span>
                </dt>
                <dd>
                  <p>
						Open system hardware and software standards with well-defined applications mean lower costs, and Application Programmable Interfaces (<acronym class="acronym">API</acronym>s) accelerate development.
					</p>
                </dd>
                <dt>
                  <span class="term">Handle Multiple Media Types</span>
                </dt>
                <dd>
                  <p>
						Companies want <acronym class="acronym">VoIP</acronym> solutions today, but also need to choose extensible solutions that will handle video in the near future.
					</p>
                </dd>
                <dt>
                  <span class="term">Lower the Costs of Deployment and Maintenance</span>
                </dt>
                <dd>
                  <p>
						Standardized, modular systems reduce training costs and maintenance while also improving uptime.
					</p>
                </dd>
                <dt>
                  <span class="term">Enable Rapid Time-to-Market</span>
                </dt>
                <dd>
                  <p>
						Early market entry hits the window of opportunity and maximizes revenue.
					</p>
                </dd>
              </dl>
            </div>
            <h5 class="formalpara">What Is the Mobicents Media Server?</h5>
            <p class="formalpara">
				The Mobicents Media Gateway is an open source Media Server based on the Java Media Framework and aimed to:
			</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Deliver competitive, complete, best-of-breed media gateway functionality of the highest quality.
				</p>
                </li>
                <li>
                  <p>
					Meet the demands of converged wireless and wireline networks, DSL and cable broadband access, and fixed-mobile converged <acronym class="acronym">VoIP</acronym> networks from a singleâand singularly-capableâmedia gateway platform.
				</p>
                </li>
                <li>
                  <p>
					Increase flexibility with a media gateway that supports a wide variety of call control protocols and scales to meet the demands of enterprises and small-carrier providers.
				</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Media_Server_Architecture"></a>7.2.2.Â Media Server Architecture</h3>
                </div>
              </div>
            </div>
            <p>
			Media services have played an important role in the traditional Time Division Multiplexing (<acronym class="acronym">TDM</acronym>)-based telephone network. As the network migrates to an Internet Protocol (<acronym class="acronym">IP</acronym>)-based environment, media services are also moving to new environments.
		</p>
            <p>
			One of the most exciting trends is the emergence and adoption of complementary modular standards that leverage the Internet to enable media services to be developed, deployed and updated more rapidly than before in a network architecture that supports the two concepts we will call provisioning-on-demand and scaling-on-demand.
		</p>
            <h5 class="formalpara">General Design Overview</h5>
            <p class="formalpara">
				Mobicents Media Server is developed on top of existing Java technologies. The Java platform is the ideal platform for network computing. It offers a single, unifying programming model that can connect all elements of a business infrastructure. The modularization effort is supported by the use of the Java Management Extension (<acronym class="acronym">JMX</acronym>) <acronym class="acronym">API</acronym>, and the industry-standard Service Logic Execution Environment (<acronym class="acronym">SLEE</acronym>) container. Using JMX enables easy management of both the server's media components and the control modules hosted by <acronym class="acronym">SLEE</acronym>.
			</p>
            <p>
			This high degree of modularity benefits the application developer in several ways. The already-tight code can be further trimmed down to support applications that must have small footprints. For example, if <acronym class="acronym">PSTN</acronym> (Public Switched Telephone Network) interconnection is unnecessary in your application, then simply take the D-channel feature out of the server. If you later decide to deploy the same application within a Signaling System 7 (<acronym class="acronym">SS7</acronym>) network, then simply enable the appropriate endpoint. Another example is the freedom you have to drop your favorite media control protocol directly into the <acronym class="acronym">SLEE</acronym> container.
		</p>
            <div class="figure">
              <a id="figure-Media_Server_Overview"></a>
              <div class="figure-contents">
                <div class="mediaobject" align="center">
                  <img src="images/orig-ms-general.jpg" align="middle" alt="Media Server Overview" />
                </div>
              </div>
              <h6>FigureÂ 7.1.Â Media Server Overview</h6>
            </div>
            <br class="figure-break" />
            <p>
			The components that are involved in media processing or endpoints are implemented with <acronym class="acronym">JMF</acronym>, the Java Media Framework. JMF provides a platform-neutral framework for displaying time-sensitive media. The <acronym class="acronym">JMF</acronym><acronym class="acronym">API</acronym>:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Scales across different protocols and delivery mechanisms
				</p>
                </li>
                <li>
                  <p>
					Scales across different types of media data
				</p>
                </li>
                <li>
                  <p>
					Provides an event model for asynchnronous communication between JMF and applications or applets
				</p>
                </li>
              </ul>
            </div>
            <p>
			The <acronym class="acronym">JMF</acronym> architecture allows advanced developers nto create and integrate new types of controllers and data sources. The <acronym class="acronym">JMF</acronym><acronym class="acronym">API</acronym> declares abstract interfaces which are used for handling new media sources and sinks such as audio and video files, <acronym class="acronym">PSTN</acronym> cards, webcams, etc.
		</p>
            <p>
			The Media Server architecture assumes that call control intelligence is outside of the Media Server and handled by an external entity. The Mebia Server assumes that call controllers will use control procedures such as <acronym class="acronym">MGCP</acronym>, Mecago or <acronym class="acronym">MSML</acronym>, among others. Each specific control module can be plugged in directly to the server as a standard <acronym class="acronym">SLEE</acronym> deployable unit. The usage of a <acronym class="acronym">SLEE</acronym> container for the implementation of the control protocol-specific communication logic provides simple deployment and also the easy deployment of such control modules. The developer will not have to mess with low-level transaction and state management details, multi-threading, connection-pooling and other similar complex, low-level <acronym class="acronym">API</acronym>s.
		</p>
            <div class="note">
              <h2>Note</h2>
              <p>
				The Mobicents Media Server uses <acronym class="acronym">SLEE</acronym> for implementing its own communication capabilities. The <acronym class="acronym">SLEE</acronym> container doesn't serve here as a call controller.
			</p>
            </div>
            <p>
			In addition to control protocol modules, the <acronym class="acronym">SLEE</acronym> container is aimed at providing high-level features like Interactive Voice Response (<acronym class="acronym">IVR</acronym>) and Drools or VoiceXML engines.
		</p>
            <p>
			The mobdules deployed under <acronym class="acronym">SLEE</acronym> control interact with the Media Server Service Provider Interface (<acronym class="acronym">SPI</acronym>) through the Media Server Control Resource Adapter, or <acronym class="acronym">MSC-RA</acronym>. The <acronym class="acronym">MSC-RA</acronym> follows the recommendations of JSR-309 and implements asynchronous interconnection with the Media Server <acronym class="acronym">SPI</acronym> stack. This local implementation is restricted and does not all the use of high-level abstractions like VoiceXML dialogs, <abbr class="abbrev">etc.</abbr>.
		</p>
            <h5 class="formalpara">Typical Deployment Scenario</h5>
            <p class="formalpara">
				Mobicents Media Server offers a complete solution for all aspects of being a media gateway and server. This includes the Digital Signal Processors required to covert and compress <acronym class="acronym">TDB</acronym> voice circuits into <acronym class="acronym">IP</acronym> packets, announcement access points, conferencing, high-level IVR engines, <abbr class="abbrev">etc.</abbr> The gateway is able to provide signaling conversation and can operate as a Session Border Controller at the boundaries of Local Access Networks. The Media Server is always controlled by an external <acronym class="acronym">JBCP</acronym> application server which implements the call control logic.
			</p>
            <h5 class="formalpara">Endpoints</h5>
            <p class="formalpara">
				It is convenient to consider a media gateway as a collection of endpoints. An endpoint is a logical representation of a physical entity such as an analog phone or a channel in a trunk. Endpoints are sources or sinks of data and can be physical or virtual. Physical endpoint creation requires hardware installation whil esoftware is sufficient for creating a virtual endpoint. An interface on a gateway that terminates a trunk connected to a PSTN switch is an example of a physical endpoint. An audio source in an audio content server is an example of a virtual endpoint.
			</p>
            <p>
			The type of the endpoint determines its functionality. Our analysis, so far, has led us to isolate the following basic endpoint types:
		</p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
					Digital Signal 0 (<acronym class="acronym">DS0</acronym>)
				</p>
                </li>
                <li>
                  <p>
					Analog line
				</p>
                </li>
                <li>
                  <p>
					Announcement server access point
				</p>
                </li>
                <li>
                  <p>
					Conference bridge acces point
				</p>
                </li>
                <li>
                  <p>
					Packet relay
				</p>
                </li>
                <li>
                  <p>
					Asynchronous Transfer Mode (<acronym class="acronym">ATM</acronym>) "trunk side" interface
				</p>
                </li>
              </ul>
            </div>
            <p>
			This list is not exhaustive: there may be other types of endpoints defined in the future, for example test endpoints that could be used to check network quality, or frame-relay endpoints that could be used to manage audio channels multiplexed over a frame-relay virtual circuit.
		</p>
            <div class="variablelist">
              <h6>Description of Various Access Point Types</h6>
              <dl>
                <dt>
                  <span class="term">Announcement Server Access Point</span>
                </dt>
                <dd>
                  <p>
						An announcement server endpoint naturally provides access to an announcement server. Upon receiving requests from the call agent, the announcement server will "play" a specified announcement. A given announcement endpoint is not expected to support more than one connection at a time. Connections to an announcement server are typically one-way, or "half-duplex":the announcement server is not expected to listen to the audio signals from the connection.
					</p>
                </dd>
                <dt>
                  <span class="term">Interactive Voice Response Access Point</span>
                </dt>
                <dd>
                  <p>
						An Interactive Voice Repsonse (<acronym class="acronym">IVR</acronym>) endpoint provides access to an <acronym class="acronym">IVR</acronym> service. Upon requests from the call agent, the <acronym class="acronym">IVR</acronym> server will "play" announcements and tones, and will "listen" to responses, such as (<acronym class="acronym">DTMF</acronym>) input or voice messages, from the user. A given <acronym class="acronym">IVR</acronym> endpoint is not expected to support more than one connection at a time.
					</p>
                </dd>
                <dt>
                  <span class="term">Conference Bridge Access Point</span>
                </dt>
                <dd>
                  <p>
						A conference bridge endpoint is used to provide access to a specific conference. Media gateways should be able to establish several connections between the endpoint and the packet networks, or between the endpoint and other endpoints in the same gateway. The signals originating from these connections shall be mixed according to the connection "mode" (as specified later in this document). The precise number of connections that an endpoint supports is characteristic of the gateway, and may in fact vary according to the alloction of resources within the gateway.
					</p>
                </dd>
                <dt>
                  <span class="term">Packet Relay</span>
                </dt>
                <dd>
                  <p>
						A packet relay endpoint is a specific form of conference bridge that typically only supports two connections. Packet relays can be found in firewalls between a protected and an open network, or in transcoding servers used to provide interoperation between incompatible gateways, such as gateways which don't support compatible compression algorithms, or gateways that operate over different transmission networks such as IP and ATM.
					</p>
                </dd>
              </dl>
            </div>
            <h5 class="formalpara">Signal Generators (<acronym class="acronym">SG</acronym>s) and Signal Detectors (<acronym class="acronym">SD</acronym>s)</h5>
            <p class="formalpara">
				This endpoint contains a set of resources which provide the media-processing functionality. It manages the interconnection of media streams between the resources, and arbitrates the flow of media stream data between them. Media servicesâor commandsâ are invoked by a client application on the endpoint; that endpoint causes the resources to perform the desired services, and directs events sent by the resources to the appropriate client. The resources in the endpoint include a primary resource and zero or more secondary resources. The primary resource is typically connected to an external media stream, and provides the data from that stream to the secondary resources. The secondary resources may process that stream (<abbr class="abbrev">e.g.</abbr> by recording it and/or performing automatic speech recognition on it), or may themselves generate generate media stream data (<abbr class="abbrev">e.g.</abbr> by playing a voice file) which is then transmitted to the primary resource.
			</p>
            <p>
			A resource is statically prepared if the preparation takes place at the time of creation. A resource is dynamically prepared if preparation of a particular resource (and its associated media streams) does not occur until it is required by a media operation. Static preparation can lead to less efficient usage of a server's resources, because resources may tend to be allocated for a longer time before use. However, once a resource has been prepared, it is guaranteed to be available for use. Dynamic preparation may utilize resources more efficiently because of Just-In-Time (<acronym class="acronym">JIT</acronym>) allocation algorithms may be used.
		</p>
            <p>
			An endpoint is divided logically into a Service Provider Interface (<acronym class="acronym">SPI</acronym>) that is used to implement specific a endpoint, and a management interface which is used for implementing manageable resources of that endpoint. All endpoints are plugged into the Mobicents <acronym class="acronym">SLEE</acronym> server by registering with the MBean server. The kernel in that sense is only an aggregator, and not a source of actual functionality. The functionality is provided by the <acronym class="acronym">SPI</acronym> implementation of the Mbeans, and in fact, all major endpoints are manageable MBeans interconnected through the MBean server. The best way to add endpoints to a Media Server is to write a new <acronym class="acronym">JMX</acronym> bean which provides implementation of the endpoint's <acronym class="acronym">SPI</acronym>.
		</p>
            <p>
			The <acronym class="acronym">SPI</acronym> layer is an abstraction that endpoint providers must implement to enable their media-processing features. An implementation of <acronym class="acronym">SPI</acronym> for an endpoint is referred to as an <span class="emphasis"><em>Endpoint Provider</em></span>.
		</p>
            <div class="figure">
              <a id="figure-EndpointManagementMBean_UML_Diagram"></a>
              <div class="figure-contents">
                <div class="mediaobject" align="center">
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                    <tr>
                      <td align="center">
                        <img src="images/orig-endpoint.png" align="middle" width="700" alt="EndpointManagementMBean UML Diagram" />
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
              <h6>FigureÂ 7.2.Â EndpointManagementMBean UML Diagram</h6>
            </div>
            <br class="figure-break" />
          </div>
        </div>
        <div class="section" lang="en-US" xml:lang="en-US">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="section-Mobicents_SIP_Presence_Service"></a>7.3.Â Mobicents SIP Presence Service</h2>
              </div>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="id401554"></a>7.3.1.Â SIP Presence Server Architecture</h3>
                </div>
              </div>
            </div>
            <p>
			The Mobicents SIP Presence Service provides presence functionalities to SIP-based networks using standards developed by the Internet Engineering Task Force (IETF), the Open Mobile Alliance (OMA), the 3rd Generation Partnership Project (3GPP) and the European Telecommunications Standards Institute (ETSI).
		</p>
            <p>
			The Mobicents SIP Presence Server is comprised of three separate but interrelated servers.
		</p>
            <div class="figure">
              <a id="figure-orig-MobicentsSipPresenceServerArchitecture.jpg"></a>
              <div class="figure-contents">
                <div class="mediaobject" align="center">
                  <a id="mediaobj-orig-MobicentsSipPresenceServerArchitecture.jpg"></a>
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                    <tr>
                      <td align="center">
                        <img src="images/orig-MobicentsSipPresenceServerArchitecture.jpg" align="middle" width="700" alt="The Mobicents SIP Presence Service" />
                      </td>
                    </tr>
                  </table>
                  <div class="caption">
                    <p>
					Functional Diagram of the Mobicents SIP Presence Service
				</p>
                  </div>
                </div>
              </div>
              <h6>FigureÂ 7.3.Â The Mobicents SIP Presence Service</h6>
            </div>
            <br class="figure-break" />
            <div class="variablelist">
              <a id="varlist-The_Three_Servers_Comprising_the_Mobicents_Presence_Service"></a>
              <h6>The Three Servers Comprising the Mobicents Presence Service</h6>
              <dl>
                <dt>
                  <span class="term">
                    <a href="#section-Mobicents_XML_Document_Management_Server" title="7.3.2.Â Mobicents XML Document Management Server">SectionÂ 7.3.2, âMobicents XML Document Management Serverâ</a>
                  </span>
                </dt>
                <dd>
                  <p>
						The Mobicents XDM Server is a functional element of next-generation IP communications networks is responsible for handling the management of user XML documents stored on the network side, such as presence authorization rules, static presence information, contact and group lists (also known as â<span class="quote">resource lists</span>â), policy data, and many others.
					</p>
                </dd>
                <dt>
                  <span class="term">
                    <a href="#section-Mobicents_Presence_Server" title="7.3.3.Â Mobicents Presence Server">Presence Server</a>
                  </span>
                </dt>
                <dd>
                  <p>
						The Presence Server is an entity that accepts, stores and distributes Presence Information. The Presence Server performs the following functions:
					</p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
								It manages publications from one or multiple Presence Source(s) of a certain Presentity. This includes refreshing Presence Information, replacing existing Presence Information with newly-published information, or removing Presence Information.
							</p>
                      </li>
                      <li>
                        <p>
								It manages subscriptions from Watchers to Presence Information and generates notifications about the Presence Information state changes, retrieving the presence authorization rules from the XDM Server.
							</p>
                      </li>
                      <li>
                        <p>
								It manages subscriptions from Watcher Information Subscribers to Watcher information and generates notifications about Watcher information state changes.
							</p>
                      </li>
                    </ul>
                  </div>
                </dd>
                <dt>
                  <span class="term">
                    <a href="#section-Mobicents_Resource_List_Server" title="7.3.4.Â Mobicents Resource List Server">Resource List Server</a>
                  </span>
                </dt>
                <dd>
                  <p>
						The Resource List Server (RLS) handles subscriptions to Presence Lists. It creates and manages back-end subscriptions to all resources in the Presence List. The list content is retrieved from the XDM Server.
					</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Mobicents_XML_Document_Management_Server"></a>7.3.2.Â Mobicents XML Document Management Server</h3>
                </div>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Introduction_to_the_Mobicents_XML_Document_Management_Server"></a>7.3.2.1.Â Introduction to the Mobicents XML Document Management Server</h4>
                  </div>
                </div>
              </div>
              <p>
			The Mobicents XML Document Management Server (XDMS) is part of the Mobicents SIP Presence Service; it is the first free and open source implementation of an XML Document Management Server as defined in the Open Mobile Alliance (OMA) XML Document Management v1.1 specification. This functional element of next-generation IP communication networks is responsible for handling the management of user XML documents stored on the network side, such as presence authorization rules, contact and group lists (also known as resource lists), static presence information, and much more.
		</p>
              <h5 class="formalpara">Functional Architecture of the Mobicents XML Document Management Server</h5>
              <p class="formalpara">
				The Mobicents XDM Server includes the following XCAP application usages:
			</p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
					IETF pres-rules (RFC 5025)
				</p>
                  </li>
                  <li>
                    <p>
					OMA pres-rules (OMA Presence Simple v1.1 Candidate Release)
				</p>
                  </li>
                  <li>
                    <p>
					IETF resource-lists (RFC 4826)
				</p>
                  </li>
                  <li>
                    <p>
					IETF rls-services (RFC 4826)
				</p>
                  </li>
                  <li>
                    <p>
					IETF xcap-caps (RFC 4825)
				</p>
                  </li>
                </ul>
              </div>
              <div class="figure">
                <a id="figure-orig-XDMS_Functional_Architecture.jpg"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <a id="mediaobj-orig-XDM_Functional_Architecture.jpg"></a>
                    <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                      <tr>
                        <td align="center">
                          <img src="images/orig-XDM Functional Architecture.jpg" align="middle" width="700" alt="The Mobicents XML Document Management Server" />
                        </td>
                      </tr>
                    </table>
                    <div class="caption">
                      <p>
					Functional Architecture of the XML Document Management Server
				</p>
                    </div>
                  </div>
                </div>
                <h6>FigureÂ 7.4.Â The Mobicents XML Document Management Server</h6>
              </div>
              <br class="figure-break" />
              <p>
			The XDM Server comprises the following functional elements:
		</p>
              <div class="variablelist">
                <a id="varlist-Functional_Elements_of_the_XDM_Server"></a>
                <h6>Functional Elements of the XDM Server</h6>
                <dl>
                  <dt>
                    <span class="term">Data Source</span>
                  </dt>
                  <dd>
                    <p>
						The XDM Server data source is where all user XML documents are stored. Information related to the server itself is also stored in this element along with the user's provisioned data
					</p>
                    <p>
						The data source also handles subscriptions to updates on specific documents, or complete XCAP application usages.
					</p>
                  </dd>
                  <dt>
                    <span class="term">Aggregation Proxy</span>
                  </dt>
                  <dd>
                    <p>
						The aggregation proxy is responsible for handling an XDM client's XCAP requests, which includes authentication and authorization of the requester.
					</p>
                  </dd>
                  <dt>
                    <span class="term">Request Processor</span>
                  </dt>
                  <dd>
                    <p>
						This element includes the XCAP Server logic to process an XCAP request and return a proper response.
					</p>
                  </dd>
                  <dt>
                    <span class="term">XDM Event Subscription Control</span>
                  </dt>
                  <dd>
                    <p>
						This element, using the SIP protocol, is responsible for handling subscriptions to documents managed by the XDM. Its functions include the authentication and authorization of a subscription, attachment to update events on specific documents or application usages, and the sending of notifications when documents change.
					</p>
                  </dd>
                </dl>
              </div>
              <h5 class="formalpara">Implementation Architecture of the Mobicents XML Document Management Server</h5>
              <p class="formalpara">
				The XDM Server is built on top of the Mobicents JAIN SLEE container. This figure depicts the architecture of the XDM Server implementation.
			</p>
              <div class="figure">
                <a id="figure-orig-XDMS_Implementation.jpg"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <a id="mediaobj-orig-XDMS_Implementation.jpg"></a>
                    <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                      <tr>
                        <td align="center">
                          <img src="images/orig-XDMS Implementation.jpg" align="middle" width="700" alt="Mobicents XML Document Management Server" />
                        </td>
                      </tr>
                    </table>
                    <div class="caption">
                      <p>
					Implementation Architecture of the XML Document Management Server
				</p>
                    </div>
                  </div>
                </div>
                <h6>FigureÂ 7.5.Â Mobicents XML Document Management Server</h6>
              </div>
              <br class="figure-break" />
              <div class="variablelist">
                <a id="varlist-The_Functional_Elements_Which_Compose_the_XML_Document_Management_Server"></a>
                <h6>The Functional Elements Which Compose the XML Document Management Server</h6>
                <dl>
                  <dt>
                    <span class="term">Data Source Resource Adapter</span>
                  </dt>
                  <dd>
                    <p>
						This Resource Adaptor implements the Data Source functional element.
					</p>
                    <p>
						The <code class="literal">RA Type</code> defines two activities objects, <code class="literal">DocumentActivity</code> and <code class="literal">AppUsageActivity</code>, both of which are used to fire events that signal that a document, element or attribute was updated.
					</p>
                    <p>
						The <code class="literal">RA Type</code> also defines a Service Building Block (SBB) RA interface to manage the users and documents stored in the XDM Server, and create activities, where events will be fired. The resource adapter will only fire events on activities that exist; that is, the RA won't create activities implicitly if a document is updated.
					</p>
                    <p>
						The <code class="literal">RA Type</code> also provides a base abstract implementation of the resource adapter, making it very simple to change the underlying resource used to store information, which is by default the internal JDBC datasource of the JBoss Application Server.
					</p>
                  </dd>
                  <dt>
                    <span class="term">AppUsage Cache Resource Adaptor</span>
                  </dt>
                  <dd>
                    <p>
						This resource adapter stores the XCAP application usages installed in the server.
					</p>
                    <p>
						Each <code class="literal">AppUsage</code> is an object that includes the logic to validate XCAP documents that result from XCAP requests and are expensive to create; this resource adapter thus provides caching of AppUsages, using a pool model.
					</p>
                    <p>
						The resource adapter doesn't possess events or activities.
					</p>
                  </dd>
                  <dt>
                    <span class="term">AppUsage Service</span>
                  </dt>
                  <dd>
                    <p>
						XCAP Application Usages are installed through a JAIN SLEE service, making it possible to add and/or remove application usages while the server is running.
					</p>
                  </dd>
                  <dt>
                    <span class="term">Aggregation Proxy Service</span>
                  </dt>
                  <dd>
                    <p>
						This JAIN SLEE service implements the aggregation proxy functional element. It handles events fired by the Mobicents HTTP Servlet resource adapter and then uses two child SBBs: the <code class="literal">User Profile Enabler SBB</code> to retrieve information regarding the user needed for authentication/authorization of the XCAP request, and the <code class="literal">Request Processor SBB</code>, which handles the XCAP request.
					</p>
                  </dd>
                  <dt>
                    <span class="term">Request Processor SBB</span>
                  </dt>
                  <dd>
                    <p>
						The <code class="literal">Request Processor SBB</code> implements the request processor functional element, providing a synchronous SBB interface to process XCAP requests. It uses the <code class="literal">AppUsage Cache</code> resource adapter to borrow AppUsage objects, and the Data Source resource adapter to retrieve or set documents stored in the server's data source.
					</p>
                  </dd>
                  <dt>
                    <span class="term">User Profile Enabler SBB (TBD: not available yet)</span>
                  </dt>
                  <dd>
                    <p>
						This SBB provides a synchronous SBB interface used in JAIN SLEE child relations in order to retrieve user information. Two different implementations of the interface are provided, one considers that the information is stored in the XDM Data Source, another interfaces to a Diameter Sh Server such as IMS HSS.
					</p>
                  </dd>
                  <dt>
                    <span class="term">XCAP Diff Subscription Control Service (TBD: not available yet)</span>
                  </dt>
                  <dd>
                    <p>
						TBD
					</p>
                  </dd>
                </dl>
              </div>
              <p>
			The implementation architecture figure also contains client-side components:
		</p>
              <div class="variablelist">
                <a id="varlist-Client-Side_Components_of_the_XML_Document_Management_Server_"></a>
                <h6>Client-Side Components of the XML Document Management Server </h6>
                <dl>
                  <dt>
                    <span class="term">XCAP Client</span>
                  </dt>
                  <dd>
                    <p>
						The XCAP client is a simple API to interact with an XCAP Server that internally uses the Apache HTTP Client.
					</p>
                    <p>
						The API documentation and example code snippets can be found TBD
					</p>
                  </dd>
                  <dt>
                    <span class="term">XCAP Client Resource Adaptor</span>
                  </dt>
                  <dd>
                    <p>
						The XCAP Client Resource Adaptor adapts the XCAP Client API into JAIN SLEE domain. It provides methods to interact with the XCAP server in both syncronous and asyncronous ways.
					</p>
                    <p>
						The RA Type description and code snippets using the RA can be found here.
					</p>
                  </dd>
                  <dt>
                    <span class="term">XDM Client SBB</span>
                  </dt>
                  <dd>
                    <p>
						The XDMClientSBB is an interface of a JAIN SLEE SBB to be used as a client to the Mobicents XDM Server (and others compliant with same standards), in JAIN SLEE child relations.
					</p>
                    <p>
						Two implementations of this interface are provided:
					</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
								<code class="literal">InternalXDMClientSBB</code> is intended to be used on applications running in the Mobicents XDM Server JAIN SLEE container, and
							</p>
                        </li>
                        <li>
                          <p>
								<code class="literal">ExternalXDMClientSBB</code>, which is intended to be used on applications running in a different JAIN SLEE container than the Mobicents XDM Server.
							</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                </dl>
              </div>
              <p>
			This version of the documentation is from http://groups.google.com/group/mobicents-public/web/mobicents-xdm-server and the original author is Eduardo Martins, JBoss R&amp;D. TBD: the next section: Server setup and testing, needs to be formatted and tested. Configuration The Mobicents XDM Server can be customized before built: * XCAP Root, through property xdm.server.xcap.root in pom.xml inside the Mobicents Presence Service root directory (/trunk/servers/sip-presence), defines the relative path to root that is considered the XCAP Root for all XCAP URIs. Must match the servlet name used in Mobicents HTTP Servlet RA. Default value is /mobicents. * Dynamic user provisioning, through property dynamicUserProvisioning in pom.xml inside the Mobicents Presence Service root directory (/trunk/servers/sip-presence), defines if the XDM Server should provision the user when a PUT request is being processed and the user is not installed for the request's application usage. Default value is true. There is no configuration needed to deploy the server. Requirements The Mobicents XDM Server depends on Mobicents JAIN SLEE server and Mobicents SIP and HTTP Servlet resource adaptors, ensure all are installed. At the moment, the Mobicents XDM Server is not compatible with JDK 1.6 Install/Uninstall From source code repository, install doing mvn install on directory /trunk/servers/sip-presence/xdms, uninstall doing mvn clean on same directory. Using a binary release, install doing ant deploy on directory servers/sip-presence/xdms, uninstall doing ant undeploy on same directory. Testing After server is deployed, it is recommended to test it. Please lookup for further instructions in file .../xdms/tests/README.txt. No test should fail. Resources: * How to manage the server * How to create a XCAP App(lication)Usage * Integrating XDM in your JAIN SLEE Apps: code snippets for XDM Client SBB usage * XCAP Client API documentation * XCAP Client RA Type description and example code snippets * Mobicents SIP Presence Service * Want to contribute?
		</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Mobicents_Presence_Server"></a>7.3.3.Â Mobicents Presence Server</h3>
                </div>
              </div>
            </div>
            <div class="section" lang="en-US" xml:lang="en-US">
              <div class="titlepage">
                <div>
                  <div>
                    <h4 class="title"><a id="section-Introduction_to_the_Mobicents_Presence_Server"></a>7.3.3.1.Â Introduction to the Mobicents Presence Server</h4>
                  </div>
                </div>
              </div>
              <p>
			Mobicents Presence Server is a free and open source implementation of a SIP Presence Server, as defined by the Internet Engineering Task Force (IETF), the Open Mobile Alliance (OMA), the 3rd Generation Partnership Project (3GPP) and the European Telecommunications Standards Institute (ETSI).
		</p>
              <p>
			The Presence Server is an entity that accepts, stores and distributes SIP Presence Information.
		</p>
              <h5 class="formalpara">Functional Architecture of the Mobicents Presence Server</h5>
              <p class="formalpara">
			</p>
              <div class="figure">
                <a id="figure-orig-PS_Functional_Architecture.jpg"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <a id="mediaobj-orig-PS_Functional_Architecture.jpg"></a>
                    <img src="images/orig-PS Functional Architecture.jpg" align="middle" alt="The Mobicents Presence Server" />
                    <div class="caption">
                      <p>
					Functional Diagram of the Mobicents Presence Server
				</p>
                    </div>
                  </div>
                </div>
                <h6>FigureÂ 7.6.Â The Mobicents Presence Server</h6>
              </div>
              <br class="figure-break" />
              <p>
			The Presence Server comprises the following functional elements:
		</p>
              <div class="variablelist">
                <a id="varlist-The_Functional_Elements_Which_Compose_the_Presence_Server"></a>
                <h6>The Functional Elements Which Compose the Presence Server</h6>
                <dl>
                  <dt>
                    <span class="term">Presence Publication Control</span>
                  </dt>
                  <dd>
                    <p>
						This functional element manages the publication of presence events, which includes not only the handling of new publications, but also the refreshing, modification or removal of, already-published information.
					</p>
                    <p>
						Because the presence resource, which is also called a â<span class="quote">presentity</span>â, can have multiple publications simultaneously, such as some state published by a user agent or device, and some location data published by a Presence Network Agent (on behalf of the presentity), this element is also responsible for composing all of the different publications for the same resource.
					</p>
                    <p>
						In some presence networks, it may be of interest to allow resources to have a static presence state, which is stored in the XDM Server. In cases like these, Presence Publication Control may need to interface with the XDM Server to retrieve and subscribe to (learn about changes to) that information, and use it when composing the final presence information document.
					</p>
                  </dd>
                  <dt>
                    <span class="term">Presence Subscription Control</span>
                  </dt>
                  <dd>
                    <p>
						This functional element handles subscriptions to presence events or to the list of subscribers (watchers), for any specific resource. It is, of course, responsible for emitting notifications related to those subscriptions.
					</p>
                    <p>
						Presence authorization rules, which define if a subscription is allowed or rejected and, if allowed, define which transformations to the original presence events are needed, are stored on the XDM Server by the user. Thus, Presence Subscription Control needs to retrieve and subscribe to (learn about changes to) that information.
					</p>
                  </dd>
                  <dt>
                    <span class="term">XDM Client Control</span>
                  </dt>
                  <dd>
                    <p>
						This last element is responsible for interfacing with the XDM Server that manages the user's XML documents, and is related to the main functions of the presence server. It's capable not only of retrieving a document (or part of one), but also of subscribing to either updates of a single, specific document, or to a full collection of documents of a specific type or application.
					</p>
                  </dd>
                </dl>
              </div>
              <h5 class="formalpara">Implementation Architecture of the Mobicents Presence Server</h5>
              <p class="formalpara">
			</p>
              <div class="figure">
                <a id="figure-orig-PS_Implementation.jpg"></a>
                <div class="figure-contents">
                  <div class="mediaobject" align="center">
                    <a id="mediaobj-orig-PS_Implementation.jpg"></a>
                    <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                      <tr>
                        <td align="center">
                          <img src="images/orig-PS Implementation.jpg" align="middle" width="700" alt="Implementation Architecture of the Mobicents Presence Server" />
                        </td>
                      </tr>
                    </table>
                    <div class="caption">
                      <p>
					The Mobicents Presence Server
				</p>
                    </div>
                  </div>
                </div>
                <h6>FigureÂ 7.7.Â Implementation Architecture of the Mobicents Presence Server</h6>
              </div>
              <br class="figure-break" />
              <p>
			The implementation of the Mobicents Presence Server comprises the following functional elements:
		</p>
              <div class="variablelist">
                <a id="varlist-The_Two_Services_Which_Compose_the_Presence_Server"></a>
                <h6>The Two Services Which Compose the Presence Server</h6>
                <dl>
                  <dt>
                    <span class="term">Presence Publication Control Service</span>
                  </dt>
                  <dd>
                    <p>
						This JAIN SLEE service includes the root Service Building Block (SBB), <code class="literal">PresencePublicationControlSbb</code>, which is the implementation of the abstract SIP event <code class="literal">PublicationControlSbb</code>. It handles publications on the "presence" event package.
					</p>
                    <p>
						The <code class="literal">PresencePublicationControlSbb</code> provides the following capabilities:
					</p>
                    <div class="itemizedlist">
                      <ul>
                        <li>
                          <p>
								It provides the logic to authorize a publication; however, it only authorizes <code class="literal">PUBLISH</code> requests when the request URI matches the PIDF document â<span class="quote">entity</span>â attribute.
							</p>
                        </li>
                        <li>
                          <p>
								It provides JAXB unmarshellers to validate and parse the PIDF document for the abstract <code class="literal">PublicationControlSbb</code>.
							</p>
                        </li>
                        <li>
                          <p>
								It demands that notifying subscribers occur through a child relation to the root SBB of the Presence Subscription Control Service.
							</p>
                        </li>
                        <li>
                          <p>
								Finally, it also provides an <code class="literal">SbbLocalObject</code> interface that can be used, in JAIN SLEE child relations, to obtain the composed presence information for a specific resource.
							</p>
                        </li>
                      </ul>
                    </div>
                  </dd>
                  <dt>
                    <span class="term">Presence Subscription Control Service.</span>
                  </dt>
                  <dd>
                    <p>
						This JAIN SLEE service includes the root SBB <code class="literal">PresenceSubscriptionControlSbb</code>, which is the implementation of the abstract SIP Event <code class="literal">SubscriptionControlSbb</code>. It handles subscriptions on the "presence" event package.
					</p>
                    <p>
						The standout SBB logic item is the usage of presence-rules documents, obtained through the XDM Client SBB child relation, in order to authorize subscriptions and transform the content notified (TBD: feature not used yet). It also defines a child relation to the root SBB of <code class="literal">PresencePublicationService</code> to retrieve the composed PIDF document for the subscription's notifier.
					</p>
                    <p>
						The SBB also provides an <code class="literal">SbbLocalObject</code> interface that can be used, in JAIN SLEE child relations, to make the presence event known to the subscribers of a specific resource.
					</p>
                  </dd>
                </dl>
              </div>
              <p>
			The implementation architecture of the Presence Server also contains client-side components:
		</p>
              <div class="variablelist">
                <a id="varlist-"></a>
                <h6></h6>
                <dl>
                  <dt>
                    <span class="term">Presence Client SBB (TBD: not yet available)</span>
                  </dt>
                  <dd>
                    <p>
						The <code class="literal">PresenceClientSBB</code> is the interface to a JAIN SLEE SBB intended to be used as a client for the Mobicents Presence Server (and other servers compliant with same standards), in JAIN SLEE child relations.
					</p>
                    <p>
						Two implementations of this interface are provided: the <code class="literal">InternalPresenceClientSBB</code> that is used with applications running in the Mobicents Presence Server JAIN SLEE container, and the <code class="literal">ExternalPresenceClientSBB</code>, used with applications running in a different JAIN SLEE container than the Mobicents Presence Server.
					</p>
                  </dd>
                </dl>
              </div>
              <p>
			This documentation is originally from http://groups.google.com/group/mobicents-public/web/mobicents-sip-presence-server by Eduardo Martins, JBoss R&amp;D. TBD: Server setup and testing section, following this section or perhaps before. XCAP Aware User Agent: The PS server calculates pres-rules XCAP uris of users, by default, using a non standard way, but compatible with Counterpath Eyebeam. You can change to the standards recommended way in the hard coded field "clientUAIsEyebeam" of PresenceSubscriptionControlSbb (in ps-core/subscription-sbb/src/main/java/..). This is a temporary solution due to a feature, in current jain-sip stack, that removes invalid User-Agent headers (seems most UAs are failing here) of SIP REQUESTS. In the future this configuration will not be needed. There is no configuration needed to deploy the server. Requirements The Mobicents Presence Server depends on Mobicents JAIN SLEE server and Mobicents SIP resource adaptor, ensure all are installed. Install/Uninstall At the moment the Mobicents Presence Server can only be installed integrated with Mobicents XDM Server, that is, in the all-in-1 Presence Service architecture. This is due to lack of external XDM Client SBB component. From source code repository, install doing mvn install on directory /trunk/servers/sip-presence/integrated, uninstall doing mvn clean on same directory. Using a binary release, install doing ant deploy on directory servers/sip-presence/integrated, uninstall doing ant undeploy on same directory. Note: This will also install Mobicents XDM server, ensure all it's requirements are met too. Testing A test framework for the server is not available ... yet. Resources: * How to manage the server * Integrating PS in your JAIN SLEE Apps: code snippets for Internal Presence Client SBB usage * Integrating PS in your JAIN SLEE Apps: code snippets for External Presence Client SBB usage * Mobicents Sip Event Publication and Subscription Control components * Mobicents SIP Presence Service
		</p>
            </div>
          </div>
          <div class="section" lang="en-US" xml:lang="en-US">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="section-Mobicents_Resource_List_Server"></a>7.3.4.Â Mobicents Resource List Server</h3>
                </div>
              </div>
            </div>
            <p>
	</p>
          </div>
        </div>
      </div>
      <div class="appendix" lang="en-US" xml:lang="en-US">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="Mobicents_User_Guide-Revision_History"></a>AppendixÂ A.Â Revision History</h2>
            </div>
            <div>
              <div class="revhistory">
                <table border="1" width="100%" summary="Revision history">
                  <tr>
                    <th align="left" valign="top" colspan="3">
                      <b>Revision History</b>
                    </th>
                  </tr>
                  <tr>
                    <td align="left">Revision 1.0</td>
                    <td align="left">Mon Feb 19 2008</td>
                    <td align="left">
                      <span class="firstname">Douglas<br /></span>
                      <span class="surname">Silas<br /></span>
                      <code class="email">&lt;<a href="mailto:dhensley@redhat.com">dhensley@redhat.com</a>&gt;</code>
                    </td>
                  </tr>
                  <tr>
                    <td align="left" colspan="3">
			<table class="simplelist" border="0" summary="Simple list"><tr><td>Initial Release</td></tr></table>
		</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
        <p>
	</p>
      </div>
    </div>
  </body>
</html>
