<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." default="" name="parlayx_release_build">
	<!--
	<property environment="system" />
	<property name="jboss.home" value="${system.JBOSS_HOME}" />
	-->
	<path id="jb.home">
		<pathelement location="../../server" />
	</path>
	<property name="jboss.home" refid="jb.home" />

	<property name="node" value="all" />
	<property name="deploy.dir" value="deploy-mobicents" />


	<!-- DEPLOY & UNDEPLOY STUFF -->
	<property name="ra-entity" value="ParlayRA" />
	<path id="ratype-du">
		<pathelement location="parlay-ra-type.jar" />
	</path>
	<property name="ratype-du" refid="ratype-du" />
	<path id="ra-du">
		<pathelement location="parlay-local-ra.jar" />
	</path>
	<property name="ra-du" refid="ra-du" />
	<property name="ra-id" value="asterisk#Asterisk-Java#1.0" />


	<import file="../../tools/cli/slee-management.xml" />




	<target name="ra-deploy" depends="management-init" description="deploy">
		<echo>Installing ${ra-entity}.</echo>



		<copy file="parlayra-orb.properties" todir="${jboss.home}/server/${node}/conf" />
		<copy file="parlayresourceadapter-deploy.bsh" todir="${jboss.home}/server/${node}/${deploy.dir}/scripts/" />
		<copy todir="${jboss.home}/server/${node}/${deploy.dir}">
			<fileset dir="./">
				<include name="**/parlay*.jar" />
				<!--<include name="**/*" />-->
			</fileset>
		</copy>


		<!--
			<slee-management jnpport="${jnpPort}" host="${jnpHost}">
				<install url="${file_url}${ratype-du}" />
				<install url="${file_url}${ra-du}" />
				<createraentity resourceadaptorid="${ra-id}" entityname="${ra-entity}" />
				<activateraentity entityname="${ra-entity}" />
				<bindralinkname entityname="${ra-entity}" linkname="${ra-entity}" />
			</slee-management>
			-->
	</target>

	<target name="ra-undeploy" depends="management-init" description="undeploy">
		<echo>Uninstalling ${ra-entity}.</echo>

		<delete file="${jboss.home}/server/${node}/conf/parlayra-orb.properties" />
		<delete file="${jboss.home}/server/${node}/${deploy.dir}/scripts/parlayresourceadapter-deploy.bsh" />

	

		<delete>
			<fileset dir="${jboss.home}/server/${node}/${deploy.dir}">
				<include name="**/parlay*.jar" />
				<!--<include name="**/*" />-->
			</fileset>
		</delete>


		<!--
			<slee-management jnpport="${jnpPort}" host="${jnpHost}">
				<unbindralinkname linkname="${ra-entity}" />
				<deactivateraentity entityname="${ra-entity}" />
				<removeraentity entityname="${ra-entity}" />
				<uninstall url="${file_url}${ra-du}" />
				<uninstall url="${file_url}${ratype-du}" />
			</slee-management>
			
			-->
	</target>



</project>
