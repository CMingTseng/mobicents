<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title/>
      <link rel="stylesheet" href="css/jbossorg.css" type="text/css"/>
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/>
   </head>
   <body>
      <div class="book" lang="en-US">
         <div class="titlepage">
            <div>
               <p id="title">
                  <a href="http://www.jboss.org" class="jbossOrg_href">
                     <strong>
						        JBoss.org	
						</strong>
                  </a>
                  <a href="http://labs.jboss.com/projects/docs" class="commDoc_href">
                     <strong>
						        Community Documentation	
						</strong>
                  </a>
               </p>
            </div>
            <hr/>
         </div>
         <div class="toc">
            <dl>
               <dt>
                  <span class="chapter">
                     <a href="#d0e3">1. Mobicents XML Document Management Server</a>
                  </span>
               </dt>
               <dd>
                  <dl>
                     <dt>
                        <span class="section">
                           <a href="#section-Mobicents_XML_Document_Management_Server">1.1. Mobicents XML Document Management Server</a>
                        </span>
                     </dt>
                     <dd>
                        <dl>
                           <dt>
                              <span class="section">
                                 <a href="#section-Introduction_to_the_XDM_Server">1.1.1. Introduction to the XDM Server</a>
                              </span>
                           </dt>
                           <dt>
                              <span class="section">
                                 <a href="#section-Configuring_Installing_and_Testing_the_XDM_Server">1.1.2. Configuring, Installing and Testing the XDM Server</a>
                              </span>
                           </dt>
                           <dt>
                              <span class="section">
                                 <a href="#section-Functional_Architecture_of_the_XDM_Server">1.1.3. Functional Architecture of the XDM Soerver</a>
                              </span>
                           </dt>
                           <dt>
                              <span class="section">
                                 <a href="#section-Resources_and_Further_Information_about_the_XDM_Server">1.1.4. Resources and Further Information about the XDM Server</a>
                              </span>
                           </dt>
                        </dl>
                     </dd>
                  </dl>
               </dd>
            </dl>
         </div>
         <div class="chapter" lang="en-US">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title">
                        <a name="d0e3"/>Chapter 1. Mobicents XML Document Management Server</h2>
                  </div>
               </div>
            </div>
            <div class="toc">
               <dl>
                  <dt>
                     <span class="section">
                        <a href="#section-Mobicents_XML_Document_Management_Server">1.1. Mobicents XML Document Management Server</a>
                     </span>
                  </dt>
                  <dd>
                     <dl>
                        <dt>
                           <span class="section">
                              <a href="#section-Introduction_to_the_XDM_Server">1.1.1. Introduction to the XDM Server</a>
                           </span>
                        </dt>
                        <dt>
                           <span class="section">
                              <a href="#section-Configuring_Installing_and_Testing_the_XDM_Server">1.1.2. Configuring, Installing and Testing the XDM Server</a>
                           </span>
                        </dt>
                        <dt>
                           <span class="section">
                              <a href="#section-Functional_Architecture_of_the_XDM_Server">1.1.3. Functional Architecture of the XDM Soerver</a>
                           </span>
                        </dt>
                        <dt>
                           <span class="section">
                              <a href="#section-Resources_and_Further_Information_about_the_XDM_Server">1.1.4. Resources and Further Information about the XDM Server</a>
                           </span>
                        </dt>
                     </dl>
                  </dd>
               </dl>
            </div>
            <div class="section" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title">
                           <a name="section-Mobicents_XML_Document_Management_Server"/>1.1. Mobicents XML Document Management Server</h2>
                     </div>
                  </div>
               </div>
               <div class="section" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title">
                              <a name="section-Introduction_to_the_XDM_Server"/>1.1.1. Introduction to the XDM Server</h3>
                        </div>
                     </div>
                  </div>
                  <p>The Mobicents XML Document Management Server (XDMS) is part of the Mobicents SIP Presence Service; it is the first free and open source implementation of an XML Document Management Server as defined in the <a xmlns:xlink="http://www.w3.org/1999/xlink" href="Open Mobile Alliance (OMA) XML Document Management v1.1 specification">Open Mobile Alliance (OMA) XML Document Management v1.1 specification</a>. This functional element of next-generation IP communication networks is responsible for handling the management of user XML documents stored on the network side, such as presence authorization rules, contact and group lists (also known as resource lists), static presence information, and much more.</p>
               </div>
               <div class="section" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title">
                              <a name="section-Configuring_Installing_and_Testing_the_XDM_Server"/>1.1.2. Configuring, Installing and Testing the XDM Server</h3>
                        </div>
                     </div>
                  </div>
                  <p class="formalpara">
                     <a name="fpara-XDM_Requirements"/>
                  </p>
                  <h5 class="formalpara">Requirements</h5>
                  <p class="formalpara">The Mobicents XDM Server depends on the Mobicents JAIN SLEE server and the Mobicents SIP and HTTP Servlet resource adapters. Make sure that all of these requirements are deployed before deploying the XDM Server.</p>
                  <div class="important">
                     <a name="important-The_XDM_Server_is_Currently_Incompatible_with_Java_1.6"/>
                     <h2>The XDM Server is Currently Incompatible with Java 1.6</h2>
                     <p>Currently, the Mobicents XDM Server will not work with Java 1.6, although this will be fixed in the future. Therefore, if you are running the XDM Server, make sure that you are using Java 1.5.</p>
                  </div>
                  <h5 class="formalpara">Configuration</h5>
                  <p class="formalpara">The Mobicents XML Document Management Server can be customized in the following aspects before being built.</p>
                  <div class="variablelist">
                     <a name="varlist-Customizing_the_XDM_Server"/>
                     <p class="title">
                        <b>Customizing the XDM Server</b>
                     </p>
                     <dl>
                        <dt>
                           <span class="term">XCAP Root</span>
                        </dt>
                        <dd>
                           <p>The Maven property <code class="literal">xdm.server.xcap.root</code>, in the <code class="filename">pom.xml</code> which is inside the Mobicents Presence Service root directory (in <code class="filename">/trunk/servers/sip-presence</code> to be exact) defines the relative path to root that is considered the XCAP Root for all XCAP URIs. This value must match the servlet name used in the Mobicents HTTP Servlet resource adapter. The default value is <em class="replaceable">
                                 <code>/mobicents</code>
                              </em>.</p>
                        </dd>
                        <dt>
                           <span class="term">Dynamic User Provisioning</span>
                        </dt>
                        <dd>
                           <p>The Maven property <code class="literal">dynamicUserProvisioning</code> in the <code class="filename">pom.xml</code> inside the Mobicents Presence Service root directory (in <code class="filename">/trunk/servers/sip-presence</code> to be exact) defines whether the XDM Server should provision the user when a <code class="literal">PUT</code> request is being processed and the user is not installed for the request's application usage. The default value is true.</p>
                        </dd>
                     </dl>
                  </div>
                  <p>Note that you do not need to touch or configure anything in order to deploy the server.</p>
                  <h5 class="formalpara">Installing the Mobicents XML Document Management Server</h5>
                  <p class="formalpara">How you install the XDM Server depends on whether you are using the Mobicents binary distribution, or running the source distribution.</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <h5 class="formalpara">Installing the XDM Server using the Mobicents Binary Distribution</h5>
                           <p class="formalpara">TBD: (Fix this with proper instructions): Using the binary release, you can install the XDM Server by doing an ant deploy on the <code class="filename">servers/sip-presence/xdms</code> directory.</p>
                        </li>
                        <li>
                           <h5 class="formalpara">Installing the XDM Server after Building Mobicents from Source</h5>
                           <p class="formalpara">TBD: (Fix this with proper instructions): From the source code repository, you can install the XDM Server by doing a mvn install on the <code class="filename">/trunk/servers/sip-presence/xdms</code> directory.</p>
                        </li>
                     </ul>
                  </div>
                  <h5 class="formalpara">Uninstalling the Mobicents XML Document Management Server</h5>
                  <p class="formalpara">How you uninstall the XDM Server depends on whether you are using the Mobicents binary distribution, or running the source distribution.</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <h5 class="formalpara">Uninstalling the XDM Server using the Mobicents Binary Distribution</h5>
                           <p class="formalpara">TBD: (Fix this with proper instructions): Using the binary release, you can uninstall the XDM Server by doing an ant undeploy on the <code class="filename">servers/sip-presence/xdms</code> directory.</p>
                        </li>
                        <li>
                           <h5 class="formalpara">Uninstalling the XDM Server after Building Mobicents from Source</h5>
                           <p class="formalpara">TBD: (Fix this with proper instructions): From the source code repository, you can uninstall the XDM Server by doing a mvn clean on the <code class="filename">/trunk/servers/sip-presence/xdms</code> directory.</p>
                        </li>
                     </ul>
                  </div>
                  <h5 class="formalpara">Testing the Mobicents XDM Server</h5>
                  <p class="formalpara">TBD (Make sure this is correct): is recommended that you test the XDM Server after you deploy it. For instructions on how to test the XDM Server, read and follow the instructions in <code class="filename">.../xdms/tests/README.txt</code>. No tests should fail.</p>
               </div>
               <div class="section" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title">
                              <a name="section-Functional_Architecture_of_the_XDM_Server"/>1.1.3. Functional Architecture of the XDM Soerver</h3>
                        </div>
                     </div>
                  </div>
                  <p>The Mobicents XDM Server includes the following XCAP application usages:</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>
					
                              <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://tools.ietf.org/html/rfc5025">IETF Presence Rules (RFC 5025)</a>
				
                           </p>
                        </li>
                        <li>
                           <p>
					
                              <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.openmobilealliance.org/Technical/release_program/Presence_simple_v1_1.aspx">OMA Presence Rules (OMA Presence Simple v1.1 Candidate Release)</a>
				
                           </p>
                        </li>
                        <li>
                           <p>
					
                              <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://tools.ietf.org/html/rfc4826">IETF Resource Lists</a>
				
                           </p>
                        </li>
                        <li>
                           <p>
					
                              <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://tools.ietf.org/html/rfc4826">IETF RLS Services (RFC 4826)</a>
				
                           </p>
                        </li>
                        <li>
                           <p>
					
                              <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://tools.ietf.org/html/rfc4825">IETF XCAP-CAPS (RFC 4825)</a>
				
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="figure">
                     <a name="figure-sas-orig-dia-XDM_Functional_Architecture.jpg"/>
                     <div class="figure-contents">
                        <div class="mediaobject" align="center">
                           <a name="mediaobj-sas-orig-dia-XDM_Functional_Architecture.jpg"/>
                           <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                              <tr>
                                 <td align="center">
                                    <img src="images/sas-orig-dia-XDM_Functional_Architecture.jpg" align="middle" width="700" alt="The Mobicents XML Document Management Server"/>
                                 </td>
                              </tr>
                           </table>
                           <div class="caption">
                              <p>Functional Architecture of the XML Document Management Server</p>
                           </div>
                        </div>
                     </div>
                     <p class="title">
                        <b>Figure 1.1. The Mobicents XML Document Management Server</b>
                     </p>
                  </div>
                  <br class="figure-break"/>
                  <p>The XDM Server comprises the following functional elements:</p>
                  <div class="variablelist">
                     <a name="varlist-Functional_Elements_of_the_XDM_Server"/>
                     <p class="title">
                        <b>Functional Elements of the XDM Server</b>
                     </p>
                     <dl>
                        <dt>
                           <span class="term">Data Source</span>
                        </dt>
                        <dd>
                           <p>The XDM Server data source is where all user XML documents are stored. Information related to the server itself is also stored in this element along with the user's provisioned data</p>
                           <p>The data source also handles subscriptions to updates on specific documents, or complete XCAP application usages.</p>
                        </dd>
                        <dt>
                           <span class="term">Aggregation Proxy</span>
                        </dt>
                        <dd>
                           <p>The aggregation proxy is responsible for handling an XDM client's XCAP requests, which includes authentication and authorization of the requester.</p>
                        </dd>
                        <dt>
                           <span class="term">Request Processor</span>
                        </dt>
                        <dd>
                           <p>This element includes the XCAP Server logic to process an XCAP request and return a proper response.</p>
                        </dd>
                        <dt>
                           <span class="term">XDM Event Subscription Control</span>
                        </dt>
                        <dd>
                           <p>This element, using the SIP protocol, is responsible for handling subscriptions to documents managed by the XDM. Its functions include the authentication and authorization of a subscription, attachment to update events on specific documents or application usages, and the sending of notifications when documents change.</p>
                        </dd>
                     </dl>
                  </div>
                  <h5 class="formalpara">Implementation Architecture of the Mobicents XML Document Management Server</h5>
                  <p class="formalpara">The XDM Server is built on top of the Mobicents JAIN SLEE container. This figure depicts the architecture of the XDM Server implementation.</p>
                  <div class="figure">
                     <a name="figure-sas-orig-dia-XDMS_Implementation.jpg"/>
                     <div class="figure-contents">
                        <div class="mediaobject" align="center">
                           <a name="mediaobj-sas-orig-dia-XDMS_Implementation.jpg"/>
                           <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="700">
                              <tr>
                                 <td align="center">
                                    <img src="images/sas-orig-dia-XDMS_Implementation.jpg" align="middle" width="700" alt="Mobicents XML Document Management Server"/>
                                 </td>
                              </tr>
                           </table>
                           <div class="caption">
                              <p>Implementation Architecture of the XML Document Management Server</p>
                           </div>
                        </div>
                     </div>
                     <p class="title">
                        <b>Figure 1.2. Mobicents XML Document Management Server</b>
                     </p>
                  </div>
                  <br class="figure-break"/>
                  <div class="variablelist">
                     <a name="varlist-The_Functional_Elements_Which_Compose_the_XML_Document_Management_Server"/>
                     <p class="title">
                        <b>The Functional Elements Which Compose the XML Document Management Server</b>
                     </p>
                     <dl>
                        <dt>
                           <span class="term">Data Source Resource Adapter</span>
                        </dt>
                        <dd>
                           <p>This Resource Adaptor implements the Data Source functional element.</p>
                           <p>The <code class="literal">RA Type</code> defines two activities objects, <code class="literal">DocumentActivity</code> and <code class="literal">AppUsageActivity</code>, both of which are used to fire events that signal that a document, element or attribute was updated.</p>
                           <p>The <code class="literal">RA Type</code> also defines a Service Building Block (SBB) RA interface to manage the users and documents stored in the XDM Server, and create activities, where events will be fired. The resource adapter will only fire events on activities that exist; that is, the RA won't create activities implicitly if a document is updated.</p>
                           <p>The <code class="literal">RA Type</code> also provides a base abstract implementation of the resource adapter, making it very simple to change the underlying resource used to store information, which is by default the internal JDBC datasource of the JBoss Application Server.</p>
                        </dd>
                        <dt>
                           <span class="term">AppUsage Cache Resource Adaptor</span>
                        </dt>
                        <dd>
                           <p>This resource adapter stores the XCAP application usages installed in the server.</p>
                           <p>Each <code class="literal">AppUsage</code> is an object that includes the logic to validate XCAP documents that result from XCAP requests and are expensive to create; this resource adapter  thus provides caching of AppUsages, using a pool model.</p>
                           <p>The resource adapter doesn't possess events or activities.</p>
                        </dd>
                        <dt>
                           <span class="term">AppUsage Service</span>
                        </dt>
                        <dd>
                           <p>XCAP Application Usages are installed through a  JAIN SLEE service, making it possible to add and/or remove application usages while the server is running.</p>
                        </dd>
                        <dt>
                           <span class="term">Aggregation Proxy Service</span>
                        </dt>
                        <dd>
                           <p>This JAIN SLEE service implements the aggregation proxy functional element. It handles events fired by the Mobicents HTTP Servlet resource adapter and then uses two child SBBs: the <code class="literal">User Profile Enabler SBB</code> to retrieve information regarding the user needed for authentication/authorization of the XCAP request, and the <code class="literal">Request Processor SBB</code>, which handles the XCAP request.</p>
                        </dd>
                        <dt>
                           <span class="term">Request Processor SBB</span>
                        </dt>
                        <dd>
                           <p>The <code class="literal">Request Processor SBB</code> implements the request processor functional element, providing a synchronous SBB interface to process XCAP requests. It uses the <code class="literal">AppUsage Cache</code> resource adapter to borrow AppUsage objects, and the Data Source resource adapter to retrieve or set documents stored in the server's data source.</p>
                        </dd>
                        <dt>
                           <span class="term">User Profile Enabler SBB (TBD: not available yet)</span>
                        </dt>
                        <dd>
                           <p>This SBB provides a synchronous SBB interface used in JAIN SLEE child relations in order to retrieve user information. Two different implementations of the interface are provided, one considers that the information is stored in the XDM Data Source, another interfaces to a Diameter Sh Server such as IMS HSS.</p>
                        </dd>
                        <dt>
                           <span class="term">XCAP Diff Subscription Control Service (TBD: not available yet)</span>
                        </dt>
                        <dd>
                           <p>TBD</p>
                        </dd>
                     </dl>
                  </div>
                  <p>The implementation architecture figure also contains client-side components:</p>
                  <div class="variablelist">
                     <a name="varlist-Client-Side_Components_of_the_XML_Document_Management_Server_"/>
                     <p class="title">
                        <b>Client-Side Components of the XML Document Management Server </b>
                     </p>
                     <dl>
                        <dt>
                           <span class="term">XCAP Client</span>
                        </dt>
                        <dd>
                           <p>The XCAP client is a simple API to interact with an XCAP Server that internally uses the Apache HTTP Client.</p>
                           <p>The API documentation and example code snippets can be found TBD</p>
                        </dd>
                        <dt>
                           <span class="term">XCAP Client Resource Adaptor</span>
                        </dt>
                        <dd>
                           <p>The XCAP Client Resource Adaptor adapts the XCAP Client API into JAIN SLEE domain. It provides methods to interact with the XCAP server in both syncronous and asyncronous ways.</p>
                           <p>The RA Type description and code snippets using the RA can be found here.</p>
                        </dd>
                        <dt>
                           <span class="term">XDM Client SBB</span>
                        </dt>
                        <dd>
                           <p>The XDMClientSBB is an interface of a JAIN SLEE SBB to be used as a client to the Mobicents XDM Server (and others compliant with same standards), in JAIN SLEE child relations.</p>
                           <p>Two implementations of this interface are provided:</p>
                           <div class="itemizedlist">
                              <ul>
                                 <li>
                                    <p>
								
                                       <code class="literal">InternalXDMClientSBB</code> is intended to be used on applications running in the Mobicents XDM Server JAIN SLEE container, and</p>
                                 </li>
                                 <li>
                                    <p>
								
                                       <code class="literal">ExternalXDMClientSBB</code>, which is intended to be used on applications running in a different JAIN SLEE container than the Mobicents XDM Server.</p>
                                 </li>
                              </ul>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <p>TBD: This version of the documentation is from http://groups.google.com/group/mobicents-public/web/mobicents-xdm-server and the original author is Eduardo Martins, JBoss R&amp;D.</p>
               </div>
               <div class="section" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title">
                              <a name="section-Resources_and_Further_Information_about_the_XDM_Server"/>1.1.4. Resources and Further Information about the XDM Server</h3>
                        </div>
                     </div>
                  </div>
                  <p>For further information on the Mobicents XDM Server, here is a list of additional resources:</p>
                  <div class="itemizedlist">
                     <a name="itemlist-Further_Information_on_the_Mobicents_XDM_Server"/>
                     <ul>
                        <li>
                           <p>How to Manage the Mobicents XDM Server</p>
                        </li>
                        <li>
                           <p>How to Create an XCAP App(lication)Usage</p>
                        </li>
                        <li>
                           <p>Integrating XDM in your JAIN SLEE Apps: Code Snippets for XDM Client SBB Usage</p>
                        </li>
                        <li>
                           <p>
					
                              <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://groups.google.com/group/mobicents-public/web/xcap-client-api">XCAP Client API Documentation</a>
				
                           </p>
                        </li>
                        <li>
                           <p>
					
                              <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://groups.google.com/group/mobicents-public/web/xcap-client-resource-adaptor">XCAP Client RA Type Description and Example Code Snippets</a>
				
                           </p>
                        </li>
                        <li>
                           <p>Mobicents SIP Presence Service</p>
                        </li>
                        <li>
                           <p>Want to contribute?</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>