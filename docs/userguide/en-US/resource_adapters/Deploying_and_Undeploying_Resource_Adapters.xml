<?xml version='1.0'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<section
	id="section-Deploying_and_Undeploying_Resource_Adapters">
	<title>Deploying and Undeploying Resource Adapters</title>
	<section
		id="section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files">
		<title>Before You Begin: Resource Adapters and Deployable Unit Files</title>
		<para>Resource adapters are JAIN SLEE components that can be deployed (i.e. <quote>loaded</quote> or <quote>installed</quote>) into the Mobicents Converged Application Server, and undeployed (<quote>uninsntalled</quote>) from it. At the file level, resource adapters consist of specially-named files called deployable unit files. Two of these deployable unit files must be loaded/installed before the Mobicents Converged Application Server will deploy the resource adapter. The next few sections will teach you how to locate where resource adapters and their files live, and how to deploy them and undeploy them through several different, though equivalent ways: via the command line; by copying the correct files to a special directory, or removing them from it; or with the Mobicents Management Console.</para>
		<para>Which of these various ways of accomplishing the same task is easier depends on you. If you are comfortable with the command line, or like to script behavior, then deploying via the command line will probably be the preferred way for you. If you would prefer to simply copy or delete some files with the file manager, you can do it that way. And for those who prefer graphical user interfaces (<acronym>GUI</acronym>s), the Management Console provides an interface to the Mobicents Converged Application Server, and can easily be used to accomplish such tasks both locally and remotely. However&mdash;no matter which method you eventually choose, it will be necessary to read the following explanatory paragraphs, on where to find the directories corresponding to the resource adapters you want to install, and on how to recognize deployable unit files, and on the correct order in which to install the deployable unit files, before reading any or all of the method sections.</para>
		<formalpara
			id="fpara-Where_to_Find_Resource_Adapters_in_the_Mobicents_Installation">
			<title>Where to Find Resource Adapters in the Mobicents Installation</title>
			<para>The files belonging to resource adapters, and which you will need to access in order to deploy and undeplay them, are located in <filename><replaceable>&lt;topmost_mobicents_directory&gt;</replaceable>/resources</filename>. It is trivial to figure out which directory in <filename>resources</filename> corresponds to the resource adapter that you wish to deploy or undeploy. For example, the <filename>sipra</filename> directory holds the files necessary for running the <acronym>SIP</acronym> resource adapter, and the <filename>xmppra</filename> directory holds the <acronym>XMPP</acronym> and Google Talk resource adapter.</para>
		</formalpara>
		<formalpara
			id="fpara-How_to_Recognize_Deployable_Unit_Files">
			<title>How to Recognize Deployable Unit Files</title>
			<para>Deployable unit files are <acronym>JAR</acronym> (Java ARchive) files. There are two deployable unit files in each resource adapter's directory. The following two patterns describe the file names:</para>
		</formalpara>
		<variablelist
			id="varlist-Deployable_Unit_File_Name_Conventions">
			<title>Deployable Unit File Name Conventions</title>
			<varlistentry>
				<term>
					<filename>
						<replaceable>&lt;resource_adapter_abbreviation&gt;</replaceable>-ra-DU.jar</filename>
				</term>
				<listitem>
					<para>...where <emphasis>ra</emphasis> stands for <quote>resource adapter</quote>, and <emphasis>DU</emphasis> stands for "Deployable Unit (file). For example, if we want to deploy the <acronym>SIP</acronym> resource adapter, and we are located in <filename><replaceable>&lt;topmost_mobicents_directory&gt;</replaceable>/resources/sipra</filename>, then this deployable unit file will be named <filename>sip-ra-DU.jar</filename>.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>
					<filename>
						<replaceable>&lt;resource_adapter_abbreviation&gt;</replaceable>-ratype-DU.jar</filename>
				</term>
				<listitem>
					<para>...where <emphasis>ratype</emphasis> stands intuitively for <quote>resource adapter type</quote>, and <emphasis>DU</emphasis> again for <quote>Deployable Unit (file)</quote>. The file name for the <quote>ratype</quote> deployable unit file for the <acronym>SIP</acronym> resource adapter is therefore <filename>sip-ratype-DU.jar</filename>.</para>
				</listitem>
			</varlistentry>
		</variablelist>
		<formalpara
			id="fpara-How_to_Determine_the_Correct_Order_for_Installing_Deployable_Unit_Files">
			<title>How to Determine the Correct Order for Installing Deployable Unit Files</title>
			<para>Deployable unit files must be installed in a certain order, starting with the <emphasis>ratype</emphasis> deployable unit file, whose file name has the form: <filename><replaceable>&lt;resource_adapter_abbreviation&gt;</replaceable>-ratype-DU.jar</filename>.</para>
		</formalpara>
		<para>The second (and last) deployable unit file you must install is the <emphasis>ra</emphasis> file: <filename><replaceable>&lt;resource_adapter_abbreviation&gt;</replaceable>-ra-DU.jar</filename>.</para>
		<para>For example, if you wanted to deploy the SIP resource adapter, then you would want to first install the deployable unit file named <filename><replaceable>&lt;resource_adapter_abbreviation&gt;</replaceable>-ratype-DU.jar</filename>, followed by the <filename><replaceable>&lt;resource_adapter_abbreviation&gt;</replaceable>-ra-DU.jar</filename> file. </para>
	</section>
	<section
		id="section-Deploying_Resource_Adapters">
		<title>Deploying Resource Adapters</title>
		<note>
			<para>The introductory section titled <xref
					linkend="section-Before_You_Begin_Resource_Adapters_and_Deployable_Unit_Files"/> must be read before proceeding to one of the following sections.</para>
		</note>
		<para>
			<xref
				linkend="section-Deploying_Resource_Adapters_Via_the_Command_Line"/>
		</para>
		<para>
			<xref
				linkend="section-Deploying_Resource_Adapters_By_Copying_Deployable_Unit_Files"/>
		</para>
		<para>
				<xref
				linkend="section-Deploying_Resource_Adapters_With_the_Management_Console"/>
			</para>
		<section
			id="section-Deploying_Resource_Adapters_Via_the_Command_Line">
			<title>Deploying Resource Adapters Via the Command Line</title>
			<para>Resource adapters can be deployed by simply issuing an ant task command from the topmost Mobicents directory. Make sure that the Mobicents Converged Application Server has been started, and then change to the topmost directory:</para>
			<screen>
<command>cd <filename><replaceable>&lt;topmost_mobicents_directory&gt;</replaceable>
</filename>
</command>
			</screen>
			<para>Run the ant build-and-deploy script, remembering to replace <filename><replaceable>&lt;resource_adapter&gt;</replaceable>
				</filename> with the correct directory name (refer to <xref
					linkend="fpara-Where_to_Find_Resource_Adapters_in_the_Mobicents_Installation"/> if you are unsure):</para>
			<screen>
				<command>tools/ant/bin/ant -f <filename>resources/<replaceable>&lt;resource_adapter&gt;</replaceable>/build.xml</filename> ra-deploy</command>
			</screen>
			<para>For example, the directory name in <filename><replaceable>&lt;topmost_mobicents_directory&gt;</replaceable>/resources</filename> corresponding to the JAIN SIP resource adapter is (currently) named <filename>sipra</filename> ("SIP Resource Adapter"). To deploy the SIP resource adapter, therefore, you would issue the following command:</para>
			<screen>
<command>tools/ant/bin/ant -f <filename>resources/sipra/build.xml</filename> ra-deploy</command>
			</screen>
			<para>If the resource adapter builds successfully, then a message similar to the following will be written to standard output:</para>
			<screen>
<computeroutput>ra-activate:</computeroutput>
<computeroutput>ra-deploy:</computeroutput>
<computeroutput>BUILD SUCCESSFUL</computeroutput>
<computeroutput>Total time: 5 seconds</computeroutput>
			</screen>
			<para>To undeploy a resource adapter via the command line, refer to <xref
					linkend="section-Undeploying_Resource_Adapters_Via_the_Command_Line"/>.</para>
		</section>
		<section
			id="section-Deploying_Resource_Adapters_By_Copying_Deployable_Unit_Files">
			<title>Deploying Resource Adapters By Copying Deployable Unit Files</title>
			<para></para>
			<para>To undeploy a resource adapter by removing or deleting deployable unit files, refer to <xref
					linkend="section-Undeploying_Resource_Adapters_By_Removing_Files"/>.</para>
		</section>
		<section
			id="section-Deploying_Resource_Adapters_With_the_Management_Console">
			<title>Deploying Resource Adapters With the Management Console</title>
			<para>The Mobicents Management Console provides a graphical way to deploy and undeploy resource adapters. This section requires that you are familiar with the Management Console; for an introduction to the Console, refer first to <xref
					linkend="chapter-Working_with_the_Mobicents_Management_Console"/>.</para>
			<important>
				<para>The following instructions also assume that you have already read the previous sections on locating resource adapter directories and recognizing deployable unit files. It is essential to read those sections before attempting to deploy a resource adapter with the Management Console:</para>
				<itemizedlist>
					<listitem>
						<para>
							<xref
								linkend="fpara-Where_to_Find_Resource_Adapters_in_the_Mobicents_Installation"/>
						</para>
					</listitem>
					<listitem>
						<para>
							<xref
								linkend="fpara-How_to_Recognize_Deployable_Unit_Files"/>
						</para>
					</listitem>
				</itemizedlist>
			</important>
			<para>Once the Mobicents Converged Application Server is running, point your browser to <systemitem><ulink
						url="http://localhost:8080/management-console/"/>
				</systemitem> to open the Management Console. Click on <guimenuitem>Deployable Units</guimenuitem> in the Main Menu; this will open the <guilabel>Deployable Units</guilabel> main view, where you will see a list of currently-deployed units under the <guimenuitem>Browse</guimenuitem> tab, which will read <literal>No deployable unit found</literal> at first. Two other tabs provide the possibility of searching for and installing deployable units. Click on the <guimenuitem>Install</guimenuitem> tab, and you will see a <guilabel>Package file:</guilabel> prompt and a text-entry field in which the name of the deployable unit file you want to install will be listed. <remark>But first we must locate the correct deployable unit file, so click the <guibutton>Browse</guibutton> button to the right of the text-entry field.</remark>
			</para>
			<figure
				id="figure-The_Install_tab_of_the_Deployable_Units_view_in_the_Management_Console">
				<title>The Install tab of the Deployable Units view in the Management Console</title>
				<mediaobject>
					<imageobject>
						<imagedata
							align="center"
							fileref="../images/deployable_units-install.png"
							format="PNG"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>Before continuing, make sure that you know which deployable unit file to install first by reading the section titled <xref
					linkend="fpara-How_to_Determine_the_Correct_Order_for_Installing_Deployable_Unit_Files"/>.</para>
			<para>Once armed with this knowledge, click the <guibutton>Browse</guibutton> button to find and install the first deployable unit file, whose file name will appear in the text entry field, and then click the <guibutton>Install</guibutton> button. Then install the second deployable unit file. If you install the files in the incorrect order, a message similar to <computeroutput>[ERROR] javax.slee.management.DeploymentException: Could not deploy: No DeployableUniDeploymentDescriptor descriptor (META-INF/deployable-unit.xml) was found in deployable...</computeroutput> will appear in the <guilabel>Log Console</guilabel> at the bottom of the Management Console main view. If you receive this error message, try installing the other deployable unit file first. Installing the right files in the correct order will lead to <computeroutput>[INFO] Deployable unit installed</computeroutput> messages in the <guilabel>Log Console</guilabel>.</para>
			<para>If you see the name of the resource adapter you wanted to install listed in the <guimenuitem>Resources</guimenuitem> view of the Management Console, then that resource adapter has been successfully deployed.</para>
			<figure
				id="figure-Successful_Deployment_of_the_SIP_Resource_Adapter_with_the_Mobicents_Management_Console">
				<title>Successful Deployment of the SIP Resource Adapter with the Mobicents Management Console</title>
				<mediaobject>
					<imageobject>
						<imagedata
							align="center"
							fileref="../images/deployable_units-installation_success.png"
							format="PNG"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>To undeploy a resource adapter with the Management Console, refer to <xref
					linkend="section-Undeploying_Resource_Adapters_With_the_Management_Console"/>.</para>
		</section>
	</section>
	<section
		id="section-Undeploying_Resource_Adapters">
		<title>Undeploying Resource Adapters</title>
		<para></para>
		<section
			id="section-Undeploying_Resource_Adapters_Via_the_Command_Line">
			<title>Undeploying Resource Adapters Via the Command Line</title>
			<para></para>
		</section>
		<section
			id="section-Undeploying_Resource_Adapters_By_Removing_Files">
			<title>Undeploying Resource Adapters By Removing Files</title>
			<para></para>
		</section>
		<section
			id="section-Undeploying_Resource_Adapters_With_the_Management_Console">
			<title>Undeploying Resource Adapters With the Management Console</title>
			<para></para>
		</section>
	</section>
</section>
