<project name="3pcc_ws_client" default="run-ws" basedir=".">

	<property environment="system" />
	<property name="jboss.home" location="${system.JBOSS_HOME}" />
	<property name="server.ip.address" value="localhost" />

	<property name="src" location="src" />
	<property name="build" location="build" />
	<!--	<property name="axis.home" location="C:/Java/axis-1_2_1"/>-->
	<property name="module.name.wsr" value="3pcc_ws_server.wsr" />
	<property name="module.name.jar" value="3pcc_ws_server.jar" />
	<property name="module.name.ear" value="3pcc_ws_server.ear" />
	<property name="resource.dir" value="WebContent" />
	<property name="common.dir" value="${basedir}/../common" />

	<property name="web.dir" value="service" />
	<property name="parlayx.dir" value="${src}/org/csapi/www/schema/parlayx" />
	<property name="examples.home" value="${system.MOBICENTS_EXAMPLES}" />
	<!--  MOBICENTS MCLI[ in fact this is slee-management.xml but name has been changed for conveniance] 
	  -->
	<import file="${examples.home}/lib/build.xml" />
	<target name="clean" description="clean project">
		<delete failonerror="false">
			<fileset dir="${build}">
				<include name="**/*.class" />
			</fileset>
		</delete>
		<delete dir="${build}" />
	</target>
	<target name="init" depends="clean,management-init,lib-init">
		<tstamp />
		<mkdir dir="${build}" />
		<path id="client.classpath">
			<!--  <pathelement location="${jboss.home}/client/axis-ws4ee.jar" /> 
	  -->
			<!--  <pathelement location="${jboss.home}/client/commons-discovery.jar" />	
	  -->
			<!--  <pathelement location="${jboss.home}/client/commons-logging.jar" />	
	  -->
			<!--  <pathelement location="${jboss.home}/client/jboss-jaxrpc.jar" /> 
	  --> 
	 <!--  <pathelement location="${jboss.home}/client/jboss-saaj.jar" />	
	  --> 
	 <!--  <pathelement location="${jboss.home}/client/log4j.jar" /> 
	  --> 
	 <!--  <pathelement location="${jboss.home}/client/wsdl4j.jar" /> 
	  --> 
	 <!--  <pathelement location="${jboss.home}/client/jboss-common-client.jar" /> 
	  -->
			<pathelement location="${basedir}/lib/axis.jar" />
			<pathelement location="${basedir}/lib/axis-ant.jar" />
			<pathelement location="${basedir}/lib/jaxrpc.jar" />
			<pathelement location="${basedir}/lib/saaj.jar" />
			<pathelement location="${basedir}/lib/log4j-1.2.8.jar" /> 
	 <!--  For AXIS 1.1 
	  -->
			<pathelement location="${basedir}/lib/commons-logging.jar" />
			<pathelement location="${basedir}/lib/commons-discovery.jar" />
			<pathelement location="${basedir}/lib/wsdl4j.jar" /> 
	 <!--  For AXIS 1.2.1 
	  --> 
	 <!--  
							<pathelement location="${basedir}/lib/commons-logging-1.0.4.jar" /> 
							<pathelement location="${basedir}/lib/commons-discovery-0.2.jar" />
							<pathelement location="${basedir}/lib/wsdl4j-1.5.1.jar" />
							
	  -->
			<pathelement location="${basedir}/lib/xercesImpl.jar" />
			<pathelement location="${basedir}/lib/xercesSamples.jar" />
			<pathelement location="${basedir}/lib/xml-apis.jar" />
			<pathelement location="${basedir}/lib/xmlParserAPIs.jar" />
			<pathelement location="${basedir}/lib/activation.jar" />
			<pathelement location="${basedir}/lib/mailapi.jar" />
			<pathelement location="${basedir}/lib/jdom.jar" />
			<pathelement location="${build}" />
			<pathelement location="${examples.home}/lib/slee_1_1.jar" />
			<pathelement location="${jboss.home}/server/all/deploy/jbossweb-tomcat50.sar/servlet-api.jar" />
			<pathelement location="${jboss.home}/lib/jboss-common.jar" />
			<pathelement location="${basedir}/../../3pcc_sip_slee/classes/" />
			<pathelement location="${jboss.home}/server/all/lib/jboss-j2ee.jar" /> 
	 <!--  <pathelement location="${build}" />
							<fileset dir="${basedir}/lib">
								<include name="**/*.jar" />
							</fileset>  
	  -->
		</path>
	</target>


	

	<target name="create-stubs" depends="init">
		<java classname="org.apache.axis.wsdl.WSDL2Java" fork="true" failonerror="true" classpathref="client.classpath">
			<arg value="http://${server.ip.address}:8080/jboss-net/services/ThirdPartyCall?wsdl" />
			<arg value="--output" />
			<arg file="src" />
			<arg value="--verbose" />
			<arg value="--package" />
			<arg value="org.csapi.www.schema.parlayx.common.v2_0" />
		</java>

		<!-- Since all files are generated in the common dir, move the concerned files to separate dirs -->
		<!-- <move todir="${parlayx.dir}/third_party_call/services">
			<fileset dir="${parlayx.dir}/common/v2_0">
				<include name="ThirdPartyCallImpl.java" />
				<include name="ThirdPartyCallImplService.java" />
				<include name="ThirdPartyCallImplServiceLocator.java" />
				<include name="ThirdPartyCallSoapBindingStub.java" />
			</fileset>
		</move>

		<move todir="${parlayx.dir}/third_party_call/v2_0">
			<fileset dir="${parlayx.dir}/common/v2_0">
				<include name="CallInformation.java" />
				<include name="CallStatus.java" />
				<include name="CallTerminationCause.java" />
			</fileset>
		</move> -->

		<sleep milliseconds="2000" />
	</target>


	<target name="compile" depends="create-stubs" description="compile source">

		<javac srcdir="${common.dir}" destdir="${build}" source="1.4" target="1.4">
			<classpath refid="client.classpath" />
		</javac>

		<javac srcdir="${src}" destdir="${build}" source="1.4" target="1.4">
			<classpath refid="client.classpath" />
		</javac>

	</target>

	<target name="run-ws" depends="compile">
		<!-- se.jayway.sip.callcontrol.client.ThirdPartyCallInvoker -->
		<!-- org.csapi.www.schema.parlayx.common.v2_0.CallerInvoker -->
		<java classname="se.jayway.sip.callcontrol.client.invoker.ThirdPartyCallInvoker" fork="false" failonerror="false">
			<classpath refid="client.classpath" />
		</java>
	</target>
</project>

