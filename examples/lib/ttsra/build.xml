<?xml version="1.0" encoding="UTF-8"?>
<project name="Common_Ant_Targets_for_SLEE_Resource_Adaptors">
	
	<property name="node" value="all" />
			<property name="deploy.dir" value="deploy-mobicents" />
			
			<!-- COMMENT @XXX@ Will be replaced with some value when copied to another dir -->

			<!-- DEPLOY & UNDEPLOY STUFF -->
			<property name="ra-entity" value="@ENTITY@" />
			<path id="ratype-du">
				<pathelement location="@RA_TYPE_DU@" />
			</path>
			<property name="ratype-du" refid="ratype-du" />
			<path id="ra-du">
				<pathelement location="@RA_DU@" />
			</path>
			<property name="ra-du" refid="ra-du" />
			<property name="ra-id" value="@RA_ID@" />


			<import file="../../tools/cli/slee-management.xml" />


			

			<target name="deploy" depends="management-init" description="Deploy RA. Requires that the JSLEE server is running.">
				<echo>Installing ${ra-entity}.</echo>

				<slee-management jnpport="${jnpPort}" host="${jnpHost}">
					<install url="${file_url}${ratype-du}" />
					<install url="${file_url}${ra-du}" />
					<createraentity resourceadaptorid="${ra-id}" entityname="${ra-entity}" />
					<activateraentity entityname="${ra-entity}" />
					<bindralinkname entityname="${ra-entity}" linkname="${ra-entity}" />
				</slee-management>
			</target>

			<target name="undeploy" depends="management-init" description="Undeploy RA. Requires that the JSLEE server is running.">
				<echo>Uninstalling ${ra-entity}.</echo>
				<slee-management jnpport="${jnpPort}" host="${jnpHost}">
					<unbindralinkname linkname="${ra-entity}" />
					<deactivateraentity entityname="${ra-entity}" />
					<removeraentity entityname="${ra-entity}" />
					<uninstall url="${file_url}${ra-du}" />
					<uninstall url="${file_url}${ratype-du}" />
				</slee-management>
			</target>
	
</project> 