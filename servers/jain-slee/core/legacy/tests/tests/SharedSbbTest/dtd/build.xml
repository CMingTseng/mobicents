<?xml version="1.0" encoding="utf-8"?>
<project default="all" name="SharedSbbTest">
    <target name="init">
        <path id="slee">
            <!--<pathelement location="lib\slee.jar"/>-->
            <fileset dir="lib">
                <include name="*.jar"/>
            </fileset>
        </path>
        <taskdef classname="org.mobicents.eclipslee.ant.SbbJar"
            classpath="lib\slee-tasks.jar" name="sbbjar"/>
        <taskdef classname="org.mobicents.eclipslee.ant.EventJar"
            classpath="lib\slee-tasks.jar" name="eventjar"/>
        <taskdef classname="org.mobicents.eclipslee.ant.ProfileSpecJar"
            classpath="lib\slee-tasks.jar" name="profilespecjar"/>
        <taskdef classname="org.mobicents.eclipslee.ant.DeployableJar"
            classpath="lib\slee-tasks.jar" name="deployablejar"/>
        <taskdef
            classname="org.mobicents.eclipslee.ant.ResourceAdaptorTypeJar"
            classpath="lib\slee-tasks.jar" name="resourceadaptortypejar"/>
        <taskdef
            classname="org.mobicents.eclipslee.ant.ResourceAdaptorJar"
            classpath="lib\slee-tasks.jar" name="resourceadaptorjar"/>
    </target>
    <target depends="init" name="all">
        <ant target="build-Sbb1-sbb"/>
        <ant target="build-Sbb2-sbb"/>
        <ant target="build-Sbb3-sbb"/>
        <ant target="build-DU1-DU"/>
        <ant target="build-DU2-DU"/>
        <ant target="build-DU3-DU"/>
    </target>
    <target depends="init" name="clean">
        <ant target="clean-Sbb1-sbb"/>
        <ant target="clean-Sbb2-sbb"/>
        <ant target="clean-Sbb3-sbb"/>
        <ant target="clean-DU1-DU"/>
        <ant target="clean-DU2-DU"/>
        <ant target="clean-DU3-DU"/>
    </target>
    <target depends="init" name="build-Sbb1-sbb">
        <mkdir dir="classes/Sbb1-sbb"/>
        <mkdir dir="jars/"/>
        <javac destdir="classes/Sbb1-sbb"
            includes="org/mobicents/test/Sbb1Sbb.java" srcdir="src">
            <classpath>
                <path refid="slee"/>
            </classpath>
        </javac>
        <sbbjar classpath="classes/Sbb1-sbb"
            destfile="jars/Sbb1-sbb.jar" sbbjarxml="src/org/mobicents/test/Sbb1-sbb-jar.xml"/>
    </target>
    <target name="clean-Sbb1-sbb">
        <delete file="jars/Sbb1-sbb.jar"/>
        <delete dir="classes/Sbb1-sbb"/>
    </target>
    <target depends="init" name="build-Sbb2-sbb">
        <mkdir dir="classes/Sbb2-sbb"/>
        <mkdir dir="jars/"/>
        <javac destdir="classes/Sbb2-sbb"
            includes="org/mobicents/test/Sbb2Sbb.java" srcdir="src">
            <classpath>
                <path refid="slee"/>
            </classpath>
        </javac>
        <sbbjar classpath="classes/Sbb2-sbb"
            destfile="jars/Sbb2-sbb.jar" sbbjarxml="src/org/mobicents/test/Sbb2-sbb-jar.xml"/>
    </target>
    <target name="clean-Sbb2-sbb">
        <delete file="jars/Sbb2-sbb.jar"/>
        <delete dir="classes/Sbb2-sbb"/>
    </target>
    <target depends="init" name="build-Sbb3-sbb">
        <mkdir dir="classes/Sbb3-sbb"/>
        <mkdir dir="jars/"/>
        <javac destdir="classes/Sbb3-sbb"
            includes="org/mobicents/test/Sbb3Sbb.java" srcdir="src">
            <classpath>
                <path refid="slee"/>
            </classpath>
        </javac>
        <sbbjar classpath="classes/Sbb3-sbb"
            destfile="jars/Sbb3-sbb.jar" sbbjarxml="src/org/mobicents/test/Sbb3-sbb-jar.xml"/>
    </target>
    <target name="clean-Sbb3-sbb">
        <delete file="jars/Sbb3-sbb.jar"/>
        <delete dir="classes/Sbb3-sbb"/>
    </target>
    <target depends="build-Sbb1-sbb,build-Sbb2-sbb" name="build-DU1-DU">
        <mkdir dir="classes/DU1-DU"/>
        <copy file="src/org/mobicents/test/DU1-deployable-unit.xml" tofile="classes/DU1-DU/deployable-unit.xml"/>
        <jar jarfile="jars/DU1-DU.jar">
            <metainf dir="classes/DU1-DU" includes="deployable-unit.xml"/>
            <fileset dir="" includes="jars/Sbb1-sbb.jar"/>
            <fileset dir="" includes="jars/Sbb2-sbb.jar"/>
            <fileset dir="." includes="src/org/mobicents/test/Service1-service.xml"/>
        </jar>
    </target>
    <target name="clean-DU1-DU">
        <delete file="jars/DU1-DU.jar"/>
        <delete dir="classes/DU1-DU"/>
    </target>
    <target depends="build-Sbb2-sbb,build-Sbb3-sbb" name="build-DU2-DU">
        <mkdir dir="classes/DU2-DU"/>
        <copy file="src/org/mobicents/test/DU2-deployable-unit.xml" tofile="classes/DU2-DU/deployable-unit.xml"/>
        <jar jarfile="jars/DU2-DU.jar">
            <metainf dir="classes/DU2-DU" includes="deployable-unit.xml"/>
            <fileset dir="" includes="jars/Sbb2-sbb.jar"/>
            <fileset dir="" includes="jars/Sbb3-sbb.jar"/>
            <fileset dir="." includes="src/org/mobicents/test/Service2-service.xml"/>
        </jar>
    </target>
    <target name="clean-DU2-DU">
        <delete file="jars/DU2-DU.jar"/>
        <delete dir="classes/DU2-DU"/>
    </target>
    <target depends="build-Sbb2-sbb,build-Sbb3-sbb" name="build-DU3-DU">
        <mkdir dir="classes/DU3-DU"/>
        <copy file="src/org/mobicents/test/DU3-deployable-unit.xml" tofile="classes/DU3-DU/deployable-unit.xml"/>
        <jar jarfile="jars/DU3-DU.jar">
            <metainf dir="classes/DU3-DU" includes="deployable-unit.xml"/>
            <fileset dir="" includes="jars/Sbb2-sbb.jar"/>
            <fileset dir="" includes="jars/Sbb3-sbb.jar"/>
            <fileset dir="." includes="src/org/mobicents/test/Service3-service.xml"/>
        </jar>
    </target>
    <target name="clean-DU3-DU">
        <delete file="jars/DU3-DU.jar"/>
        <delete dir="classes/DU3-DU"/>
    </target>
</project>
