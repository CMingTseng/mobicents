<document>
	<properties>
		<title>Jopr Integration</title>
	</properties>
	<body>
		<p>
			<i>Throughout this page you can click on the images to see them larger.</i>
		</p>
		<section name="Description">
			<p>
				Jopr is an enterprise management solution for JBoss middleware projects and other application technologies. 
				This pluggable project provides administration, monitoring, alerting, operational control and configuration 
				in an enterprise setting with fine-grained security and an advanced extension model. 
				It provides support for monitoring base operating system information on six operating systems as well as 
				management of Apache, JBoss Application Server and other related projects.
			</p>
			<p>
				See the <a href="http://www.jboss.org/jopr">jopr website</a> for more information
			</p>
			<p>
				This documentation provides information on how to enable the management of Mobicents Sip Servlets Servers through jopr with our custom jopr plugin.
			</p>
		</section>	
		<section name="Features">
			<p>
				With the Mobicents Sip Servlet jopr plugin, you can currently manage the SipApplicationDispatcher which is a central piece in the Mobicents Sip Servlets Architecture since 
				it has the responsibility of dispatching the SIP requests and responses (that is gets from the underlying jain-sip stack) to the deployed Sip Servlets applications.
			</p>
			<p>
				You can define the Concurrency
			</p>
			<p>			
				<a href="./mss-jopr-concurrency.png"><img src="small-mss-jopr-concurrency.png" /></a>
			</p>
			<p>
			and Congestion Control settings
			</p>
			<p>			
				<a href="./mss-jopr-queue.png"><img src="small-mss-jopr-queue.png" /></a>
			</p>	
			<p>
				(More information on <a href="./concurrency.html">Mobicents Sip Servlets Concurrency and Congestion Control</a>)
				and also you can see graphically the total number of SIP requests processed by the server and
				the number of pending messages to be processed in all queues.
			</p>
			<p>
				<a href="./mss-jopr-metrics.png"><img src="small-mss-jopr-metrics.png" /></a>
			</p>
		</section>
		<section name="Installation and Running Instructions">
			<p>
				<ul>
				<li>Follow the <a href="http://jboss.org/community/docs/DOC-12828">jopr installation instructions</a> to install the latest version of jopr.</li>
	
				<li>Make sure the jopr server and agent are running</li>
			
				<li>Start your JBoss Application Server in making sure that you specify the binding address when starting such <code>sh run.sh -b 192.168.0.10</code> 
				(the JBoss AS will not get recognized on localhost)</li>
		
				<li>Get the Mobicents Sip Servlets Jopr Plugin from the source code : <code>svn checkout http://mobicents.googlecode.com/svn/trunk/servers/sip-servlets/jopr-plugin mss-jopr-plugin</code></li>
				
				<li>In mss-jopr-plugin, do a mvn clean install</li>
			
				<li>Then copy the generated <code>jopr-mobicents-sip-servlets-plugin-1.0-SNAPSHOT.jar</code> in the target directory to the <code>jopr-server-2.1.0.GA/jbossas/server/default/deploy/rhq.ear/rhq-downloads/rhq-plugins/</code></li>
			
				<li>Wait a bit, 20 seconds maybe or as soon as you see the following message on the jopr server console : [ProductPluginDeployer] Deploying RHQ plugin MobicentsSipServlets (Mobicents Sip Servlets Application Container), undefined version...
				and then from the jopr agent, run the command <code>plugins update</code>, it will get the newly deployed plugin from the jopr server and start collecting data about the SipApplicationDispatcher</li>
			
				<li>Log in to the jopr console on <a href="http://localhost:7080"/> and from the Dashboard, in the Auto Discovery portlet, import your server (by example <code>deruelle-laptop JBossAS 4.2.2.GA default (192.168.0.12:1099)</code>) from under localhost.</li>
				
				<a href="./mss-jopr-auto-disc.png"><img src="small-mss-jopr-auto-disc.png"/></a>
			
				<li>Then from the Dashboard, in the Recently Added Resources portlet, click on the server,</li> 
				
				<a href="./mss-jopr-resources.png"><img src="small-mss-jopr-resources.png"/></a>
				
				<li>Then on the new Monitor view click on the JBossWeb Server link</li>
				
				<a href="./mss-jopr-monitor.png"><img src="small-mss-jopr-monitor.png"/></a>
				
				<li>Then on the SipApplicationDispatcher link to see the metrics coming in.</li>
				
				<a href="./mss-jopr-web.png"><img src="small-mss-jopr-jboss-web.png"/></a>
			
				<li>To get the metrics coming in, you will need to use an example application such as location service by example so that the SipApplicationDispatcher process requests.</li>
				
				<a href="./mss-jopr-metrics.png"><img src="small-mss-jopr-metrics.png"/>	</a>
				</ul>
			</p>
		</section>				
	</body>
</document>