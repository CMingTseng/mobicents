<emphasis role="strong">3.2 Connections</emphasis>
&nbsp;
Connections are created on the call agent on each endpoint that
will be involved in the &quot;call.&quot;&nbsp; In the classic
example of a connection between two &quot;DS0&quot; endpoints (EP1
and EP2), the call agents controlling the end points will establish
two connections (C1 and C2):
&nbsp;
&nbsp;
<ulink url="/group/mobicents-public/web/msconn.jpg"><inlinemediaobject>
                                                      <imageobject>
                                                        <imagedata fileref="/group/mobicents-public/web/msconn.jpg" />
                                                      </imageobject>
                                                    </inlinemediaobject></ulink>
&nbsp;
&nbsp;
Each connection will be designated locally by a connection
identifier, and will be characterized by connection attributes.
&nbsp;
&nbsp;
<emphasis role="strong">3.2.1 Resources and connection attributes.</emphasis>
&nbsp;
Many types of resources will be associated to a connection, such as
specific signal processing functions or packetization functions.
Generally, these resources fall in two categories:
&nbsp;
<itemizedlist>
  <listitem>
    <para>
      Externally visible resources, that affect the format of &quot;the
      bits on the network&quot; and must be communicated to the second
      endpoint involved in the connection.
    </para>
  </listitem>
  <listitem>
    <para>
      Internal resources, that determine which signal is being sent over
      the connection and how the received signals are processed by the
      endpoint
    </para>
  </listitem>
</itemizedlist>
<para>
  The resources allocated to a connection, and more generally the
  handling of the connection, are chosen by the&nbsp;media
  server&nbsp;under instructions from the call agent.&nbsp; The call
  agent will provide these&nbsp; instructions by sending two set of
  parameters to the media server:
</para>
<itemizedlist>
  <listitem>
    <para>
      The local directives instruct the gateway on the choice of
      resources that should be used for a connection
    </para>
  </listitem>
  <listitem>
    <para>
      When available, the &quot;session description&quot; provided by the
      other end of the connection.
    </para>
  </listitem>
</itemizedlist>
<para>
  The local directives specify such parameters as the mode of the
  connection (e.g. send only, send-receive), preferred coding or
  packetization methods, usage of echo cancellation or silence
  suppression.&nbsp; (A detailed list can be found in the
  specification of&nbsp;&nbsp; the LocalConnectionOptions parameter
  of the CreateConnection command.) For each of these parameters, the
  call agent can either specify a value, a range of value, or no
  value at all.&nbsp; This allow various implementations to implement
  various level of control, from a very tight control where the call
  agent specifies minute details of&nbsp;&nbsp; the connection
  handling to a very loose control where the call agent only
  specifies broad guidelines, such as the maximum bandwidth, and let
  the gateway choose the detailed values.
</para>
<para>
  &nbsp;
</para>
<para>
  Based on the value of the local directives, the gateway will
  determine the resources allocated to the connection.&nbsp; When
  this is possible, the gateway will choose values that are in line
  with the remote session description - but there is no absolute
  requirement that the parameters be exactly the same.
</para>
<para>
  &nbsp;
</para>
<para>
  Once the resource have been allocated, the gateway will compose a
  &quot;session description&quot; that describes the way it intends
  to receive packets.&nbsp; Note that the session description may in
  some cases present a range of values.&nbsp; For example, if the
  gateway is ready to accept one of several compression algorithm, it
  can provide a list of these accepted algorithms.
</para>
<para>
  <literallayout></literallayout>&nbsp;
</para>
<para>
  <emphasis role="strong">3.2.2 &nbsp;Special case for local connections.</emphasis>
</para>
<para>
  &nbsp;
</para>
<para>
  Large gateways include a large number of endpoints which are often
  of different types.&nbsp; In some networks, we may often have to
  setup connections between endpoints that are located within the
  same gateway.&nbsp; Examples of such connections may be:
</para>
<itemizedlist>
  <listitem>
    <para>
      Connecting a trunk line to a wiretap device,
    </para>
  </listitem>
  <listitem>
    <para>
      Connecting a call to an Interactive Voice-Response unit
    </para>
  </listitem>
  <listitem>
    <para>
      Connecting a call to a Conferencing unit
    </para>
  </listitem>
  <listitem>
    <para>
      Routing a call from on endpoint to another, something often
      described as a &quot;hairpin&quot; connection.
    </para>
  </listitem>
</itemizedlist>
<para>
  Local connections are much simpler to establish than network
  connections. In most cases, the connection will be established
  through some local interconnecting device, such as for example a
  TDM bus.
</para>
<para>
  &nbsp;
</para>
<para>
  &nbsp;
</para>
<para>
  <ulink url="/group/mobicents-public/web/mobicents-media-server">TOC</ulink>
</para>
<para>
  <ulink url="/group/mobicents-public/web/mobicents-ms-acrhmedia-server-architecture">Previous</ulink>
</para>
<para>
  <ulink url="/group/mobicents-public/web/mobicents-ms-arch-evts">Next</ulink>
</para>
<para>
  &nbsp;
</para>

