<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Mobicents_Community_Documentation.ent">
%BOOK_ENTITIES;
]>

<chapter id="Book_Structure" lang="en-US">
	<!--  This document was created with Syntext Serna Free.  --><title>Book Structure</title>
	<para>
		The structure of each user guide in the Mobicents User Documentation Suite (UDS) is controlled by the DocBook XML Document Type Definition (DTD). Before updating any user guide in the GCode SVN, it is very important to understand the way each user guide is constructed.
	</para>
	<para>
		As previously discussed, the Publican Toolchain requires a set of XML files to be present in the directory in order to publish a book to an output format. <xref linkend="table-Book-Structure" />describes the mandatory files that must be present, including a description of the file contents, and where the XML file is embedded into the finished user guide.
	</para>
	<table frame="all" id="table-Book-Structure" pgwide="1">
		<title>Book Components</title>
		<tgroup cols="3" colsep="1">
			<colspec align="left" colname="c0" colnum="1"></colspec>
			<colspec align="left" colname="c1" colnum="2"></colspec>
			<colspec align="left" colname="c2" colnum="3"></colspec>
			<thead>
				<row>
					<entry align="center">
						XML Book Component
					</entry>
					<entry align="center">
						Description
					</entry>
					<entry>
						Order of Component in the Book
					</entry>
				</row>
			</thead>
			<tbody>
				<row>
					<entry>
						<filename><replaceable>&lt;Book_Name&gt;</replaceable>.xml</filename>
					</entry>
					<entry>
						Contains the structure of the user guide, represented by xi:include references to each chapter-<replaceable>&lt;Chapter_Name&gt;</replaceable>.xml component, and other mandatory components in this table.
					</entry>
					<entry>
						Top Level (or Parent) component of any user guide.
					</entry>
				</row>
				<row>
					<entry>
						<filename>Book_Info.xml</filename>
					</entry>
					<entry>
						Contains information about the book title, book verson number, abstract and copyright information.
					</entry>
					<entry>
						1st Child. This is the opening information a reader will see in the user guide.
					</entry>
				</row>
				<row>
					<entry>
						<filename>Author_Group.xml</filename>
					</entry>
					<entry>
						Contains contact information about the authors that contributed to the content of the book.
					</entry>
					<entry>
						2nd Child. This component is included in the <filename>Book_Info.xml</filename> component.
					</entry>
				</row>
				<row>
					<entry>
						<filename>Preface.xml</filename>
					</entry>
					<entry>
						Contains pre-defined content explaining the typographical standards used in the guide, and other information that will assist the reader with using the guide.
					</entry>
					<entry>
						3rd Child. This component is included after the <filename>Book_Info.xml</filename> content.
					</entry>
				</row>
				<row>
					<entry>
						<filename>chapter-<replaceable>&lt;Chapter_Name&gt;</replaceable>.xml</filename>
					</entry>
					<entry>
						Contains XML markup and content included at a Chapter level in the document. The XML file is named only for human-readability.
					</entry>
					<entry>
						4th. This is the top level element for each chapter in the user guide. The order of these files in the <filename><replaceable>&lt;Book_Name&gt;</replaceable>.xml</filename> file determines the structure of the guide.
					</entry>
				</row>
				<row>
					<entry>
						<filename>section-<replaceable>&lt;Section_Name&gt;</replaceable>.xml</filename>
					</entry>
					<entry>
						Contains XML markup and content included at a Section level in the document. The XML file is named only for human-readability.
					</entry>
					<entry>
						5th. This component is included in <filename>chapter-<replaceable>&lt;Chapter_Name&gt;</replaceable>.xml</filename> files by xi:include reference.
					</entry>
				</row>
				<row>
					<entry>
						<filename>Revision History.xml</filename>
					</entry>
					<entry>
						Contains a record of the revisions made to the document over time. Top-level information about changes in the guide are provided to the reader.
					</entry>
					<entry>
						6th.
					</entry>
				</row>
			</tbody>
		</tgroup>
	</table>
	<para>
		To ensure Maven JDocBook can publish the content generated by the Publican Toolchain, additonal XML content is required. Maven JDocBook does not have access to the Publican Toolchain common_content directory, therefore, the required XML files must be included as xi:fallback references in the <filename>preface.xml</filename> and <filename>book_info.xml</filename> files.
	</para>
	<table frame="all" id="table-Maven_JDocBook_Content" pgwide="1">
		<title>Maven JDocBook Content</title>
		<tgroup cols="3" colsep="1">
			<colspec align="left" colname="c0" colnum="1"></colspec>
			<colspec align="left" colname="c1" colnum="2"></colspec>
			<colspec align="left" colname="c2" colnum="3"></colspec>
			<thead>
				<row>
					<entry align="center">
						XML Component
					</entry>
					<entry align="center">
						Description
					</entry>
					<entry>
						Order of Component in the Book
					</entry>
				</row>
			</thead>
			<tbody>
				<row>
					<entry>
						<filename>Conventions.xml</filename>
					</entry>
					<entry>
						Contains typographical standards used within the guide.
					</entry>
					<entry>
						Inserted by xi:fallback reference at the end of the <filename>Preface.xml</filename> file.
					</entry>
				</row>
				<row>
					<entry>
						<filename>Feedback.xml</filename>
					</entry>
					<entry>
						Contains information about how to raise a bug against the user documentation.
					</entry>
					<entry>
						Inserted by xi:fallback reference at the end of the <filename>Preface.xml</filename> file.
					</entry>
				</row>
				<row>
					<entry>
						<filename>Legal_Notice.xml</filename>
					</entry>
					<entry>
						Contains standardized Red Hat legal information.
					</entry>
					<entry>
						Inserted by xi:fallback reference at the end of the <filename>Book_Info.xml</filename> file
					</entry>
				</row>
			</tbody>
		</tgroup>
	</table>
	<para>
		The content is contained within XML files in the fallback_content directory of each user guide repository. The fallback_content directory contains copies of the XML files located in the <filename>/usr/share/publican/Common_Content</filename> directory.
	</para>
	<note>
		<title>Fallback Content Accuracy Check</title>
		<para>
			The front-matter information located in the fallback_content directory of each user guide repository, is not maintained by the Publican Toolchain Team, or upgraded when Publican updates are installed. Therefore, manually verify that the information contained in these files are kept curent with the standards present in the latest Publican Toolchain version.
		</para>
	</note>
	<para>
		Fallback content is added to each xi:include element that Maven JDocBook does not have access to. The structure described in the following XML sample is for the <filename>Legal_Notice.xml</filename> information in the <filename>Book_Info.xml</filename> file.
	</para>
	<para>
		The xi:include element can have any number of xi:fallback elements defined. However, in the Mobicents UDS only one fallback is required.
	</para>
	
<programlisting role="XML">&lt;!--FOR PUBLICAN --&gt;
&lt;xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
 href="Common_Content/Legal_Notice.xml"&gt;
    &lt;!--FOR JDOCBOOK:--&gt;
    &lt;xi:fallback xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
        &lt;xi:include href="fallback_content/Legal_Notice.xml"
         xmlns:xi="http://www.w3.org/2001/XInclude"&gt;&lt;/xi:include&gt;
    &lt;/xi:fallback&gt;
&lt;/xi:include&gt;
</programlisting>
</chapter>

