<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>Sip-Servlets - </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <!-- TODO: move this into JavaScript to patch the skin
      <div class="xright">  </div>
    -->
    <div id="leftColumn">
      <div id="navcolumn">
             <dl class=navgroup>
        <dd><ul>
              
    <li class="none">
              <a href="../index.html">Introduction</a>
        </li>
              
                
              
      
            
      
              
        <li class="collapsed">
              <a href="../installation.html">Installation</a>
              </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
            
              
            <li class="expanded">
              <a href="../examples/examples.html">Examples</a>
                <ul>
                  
    <li class="none">
              <a href="../examples/call_blocking.html">Call Blocking</a>
        </li>
                  
    <li class="none">
              <a href="../examples/call_forwarding.html">Call Forwarding</a>
        </li>
                  
    <li class="none">
              <a href="../examples/call_controller.html">Call Controller</a>
        </li>
                  
    <li class="none">
              <a href="../examples/speed_dial.html">Speed Dial</a>
        </li>
                  
    <li class="none">
              <a href="../examples/location_service.html">Location Service</a>
        </li>
                  
    <li class="none">
              <a href="../examples/speeddial_locationservice.html">Speed Dial/Location Service</a>
        </li>
                  
    <li class="none">
              <a href="../examples/click2call.html">Click to Call</a>
        </li>
                  
    <li class="none">
              <a href="../examples/chatserver.html">Chat Server</a>
        </li>
                  
    <li class="none">
              <a href="../examples/media-demo.html">Media Demo</a>
        </li>
                  
    <li class="none">
              <strong>Shopping Demo</strong>
        </li>
              </ul>
        </li>
              
    <li class="none">
              <a href="../media.html">Media support</a>
        </li>
              
    <li class="none">
              <a href="../security.html">Security</a>
        </li>
              
    <li class="none">
              <a href="../stun.html">STUN suport</a>
        </li>
              
    <li class="none">
              <a href="../ssmc/sip-servlets-managment.htm">Management Console</a>
        </li>
              
    <li class="none">
              <a href="../roadmap.html">Roadmap</a>
        </li>
              
    <li class="none">
              <a href="../license.html">License</a>
        </li>
              
    <li class="none">
              <a href="https://hudson.jboss.org/hudson/job/MobicentsSipServlets/">QA</a>
        </li>
              
    <li class="none">
              <a href="../feedback.html">Feedback</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectMailingListList">Mailing lists</a>
        </li>
              
    <li class="none">
              <a href="../source/browse/sip-servlets/">Source code</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectIssues">Issues</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Project Documentation</dt>
        <dd><ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
              <a href="../project-info.html">Project Information</a>
              </li>
          </ul></dd>
    </dl>
        </div>
      <script>
        // replace the java.net project tools with the navigation bar from Maven.
        // also get rid of "Get Involved" thingie too, while we are at it
        var pt = document.getElementById("projecttools");
        var nv = document.getElementById("navcolumn");
        
        while(pt.previousSibling!=null)
          pt.parentNode.removeChild(pt.previousSibling);
        
        pt.parentNode.insertBefore(nv,pt);
        pt.parentNode.removeChild(pt);
      </script>
      <script>
        // kill "description" h3 bar
        var ld = document.getElementById("longdescription");
        if(ld!=null) {
          for( n=ld.firstChild; n!=null; n=n.nextSibling ) {
            if(n.nodeType==1 && n.innerHTML=="Description" ) {
              n.parentNode.removeChild(n);
              break;
            }
          }
        }
      </script>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <p><b>Important Note :</b>
 <i>This example is a modified version of the Mobicents JAIN-SLEE Converged Demo available at <a href="http://groups.google.com/group/mobicents-public/web/converged-application-demo?hl=en" class="externalLink">http://groups.google.com/group/mobicents-public/web/converged-application-demo?hl=en</a>
.<br />
It is has been modified to fit to Sip Servlets v 1.1 specification. The purpose here is to demonstrate integration with more technologies and protocols than just SIP and HTTP.<br />
It is a Converged JEE Application showing SEAM &amp; JEE integration and Media integration with TTS and DTMF support.<br />
This application only works on a full JEE Container, in other words it will only work on top of Jboss AS and not Tomcat.</i>
</p>
<div class="section"><h2>Shopping Demo</h2>
<div class="section"><h3>Service Description</h3>
<p>The idea is to have a converged application that shows how JEE application can leverage Sip Servlets to have voice, message and data transfer seamlessly.&#160; This example is built using Seam, Mobicents Sip Servlets and Mobicents Media Server deployed on Jboss AS. </p>
<div class="section"><h4>Application Flow </h4>
<ul><li>Once User places an order, he/she receives call to confirm for the same.<ul><li>User presses 1 and order state remains as OPEN and flow continues. If User presses 2 order gets CANCELLED and flow completes</li>
</ul>
</li>
<li>If order is less than 100$ it gets approved automatically as per the rule set by jBPM and User receives call to set delivery date and time.</li>
<li>If order is greater than 100$, Admin has to either approve or reject the order.</li>
<li>If Admin doesn't log on the site and take necessary action, call is initiated to Admin and Admin preses DTMF to take necessary action<ul><li>Admin presses 1 and order state changes to PROCESSING and flow continues. If Admin presses 2 order gets CANCELLED and flow completes.<ul><li>User id for Admin is 'manager' and password is 'password'</li>
</ul>
</li>
</ul>
</li>
<li>Once order is approved by Admin, a call is initiated to User to set the date and time for delivery<ul><li>Please note that for orders greater than 100$ call to User to set delivery date and time is only initiated if Admin logs on to system and approves. This is becuase the logic is tied with jBPM process and I haven't yet taken care that in SBB.</li>
</ul>
</li>
<li>User sets delivery date and time by punching numbers on his/her phone. As soon as this is done user can see the delivery date and time set on 'My Orders' tab and click on 'Show Details' for corresponding order.</li>
<li>Once again the ball roles on to Admin, and he/she has to log in the site and mark the order for Shipping</li>
<li>As soon as Admin marks the order for Shipping, call is initiated to User to remind him/her date and time when the shipment will arrive.</li>
</ul>
</div>
</div>
<div class="section"><h3>How to activate it</h3>
<div class="section"><h4>From the binary (only available starting from the 0.3 binary)</h4>
<p>You can find the ear file corresponding to this example <a href="http://download.java.net/maven/2/org/mobicents/servlet/sip/example/shopping-demo-ear/1.0/shopping-demo-ear-1.0.ear" class="externalLink">here</a>
.<br />
Rename it to shopping-demo.ear<br />
Drop the renamed shopping-demo.ear file into your <tt>jboss_home/server/default/deploy</tt>
 directory. </p>
<p>Get the corresponding <a href="/darfiles/shopping-demo-dar.properties">dar configuration file</a>
.<br />
Drop it in your <tt>jboss_home/server/default/conf/dars</tt>
 directory.<br />
To use this dar file for this service, specify in the Service xml tag, darConfigurationFileLocation attribute of the <tt>jboss_home/server/default/deploy/jboss-web.deployer/server.xml</tt>
, the following :<br />
<tt>conf/dars/shopping-demo-dar.properties.properties</tt>
</p>
<p>You can now run your Jboss AS Converged Container.</p>
</div>
<div class="section"><h4>From the source</h4>
<p>Setup your Jboss AS to become a converged container as explained <a href="/installation-jboss.html">here</a>
.</p>
<p>Please check out the shopping demo example located under this <a href="https://sip-servlets.dev.java.net/source/browse/sip-servlets/trunk/sip-servlets-examples/shopping-demo" class="externalLink">location</a>
 from the svn repository. Follow the instructions in the README.txt to build and run the example.</p>
<p>The DAR file for this example can be found at the root of the project. Use this as a DAR file (Service tag/darConfigurationFileLocation attribute in the jboss's server.xml): file:///E:/workspaces/sip-servlets/sip-servlets-examplesl/shopping-demo/shopping-demo-dar.properties </p>
</div>
</div>
<div class="section"><h3>How to play with it</h3>
<p>http://jboss bind address:8080/shopping-demo/</p>
<p>Start a Sip Phone, make it register as a customer (let's say sip:jean@shopping-demo.com) to your Jboss AS SIP Connector listening point (default to 127.0.0.1:5080).</p>
<p>Start another Sip Phone, make it register as admin (if you're using the binary or if you didn't change the sip.xml file it should be sip:admin@shopping-demo.com) to your Jboss AS SIP Connector listening point (default to 127.0.0.1:5080).</p>
<p>Before shopping create a new account and make sure that you enter the SIP address for Phone field of your registered Sip Phone (here sip:jean@shopping-demo.com)</p>
<p>For SIP Phone settings you can see examples at <a href="http://groups.google.com/group/mobicents-public/web/sip-phone-settings-for-converged-demo?hl=en" class="externalLink">SIP Phone Settings for Converged Demo</a>
 </p>
<ul><li>After creation of account once you check out the cart a call will be received on the customer SIP Phone for confirmation.</li>
<li>You can check your Order Status via 'My Orders' tab</li>
<li>After 30000 milli secs ( value specified for order.approval.waitingtime in convergeddemo.properties) call is received by Admin to confirm the order for Shipping or Cancel if order is greater than 100$ or a call will be received on the customer sip phone for choosing delivery date if order is lower than 100$</li>
<li>You can check log out and relog in as manager to accept the order if it is greater than 100$, then a call will be received on the customer sip phone for choosing delivery date. You can also ship the orders that have been accepted and then a reminder call will be placed on the customer sip phone. </li>
</ul>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2008
    
          
  

  
  
  &nbsp;| Last Published: 04/14/2008
  &nbsp;| Version: 0.3
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
